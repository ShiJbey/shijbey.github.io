(()=>{var e,t={124:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var i=o(81),n=o.n(i),r=o(645),a=o.n(r)()(n());a.push([e.id,".canvas-container{width:100%;height:600px;position:relative}canvas{width:100%;height:100%}@media only screen and (max-width: 500px){#gui{width:100%}.canvas-container{width:100%;height:65vh;position:relative}#download-button{position:block;width:100%}}#gui{position:absolute;top:0px;left:0px}#download-button-anchor{text-decoration:none}#download-button{position:absolute;bottom:10px;right:10px;height:60px;width:175px}#download-button button{background-color:gray;width:100%;height:100%;font-weight:bold;color:#fff;box-shadow:#000}#download-button button:hover{background-color:#d4d4d4}#download-button button:active{background-color:#caa2a2}",""]);const s=a},297:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var i=o(379),n=o.n(i),r=o(795),a=o.n(r),s=o(569),d=o.n(s),h=o(565),l=o.n(h),c=o(216),m=o.n(c),u=o(589),g=o.n(u),f=o(124),w={};w.styleTagTransform=g(),w.setAttributes=l(),w.insert=d().bind(null,"head"),w.domAPI=a(),w.insertStyleElement=m(),n()(f.Z,w);const p=f.Z&&f.Z.locals?f.Z.locals:void 0},212:(e,t,o)=>{"use strict";const i=o(477),n=o(376),r=o(878),a=o(365),s=o(327),d=o(179);function h(e){return Math.floor(Math.random()*Math.floor(e))}function l(e=7){let t="";for(let o=0;o<e;o++){const e=Math.random();t+=e<=.33?String.fromCharCode(48+h(10)):e>.33&&e<=.66?String.fromCharCode(97+h(25)):String.fromCharCode(65+h(25))}return t}o(297);const c=new i.MeshBasicMaterial({color:328965,wireframe:!0});(new class{constructor(){this.canvas=document.getElementById("threejs-canvas"),this.forgeParams={output:"mesh",seed:"Enter a seed value",template:"random",bladeParams:{color:"#7f7f7f",crossSection:"random",tip:"random",edgeScaleTolerance:.1},guardParams:{color:"#7f5100"},handleParams:{color:"#cc5100"},pommelParams:{color:"#e5cc59"}},this.swordModel=null,this.enableWireframe=!1,this.gui=new n.GUI({name:"Infiniforge Playground",closeOnTop:!0}),this.seedController=this.gui.add(this.forgeParams,"seed"),this.renderer=new i.WebGLRenderer({canvas:this.canvas,antialias:!0});const e=this.renderer.domElement.getBoundingClientRect();this.renderer.setSize(e.width,e.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.scene=new i.Scene,this.scene.background=new i.Color(15790320);const t=e.width/e.height;this.camera=new i.PerspectiveCamera(75,t,.1,1e3),this.camera.position.z=2,this.camera.position.y=1,this.camera.updateProjectionMatrix(),this.scene.add(this.camera),this.orbitControl=new a.OrbitControls(this.camera,this.canvas),this.orbitControl.enableDamping=!0,this.orbitControl.dampingFactor=.05,this.orbitControl.minDistance=.5,this.orbitControl.enableZoom=!0,this.orbitControl.enableRotate=!0,this.orbitControl.addEventListener("change",this.render.bind(this)),this.transformControl=new s.TransformControls(this.camera,this.canvas),this.transformControl.addEventListener("change",this.render.bind(this)),this.transformControl.addEventListener("dragging-changed",(e=>{this.orbitControl.enabled=!e.value})),this.scene.add(this.transformControl),this.raycaster=new i.Raycaster,this.pointer=new i.Vector2,this.onUpPosition=new i.Vector2,this.onDownPosition=new i.Vector2,this.init()}init(){this.initThree(),this.initForgeParams(),this.onWindowResize.bind(this),this.animate.bind(this)}initThree(){const e=new i.PlaneGeometry(200,200);e.rotateX(-Math.PI/2);const t=new i.ShadowMaterial({opacity:.2}),o=new i.Mesh(e,t);o.position.y=-10,o.receiveShadow=!0,this.scene.add(o);const n=new i.GridHelper(200,100);n.position.y=-9.9,this.scene.add(n);const r=new i.DirectionalLight(16777215);r.position.set(1,1,1),this.scene.add(r);const a=new i.DirectionalLight(13421772);a.position.set(-1,-1,-1),this.scene.add(a);const s=new i.AmbientLight(2236962);this.scene.add(s),window.addEventListener("resize",this.onWindowResize.bind(this),!1),document.addEventListener("pointerdown",this.onPointerDown.bind(this),!1),document.addEventListener("pointerup",this.onPointerUp.bind(this),!1)}initForgeParams(){var e,t,o,i,n,r,a,s;const d={"Random Seed":()=>{},Forge:this.forge.bind(this),"Random Forge":()=>{this.seedController.setValue(l()),this.forge()},"Toggle Wireframe":()=>{if(this.enableWireframe=!this.enableWireframe,this.swordModel)if(this.enableWireframe)this.swordModel.material=c;else{if(void 0===this.importedMaterial)throw new Error("Missing material for weapon model.");this.swordModel.material=this.importedMaterial}}};this.gui.domElement.id="gui",this.gui.add(d,"Random Forge"),this.gui.add(d,"Forge"),this.gui.add(d,"Random Seed").setValue((()=>{this.seedController.setValue(l())})),this.gui.add(this.forgeParams,"template",{Random:"random",Short:"short",Long:"long",Great:"great",Katana:"katana"});const h=this.gui.addFolder("Blade Options");h.add(null!==(e=this.forgeParams.bladeParams)&&void 0!==e?e:{},"crossSection",{Random:"random",Diamond:"diamond","Hallow Ground":"hallow_ground",Hexagonal:"hexagonal","Thickened Diamond":"thickened_diamond",Lenticular:"lenticular",Fuller:"fuller","Double Fuller":"double_fuller","Broad Fuller":"broad_fuller","Single edge":"single_edge"}),h.add(null!==(t=this.forgeParams.bladeParams)&&void 0!==t?t:{},"tip",{Random:"random",Standard:"standard",Square:"square",Rounded:"rounded",Clip:"clip"}),h.add(null!==(o=this.forgeParams.bladeParams)&&void 0!==o?o:{},"edgeScaleTolerance",0,1),h.addColor(null!==(i=this.forgeParams.bladeParams)&&void 0!==i?i:{},"color"),this.gui.addFolder("Guard Options").addColor(null!==(n=this.forgeParams.guardParams)&&void 0!==n?n:{},"color"),this.gui.addFolder("Handle Options").addColor(null!==(r=this.forgeParams.handleParams)&&void 0!==r?r:{},"color"),this.gui.addFolder("Pommel Options").addColor(null!==(a=this.forgeParams.pommelParams)&&void 0!==a?a:{},"color"),this.gui.add(d,"Toggle Wireframe"),null===(s=document.getElementById("canvas-container"))||void 0===s||s.appendChild(this.gui.domElement)}render(){this.renderer.render(this.scene,this.camera)}animate(){requestAnimationFrame(this.animate.bind(this)),this.orbitControl.update(),this.render()}async forge(){const e=new d.SwordGenerator;this.setGlTFDownload(!1);try{null!==this.swordModel&&this.scene.remove(this.swordModel),this.swordModel=await e.generate({...this.forgeParams,output:"mesh"}),this.setGlTFDownload(!1),this.swordModel.rotation.y+=Math.PI/2,this.importedMaterial=this.swordModel.material,this.scene.add(this.swordModel),(new r.GLTFExporter).parse(this.swordModel,(e=>{this.swordGlTF=JSON.stringify(e),this.setGlTFDownload(!0)}),(e=>{console.error(e)}))}catch(e){console.error(e)}}run(){this.animate()}onWindowResize(){this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.camera.aspect=this.canvas.width/this.canvas.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.canvas.width,this.canvas.height)}onPointerDown(e){this.onDownPosition.x=e.offsetX,this.onDownPosition.y=e.offsetY}onPointerUp(e){if(this.onUpPosition.x=e.offsetX,this.onUpPosition.y=e.offsetY,0===this.onDownPosition.distanceTo(this.onUpPosition)&&this.transformControl.detach(),!this.swordModel)return;this.pointer.x=e.offsetX/this.canvas.offsetWidth*2-1,this.pointer.y=-e.offsetY/this.canvas.offsetHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);const t=this.raycaster.intersectObjects([this.swordModel]);if(t.length>0){const e=t[0].object;e!==this.transformControl.object&&this.transformControl.attach(e)}}setGlTFDownload(e){const t=document.getElementById("download-button");e&&void 0!==this.swordGlTF?(t.disabled=!1,t.parentElement.href=URL.createObjectURL(new Blob([this.swordGlTF],{type:"application/gltf;charset=utf-8"}))):t.disabled=!0}}).run()},42:()=>{}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=t,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},e=[],i.O=(t,o,n,r)=>{if(!o){var a=1/0;for(l=0;l<e.length;l++){for(var[o,n,r]=e[l],s=!0,d=0;d<o.length;d++)(!1&r||a>=r)&&Object.keys(i.O).every((e=>i.O[e](o[d])))?o.splice(d--,1):(s=!1,r<a&&(a=r));if(s){e.splice(l--,1);var h=n();void 0!==h&&(t=h)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,n,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={305:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[a,s,d]=o,h=0;if(a.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(d)var l=d(i)}for(t&&t(o);h<a.length;h++)r=a[h],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(l)},o=self.webpackChunkshijbey_github_io=self.webpackChunkshijbey_github_io||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})(),i.nc=void 0;var n=i.O(void 0,[591],(()=>i(212)));n=i.O(n)})();