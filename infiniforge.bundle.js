/*! For license information please see infiniforge.bundle.js.LICENSE.txt */
(()=>{var t,e={685:(t,e,r)=>{"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},i={};!function(t,e,r){function n(t){var e=this,r=function(){var t=4022871197;return function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=r(" "),e.s1=r(" "),e.s2=r(" "),e.s0-=r(t),e.s0<0&&(e.s0+=1),e.s1-=r(t),e.s1<0&&(e.s1+=1),e.s2-=r(t),e.s2<0&&(e.s2+=1),r=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function s(t,e){var r=new n(t),s=e&&e.state,o=r.next;return o.int32=function(){return 4294967296*r.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,s&&("object"==typeof s&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.alea=s}(0,{get exports(){return i},set exports(t){i=t}});var s={};!function(t,e,r){function n(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function s(t,e){var r=new n(t),s=e&&e.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=r.next,o.quick=o,s&&("object"==typeof s&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.xor128=s}(0,{get exports(){return s},set exports(t){s=t}});var o={};!function(t,e,r){function n(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function s(t,e){var r=new n(t),s=e&&e.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=r.next,o.quick=o,s&&("object"==typeof s&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.xorwow=s}(0,{get exports(){return o},set exports(t){o=t}});var a={};!function(t,e,r){function n(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function s(t,e){null==t&&(t=+new Date);var r=new n(t),s=e&&e.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=r.next,o.quick=o,s&&(s.x&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.xorshift7=s}(0,{get exports(){return a},set exports(t){a=t}});var h={};!function(t,e,r){function n(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,s=e.i;return e.w=n=n+1640531527|0,r=i[s+34&127],t=i[s=s+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[s]=r^t,e.i=s,r+(n^n>>>16)|0},function(t,e){var r,n,i,s,o,a=[],h=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,h=Math.max(h,e.length)),i=0,s=-32;s<h;++s)e&&(n^=e.charCodeAt((s+32)%e.length)),0===s&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(o=o+1640531527|0,i=0==(r=a[127&s]^=n+o)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)n=a[i+34&127],r=a[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,a[i]=n^r;t.w=o,t.X=a,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function s(t,e){null==t&&(t=+new Date);var r=new n(t),s=e&&e.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=r.next,o.quick=o,s&&(s.X&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.xor4096=s}(0,{get exports(){return h},set exports(t){h=t}});var u={};!function(t,e,r){function n(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function s(t,e){var r=new n(t),s=e&&e.state,o=function(){return(r.next()>>>0)/4294967296};return o.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=r.next,o.quick=o,s&&("object"==typeof s&&i(s,r),o.state=function(){return i(r,{})}),o}e&&e.exports?e.exports=s:this.tychei=s}(0,{get exports(){return u},set exports(t){u=t}});var c,l={};c={get exports(){return l},set exports(t){l=t}},function(t,e,n){var i,s=256,o="random",a=n.pow(s,6),h=n.pow(2,52),u=2*h,l=255;function f(r,c,l){var f=[],v=g(m((c=1==c?{entropy:!0}:c||{}).entropy?[r,y(e)]:null==r?function(){try{var r;return i&&(r=i.randomBytes)?r=r(s):(r=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(r)),y(r)}catch(r){var n=t.navigator,o=n&&n.plugins;return[+new Date,t,o,t.screen,y(e)]}}():r,3),f),x=new p(f),b=function(){for(var t=x.g(6),e=a,r=0;t<h;)t=(t+r)*s,e*=s,r=x.g(1);for(;t>=u;)t/=2,e/=2,r>>>=1;return(t+r)/e};return b.int32=function(){return 0|x.g(4)},b.quick=function(){return x.g(4)/4294967296},b.double=b,g(y(x.S),e),(c.pass||l||function(t,e,r,i){return i&&(i.S&&d(i,x),t.state=function(){return d(x,{})}),r?(n[o]=t,e):t})(b,v,"global"in c?c.global:this==n,c.state)}function p(t){var e,r=t.length,n=this,i=0,o=n.i=n.j=0,a=n.S=[];for(r||(t=[r++]);i<s;)a[i]=i++;for(i=0;i<s;i++)a[i]=a[o=l&o+t[i%r]+(e=a[i])],a[o]=e;(n.g=function(t){for(var e,r=0,i=n.i,o=n.j,a=n.S;t--;)e=a[i=l&i+1],r=r*s+a[l&(a[i]=a[o=l&o+e])+(a[o]=e)];return n.i=i,n.j=o,r})(s)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(m(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\0"}function g(t,e){for(var r,n=t+"",i=0;i<n.length;)e[l&i]=l&(r^=19*e[l&i])+n.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(g(n.random(),e),c.exports){c.exports=f;try{i=r(616)}catch(t){}}else n["seed"+o]=f}("undefined"!=typeof self?self:n,[],Math);var f=i,p=s,d=o,m=a,g=h,y=u,v=l;v.alea=f,v.xor128=p,v.xorwow=d,v.xorshift7=m,v.xor4096=g,v.tychei=y;var x=v;class b{constructor(t=!1){this.prng=x(),this.verbose=t}setSeed(t){this.prng=x(t)}setVerbose(t){this.verbose=t}}const _="srgb",w="srgb-linear",M=7680;class A{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const r=e.slice(0);for(let e=0,n=r.length;e<n;e++)r[e].call(this,t);t.target=null}}}const S=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function C(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(S[255&t]+S[t>>8&255]+S[t>>16&255]+S[t>>24&255]+"-"+S[255&e]+S[e>>8&255]+"-"+S[e>>16&15|64]+S[e>>24&255]+"-"+S[63&r|128]+S[r>>8&255]+"-"+S[r>>16&255]+S[r>>24&255]+S[255&n]+S[n>>8&255]+S[n>>16&255]+S[n>>24&255]).toLowerCase()}function z(t,e,r){return Math.max(e,Math.min(r,t))}function T(t,e,r){return(1-r)*t+r*e}function k(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function O(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class E{constructor(t=0,e=0){E.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,r=this.y,n=t.elements;return this.x=n[0]*e+n[3]*r+n[6],this.y=n[1]*e+n[4]*r+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y;return e*e+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const r=Math.cos(e),n=Math.sin(e),i=this.x-t.x,s=this.y-t.y;return this.x=i*r-s*n+t.x,this.y=i*n+s*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class B{constructor(){B.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,r,n,i,s,o,a,h){const u=this.elements;return u[0]=t,u[1]=n,u[2]=o,u[3]=e,u[4]=i,u[5]=a,u[6]=r,u[7]=s,u[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],this}extractBasis(t,e,r){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,n=e.elements,i=this.elements,s=r[0],o=r[3],a=r[6],h=r[1],u=r[4],c=r[7],l=r[2],f=r[5],p=r[8],d=n[0],m=n[3],g=n[6],y=n[1],v=n[4],x=n[7],b=n[2],_=n[5],w=n[8];return i[0]=s*d+o*y+a*b,i[3]=s*m+o*v+a*_,i[6]=s*g+o*x+a*w,i[1]=h*d+u*y+c*b,i[4]=h*m+u*v+c*_,i[7]=h*g+u*x+c*w,i[2]=l*d+f*y+p*b,i[5]=l*m+f*v+p*_,i[8]=l*g+f*x+p*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],h=t[7],u=t[8];return e*s*u-e*o*h-r*i*u+r*o*a+n*i*h-n*s*a}invert(){const t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],h=t[7],u=t[8],c=u*s-o*h,l=o*a-u*i,f=h*i-s*a,p=e*c+r*l+n*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const d=1/p;return t[0]=c*d,t[1]=(n*h-u*r)*d,t[2]=(o*r-n*s)*d,t[3]=l*d,t[4]=(u*e-n*a)*d,t[5]=(n*i-o*e)*d,t[6]=f*d,t[7]=(r*a-h*e)*d,t[8]=(s*e-r*i)*d,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,r,n,i,s,o){const a=Math.cos(i),h=Math.sin(i);return this.set(r*a,r*h,-r*(a*s+h*o)+s+t,-n*h,n*a,-n*(-h*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(R.makeScale(t,e)),this}rotate(t){return this.premultiply(R.makeRotation(-t)),this}translate(t,e){return this.premultiply(R.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,r,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,r=t.elements;for(let t=0;t<9;t++)if(e[t]!==r[t])return!1;return!0}fromArray(t,e=0){for(let r=0;r<9;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const R=new B;function P(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function L(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function I(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const N={[_]:{[w]:L},[w]:{[_]:I}},F={legacyMode:!0,get workingColorSpace(){return w},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,r){if(this.legacyMode||e===r||!e||!r)return t;if(N[e]&&void 0!==N[e][r]){const n=N[e][r];return t.r=n(t.r),t.g=n(t.g),t.b=n(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},V={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},j={r:0,g:0,b:0},U={h:0,s:0,l:0},W={h:0,s:0,l:0};function D(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+6*(e-t)*(2/3-r):t}function q(t,e){return e.r=t.r,e.g=t.g,e.b=t.b,e}class J{constructor(t,e,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===r?this.set(t):this.setRGB(t,e,r)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=_){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,F.toWorkingColorSpace(this,e),this}setRGB(t,e,r,n=F.workingColorSpace){return this.r=t,this.g=e,this.b=r,F.toWorkingColorSpace(this,n),this}setHSL(t,e,r,n=F.workingColorSpace){if(t=(t%1+1)%1,e=z(e,0,1),r=z(r,0,1),0===e)this.r=this.g=this.b=r;else{const n=r<=.5?r*(1+e):r+e-r*e,i=2*r-n;this.r=D(i,n,t+1/3),this.g=D(i,n,t),this.b=D(i,n,t-1/3)}return F.toWorkingColorSpace(this,n),this}setStyle(t,e=_){function r(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],s=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,F.toWorkingColorSpace(this,e),r(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,F.toWorkingColorSpace(this,e),r(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const n=parseFloat(t[1])/360,i=parseFloat(t[2])/100,s=parseFloat(t[3])/100;return r(t[4]),this.setHSL(n,i,s,e)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],r=t.length;if(3===r)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,F.toWorkingColorSpace(this,e),this;if(6===r)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,F.toWorkingColorSpace(this,e),this}return t&&t.length>0?this.setColorName(t,e):this}setColorName(t,e=_){const r=V[t.toLowerCase()];return void 0!==r?this.setHex(r,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=L(t.r),this.g=L(t.g),this.b=L(t.b),this}copyLinearToSRGB(t){return this.r=I(t.r),this.g=I(t.g),this.b=I(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=_){return F.fromWorkingColorSpace(q(this,j),t),z(255*j.r,0,255)<<16^z(255*j.g,0,255)<<8^z(255*j.b,0,255)<<0}getHexString(t=_){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=F.workingColorSpace){F.fromWorkingColorSpace(q(this,j),e);const r=j.r,n=j.g,i=j.b,s=Math.max(r,n,i),o=Math.min(r,n,i);let a,h;const u=(o+s)/2;if(o===s)a=0,h=0;else{const t=s-o;switch(h=u<=.5?t/(s+o):t/(2-s-o),s){case r:a=(n-i)/t+(n<i?6:0);break;case n:a=(i-r)/t+2;break;case i:a=(r-n)/t+4}a/=6}return t.h=a,t.s=h,t.l=u,t}getRGB(t,e=F.workingColorSpace){return F.fromWorkingColorSpace(q(this,j),e),t.r=j.r,t.g=j.g,t.b=j.b,t}getStyle(t=_){return F.fromWorkingColorSpace(q(this,j),t),t!==_?`color(${t} ${j.r} ${j.g} ${j.b})`:`rgb(${255*j.r|0},${255*j.g|0},${255*j.b|0})`}offsetHSL(t,e,r){return this.getHSL(U),U.h+=t,U.s+=e,U.l+=r,this.setHSL(U.h,U.s,U.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,r){return this.r=t.r+(e.r-t.r)*r,this.g=t.g+(e.g-t.g)*r,this.b=t.b+(e.b-t.b)*r,this}lerpHSL(t,e){this.getHSL(U),t.getHSL(W);const r=T(U.h,W.h,e),n=T(U.s,W.s,e),i=T(U.l,W.l,e);return this.setHSL(r,n,i),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let G;J.NAMES=V;class Z{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===G&&(G=P("canvas")),G.width=t.width,G.height=t.height;const r=G.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=G}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=P("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const n=r.getImageData(0,0,t.width,t.height),i=n.data;for(let t=0;t<i.length;t++)i[t]=255*L(i[t]/255);return r.putImageData(n,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*L(e[t]/255)):e[t]=L(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class H{constructor(t=null){this.isSource=!0,this.uuid=C(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const r={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,r=n.length;e<r;e++)n[e].isDataTexture?t.push(X(n[e].image)):t.push(X(n[e]))}else t=X(n);r.url=t}return e||(t.images[this.uuid]=r),r}}function X(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?Z.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Y=0;class $ extends A{constructor(t=$.DEFAULT_IMAGE,e=$.DEFAULT_MAPPING,r=1001,n=1001,i=1006,s=1008,o=1023,a=1009,h=$.DEFAULT_ANISOTROPY,u=3e3){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Y++}),this.uuid=C(),this.name="",this.source=new H(t),this.mipmaps=[],this.mapping=e,this.wrapS=r,this.wrapT=n,this.magFilter=i,this.minFilter=s,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=a,this.offset=new E(0,0),this.repeat=new E(1,1),this.center=new E(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new B,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case 1001:t.x=t.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case 1001:t.y=t.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}$.DEFAULT_IMAGE=null,$.DEFAULT_MAPPING=300,$.DEFAULT_ANISOTROPY=1;class Q{constructor(t=0,e=0,r=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=r,this._w=n}static slerpFlat(t,e,r,n,i,s,o){let a=r[n+0],h=r[n+1],u=r[n+2],c=r[n+3];const l=i[s+0],f=i[s+1],p=i[s+2],d=i[s+3];if(0===o)return t[e+0]=a,t[e+1]=h,t[e+2]=u,void(t[e+3]=c);if(1===o)return t[e+0]=l,t[e+1]=f,t[e+2]=p,void(t[e+3]=d);if(c!==d||a!==l||h!==f||u!==p){let t=1-o;const e=a*l+h*f+u*p+c*d,r=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const i=Math.sqrt(n),s=Math.atan2(i,e*r);t=Math.sin(t*s)/i,o=Math.sin(o*s)/i}const i=o*r;if(a=a*t+l*i,h=h*t+f*i,u=u*t+p*i,c=c*t+d*i,t===1-o){const t=1/Math.sqrt(a*a+h*h+u*u+c*c);a*=t,h*=t,u*=t,c*=t}}t[e]=a,t[e+1]=h,t[e+2]=u,t[e+3]=c}static multiplyQuaternionsFlat(t,e,r,n,i,s){const o=r[n],a=r[n+1],h=r[n+2],u=r[n+3],c=i[s],l=i[s+1],f=i[s+2],p=i[s+3];return t[e]=o*p+u*c+a*f-h*l,t[e+1]=a*p+u*l+h*c-o*f,t[e+2]=h*p+u*f+o*l-a*c,t[e+3]=u*p-o*c-a*l-h*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,r,n){return this._x=t,this._y=e,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const r=t._x,n=t._y,i=t._z,s=t._order,o=Math.cos,a=Math.sin,h=o(r/2),u=o(n/2),c=o(i/2),l=a(r/2),f=a(n/2),p=a(i/2);switch(s){case"XYZ":this._x=l*u*c+h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c-l*f*p;break;case"YXZ":this._x=l*u*c+h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c+l*f*p;break;case"ZXY":this._x=l*u*c-h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c-l*f*p;break;case"ZYX":this._x=l*u*c-h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c+l*f*p;break;case"YZX":this._x=l*u*c+h*f*p,this._y=h*f*c+l*u*p,this._z=h*u*p-l*f*c,this._w=h*u*c-l*f*p;break;case"XZY":this._x=l*u*c-h*f*p,this._y=h*f*c-l*u*p,this._z=h*u*p+l*f*c,this._w=h*u*c+l*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const r=e/2,n=Math.sin(r);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,r=e[0],n=e[4],i=e[8],s=e[1],o=e[5],a=e[9],h=e[2],u=e[6],c=e[10],l=r+o+c;if(l>0){const t=.5/Math.sqrt(l+1);this._w=.25/t,this._x=(u-a)*t,this._y=(i-h)*t,this._z=(s-n)*t}else if(r>o&&r>c){const t=2*Math.sqrt(1+r-o-c);this._w=(u-a)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(i+h)/t}else if(o>c){const t=2*Math.sqrt(1+o-r-c);this._w=(i-h)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(a+u)/t}else{const t=2*Math.sqrt(1+c-r-o);this._w=(s-n)/t,this._x=(i+h)/t,this._y=(a+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let r=t.dot(e)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(z(this.dot(t),-1,1)))}rotateTowards(t,e){const r=this.angleTo(t);if(0===r)return this;const n=Math.min(1,e/r);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const r=t._x,n=t._y,i=t._z,s=t._w,o=e._x,a=e._y,h=e._z,u=e._w;return this._x=r*u+s*o+n*h-i*a,this._y=n*u+s*a+i*o-r*h,this._z=i*u+s*h+r*a-n*o,this._w=s*u-r*o-n*a-i*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const r=this._x,n=this._y,i=this._z,s=this._w;let o=s*t._w+r*t._x+n*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=r,this._y=n,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*r+e*this._x,this._y=t*n+e*this._y,this._z=t*i+e*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(a),u=Math.atan2(h,o),c=Math.sin((1-e)*u)/h,l=Math.sin(e*u)/h;return this._w=s*c+this._w*l,this._x=r*c+this._x*l,this._y=n*c+this._y*l,this._z=i*c+this._z*l,this._onChangeCallback(),this}slerpQuaternions(t,e,r){return this.copy(t).slerp(e,r)}random(){const t=Math.random(),e=Math.sqrt(1-t),r=Math.sqrt(t),n=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(e*Math.cos(n),r*Math.sin(i),r*Math.cos(i),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(t=0,e=0,r=0){K.prototype.isVector3=!0,this.x=t,this.y=e,this.z=r}set(t,e,r){return void 0===r&&(r=this.z),this.x=t,this.y=e,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(et.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(et.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[3]*r+i[6]*n,this.y=i[1]*e+i[4]*r+i[7]*n,this.z=i[2]*e+i[5]*r+i[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,r=this.y,n=this.z,i=t.elements,s=1/(i[3]*e+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*e+i[4]*r+i[8]*n+i[12])*s,this.y=(i[1]*e+i[5]*r+i[9]*n+i[13])*s,this.z=(i[2]*e+i[6]*r+i[10]*n+i[14])*s,this}applyQuaternion(t){const e=this.x,r=this.y,n=this.z,i=t.x,s=t.y,o=t.z,a=t.w,h=a*e+s*n-o*r,u=a*r+o*e-i*n,c=a*n+i*r-s*e,l=-i*e-s*r-o*n;return this.x=h*a+l*-i+u*-o-c*-s,this.y=u*a+l*-s+c*-i-h*-o,this.z=c*a+l*-o+h*-s-u*-i,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,r=this.y,n=this.z,i=t.elements;return this.x=i[0]*e+i[4]*r+i[8]*n,this.y=i[1]*e+i[5]*r+i[9]*n,this.z=i[2]*e+i[6]*r+i[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(e,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,r){return this.x=t.x+(e.x-t.x)*r,this.y=t.y+(e.y-t.y)*r,this.z=t.z+(e.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const r=t.x,n=t.y,i=t.z,s=e.x,o=e.y,a=e.z;return this.x=n*a-i*o,this.y=i*s-r*a,this.z=r*o-n*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const r=t.dot(this)/e;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return tt.copy(this).projectOnVector(t),this.sub(tt)}reflect(t){return this.sub(tt.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const r=this.dot(t)/e;return Math.acos(z(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,r=this.y-t.y,n=this.z-t.z;return e*e+r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,r){const n=Math.sin(e)*t;return this.x=n*Math.sin(r),this.y=Math.cos(e)*t,this.z=n*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,r){return this.x=t*Math.sin(e),this.y=r,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=r,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,r=Math.sqrt(1-t**2);return this.x=r*Math.cos(e),this.y=r*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tt=new K,et=new Q;class rt{constructor(t=new K(1/0,1/0,1/0),e=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,r=1/0,n=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,h=t.length;a<h;a+=3){const h=t[a],u=t[a+1],c=t[a+2];h<e&&(e=h),u<r&&(r=u),c<n&&(n=c),h>i&&(i=h),u>s&&(s=u),c>o&&(o=c)}return this.min.set(e,r,n),this.max.set(i,s,o),this}setFromBufferAttribute(t){let e=1/0,r=1/0,n=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,h=t.count;a<h;a++){const h=t.getX(a),u=t.getY(a),c=t.getZ(a);h<e&&(e=h),u<r&&(r=u),c<n&&(n=c),h>i&&(i=h),u>s&&(s=u),c>o&&(o=c)}return this.min.set(e,r,n),this.max.set(i,s,o),this}setFromPoints(t){this.makeEmpty();for(let e=0,r=t.length;e<r;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const r=it.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(void 0!==r)if(e&&null!=r.attributes&&void 0!==r.attributes.position){const e=r.attributes.position;for(let r=0,n=e.count;r<n;r++)it.fromBufferAttribute(e,r).applyMatrix4(t.matrixWorld),this.expandByPoint(it)}else null===r.boundingBox&&r.computeBoundingBox(),st.copy(r.boundingBox),st.applyMatrix4(t.matrixWorld),this.union(st);const n=t.children;for(let t=0,r=n.length;t<r;t++)this.expandByObject(n[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,it),it.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,r;return t.normal.x>0?(e=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ft),pt.subVectors(this.max,ft),ot.subVectors(t.a,ft),at.subVectors(t.b,ft),ht.subVectors(t.c,ft),ut.subVectors(at,ot),ct.subVectors(ht,at),lt.subVectors(ot,ht);let e=[0,-ut.z,ut.y,0,-ct.z,ct.y,0,-lt.z,lt.y,ut.z,0,-ut.x,ct.z,0,-ct.x,lt.z,0,-lt.x,-ut.y,ut.x,0,-ct.y,ct.x,0,-lt.y,lt.x,0];return!!gt(e,ot,at,ht,pt)&&(e=[1,0,0,0,1,0,0,0,1],!!gt(e,ot,at,ht,pt)&&(dt.crossVectors(ut,ct),e=[dt.x,dt.y,dt.z],gt(e,ot,at,ht,pt)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return it.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(it).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(nt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),nt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),nt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),nt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),nt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),nt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),nt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),nt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(nt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const nt=[new K,new K,new K,new K,new K,new K,new K,new K],it=new K,st=new rt,ot=new K,at=new K,ht=new K,ut=new K,ct=new K,lt=new K,ft=new K,pt=new K,dt=new K,mt=new K;function gt(t,e,r,n,i){for(let s=0,o=t.length-3;s<=o;s+=3){mt.fromArray(t,s);const o=i.x*Math.abs(mt.x)+i.y*Math.abs(mt.y)+i.z*Math.abs(mt.z),a=e.dot(mt),h=r.dot(mt),u=n.dot(mt);if(Math.max(-Math.max(a,h,u),Math.min(a,h,u))>o)return!1}return!0}const yt=new rt,vt=new K,xt=new K;class bt{constructor(t=new K,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const r=this.center;void 0!==e?r.copy(e):yt.setFromPoints(t).getCenter(r);let n=0;for(let e=0,i=t.length;e<i;e++)n=Math.max(n,r.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;vt.subVectors(t,this.center);const e=vt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),r=.5*(t-this.radius);this.center.addScaledVector(vt,r/t),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(xt.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(vt.copy(t.center).add(xt)),this.expandByPoint(vt.copy(t.center).sub(xt))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _t=new K,wt=new K,Mt=new K,At=new K,St=new K,Ct=new K,zt=new K;class Tt{constructor(){Tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,r,n,i,s,o,a,h,u,c,l,f,p,d,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=r,g[12]=n,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=h,g[6]=u,g[10]=c,g[14]=l,g[3]=f,g[7]=p,g[11]=d,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Tt).fromArray(this.elements)}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}copyPosition(t){const e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,r=t.elements,n=1/kt.setFromMatrixColumn(t,0).length(),i=1/kt.setFromMatrixColumn(t,1).length(),s=1/kt.setFromMatrixColumn(t,2).length();return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=0,e[4]=r[4]*i,e[5]=r[5]*i,e[6]=r[6]*i,e[7]=0,e[8]=r[8]*s,e[9]=r[9]*s,e[10]=r[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,r=t.x,n=t.y,i=t.z,s=Math.cos(r),o=Math.sin(r),a=Math.cos(n),h=Math.sin(n),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){const t=s*u,r=s*c,n=o*u,i=o*c;e[0]=a*u,e[4]=-a*c,e[8]=h,e[1]=r+n*h,e[5]=t-i*h,e[9]=-o*a,e[2]=i-t*h,e[6]=n+r*h,e[10]=s*a}else if("YXZ"===t.order){const t=a*u,r=a*c,n=h*u,i=h*c;e[0]=t+i*o,e[4]=n*o-r,e[8]=s*h,e[1]=s*c,e[5]=s*u,e[9]=-o,e[2]=r*o-n,e[6]=i+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*u,r=a*c,n=h*u,i=h*c;e[0]=t-i*o,e[4]=-s*c,e[8]=n+r*o,e[1]=r+n*o,e[5]=s*u,e[9]=i-t*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*u,r=s*c,n=o*u,i=o*c;e[0]=a*u,e[4]=n*h-r,e[8]=t*h+i,e[1]=a*c,e[5]=i*h+t,e[9]=r*h-n,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,r=s*h,n=o*a,i=o*h;e[0]=a*u,e[4]=i-t*c,e[8]=n*c+r,e[1]=c,e[5]=s*u,e[9]=-o*u,e[2]=-h*u,e[6]=r*c+n,e[10]=t-i*c}else if("XZY"===t.order){const t=s*a,r=s*h,n=o*a,i=o*h;e[0]=a*u,e[4]=-c,e[8]=h*u,e[1]=t*c+i,e[5]=s*u,e[9]=r*c-n,e[2]=n*c-r,e[6]=o*u,e[10]=i*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Et,t,Bt)}lookAt(t,e,r){const n=this.elements;return Lt.subVectors(t,e),0===Lt.lengthSq()&&(Lt.z=1),Lt.normalize(),Rt.crossVectors(r,Lt),0===Rt.lengthSq()&&(1===Math.abs(r.z)?Lt.x+=1e-4:Lt.z+=1e-4,Lt.normalize(),Rt.crossVectors(r,Lt)),Rt.normalize(),Pt.crossVectors(Lt,Rt),n[0]=Rt.x,n[4]=Pt.x,n[8]=Lt.x,n[1]=Rt.y,n[5]=Pt.y,n[9]=Lt.y,n[2]=Rt.z,n[6]=Pt.z,n[10]=Lt.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,n=e.elements,i=this.elements,s=r[0],o=r[4],a=r[8],h=r[12],u=r[1],c=r[5],l=r[9],f=r[13],p=r[2],d=r[6],m=r[10],g=r[14],y=r[3],v=r[7],x=r[11],b=r[15],_=n[0],w=n[4],M=n[8],A=n[12],S=n[1],C=n[5],z=n[9],T=n[13],k=n[2],O=n[6],E=n[10],B=n[14],R=n[3],P=n[7],L=n[11],I=n[15];return i[0]=s*_+o*S+a*k+h*R,i[4]=s*w+o*C+a*O+h*P,i[8]=s*M+o*z+a*E+h*L,i[12]=s*A+o*T+a*B+h*I,i[1]=u*_+c*S+l*k+f*R,i[5]=u*w+c*C+l*O+f*P,i[9]=u*M+c*z+l*E+f*L,i[13]=u*A+c*T+l*B+f*I,i[2]=p*_+d*S+m*k+g*R,i[6]=p*w+d*C+m*O+g*P,i[10]=p*M+d*z+m*E+g*L,i[14]=p*A+d*T+m*B+g*I,i[3]=y*_+v*S+x*k+b*R,i[7]=y*w+v*C+x*O+b*P,i[11]=y*M+v*z+x*E+b*L,i[15]=y*A+v*T+x*B+b*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[4],n=t[8],i=t[12],s=t[1],o=t[5],a=t[9],h=t[13],u=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+i*a*c-n*h*c-i*o*l+r*h*l+n*o*f-r*a*f)+t[7]*(+e*a*f-e*h*l+i*s*l-n*s*f+n*h*u-i*a*u)+t[11]*(+e*h*c-e*o*f-i*s*c+r*s*f+i*o*u-r*h*u)+t[15]*(-n*o*u-e*a*c+e*o*l+n*s*c-r*s*l+r*a*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,r){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=r),this}invert(){const t=this.elements,e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],o=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],m=t[14],g=t[15],y=c*m*h-d*l*h+d*a*f-o*m*f-c*a*g+o*l*g,v=p*l*h-u*m*h-p*a*f+s*m*f+u*a*g-s*l*g,x=u*d*h-p*c*h+p*o*f-s*d*f-u*o*g+s*c*g,b=p*c*a-u*d*a-p*o*l+s*d*l+u*o*m-s*c*m,_=e*y+r*v+n*x+i*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return t[0]=y*w,t[1]=(d*l*i-c*m*i-d*n*f+r*m*f+c*n*g-r*l*g)*w,t[2]=(o*m*i-d*a*i+d*n*h-r*m*h-o*n*g+r*a*g)*w,t[3]=(c*a*i-o*l*i-c*n*h+r*l*h+o*n*f-r*a*f)*w,t[4]=v*w,t[5]=(u*m*i-p*l*i+p*n*f-e*m*f-u*n*g+e*l*g)*w,t[6]=(p*a*i-s*m*i-p*n*h+e*m*h+s*n*g-e*a*g)*w,t[7]=(s*l*i-u*a*i+u*n*h-e*l*h-s*n*f+e*a*f)*w,t[8]=x*w,t[9]=(p*c*i-u*d*i-p*r*f+e*d*f+u*r*g-e*c*g)*w,t[10]=(s*d*i-p*o*i+p*r*h-e*d*h-s*r*g+e*o*g)*w,t[11]=(u*o*i-s*c*i-u*r*h+e*c*h+s*r*f-e*o*f)*w,t[12]=b*w,t[13]=(u*d*n-p*c*n+p*r*l-e*d*l-u*r*m+e*c*m)*w,t[14]=(p*o*n-s*d*n-p*r*a+e*d*a+s*r*m-e*o*m)*w,t[15]=(s*c*n-u*o*n+u*r*a-e*c*a-s*r*l+e*o*l)*w,this}scale(t){const e=this.elements,r=t.x,n=t.y,i=t.z;return e[0]*=r,e[4]*=n,e[8]*=i,e[1]*=r,e[5]*=n,e[9]*=i,e[2]*=r,e[6]*=n,e[10]*=i,e[3]*=r,e[7]*=n,e[11]*=i,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,n))}makeTranslation(t,e,r){return this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const r=Math.cos(e),n=Math.sin(e),i=1-r,s=t.x,o=t.y,a=t.z,h=i*s,u=i*o;return this.set(h*s+r,h*o-n*a,h*a+n*o,0,h*o+n*a,u*o+r,u*a-n*s,0,h*a-n*o,u*a+n*s,i*a*a+r,0,0,0,0,1),this}makeScale(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,e,r,n,i,s){return this.set(1,r,i,0,t,1,s,0,e,n,1,0,0,0,0,1),this}compose(t,e,r){const n=this.elements,i=e._x,s=e._y,o=e._z,a=e._w,h=i+i,u=s+s,c=o+o,l=i*h,f=i*u,p=i*c,d=s*u,m=s*c,g=o*c,y=a*h,v=a*u,x=a*c,b=r.x,_=r.y,w=r.z;return n[0]=(1-(d+g))*b,n[1]=(f+x)*b,n[2]=(p-v)*b,n[3]=0,n[4]=(f-x)*_,n[5]=(1-(l+g))*_,n[6]=(m+y)*_,n[7]=0,n[8]=(p+v)*w,n[9]=(m-y)*w,n[10]=(1-(l+d))*w,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,r){const n=this.elements;let i=kt.set(n[0],n[1],n[2]).length();const s=kt.set(n[4],n[5],n[6]).length(),o=kt.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),t.x=n[12],t.y=n[13],t.z=n[14],Ot.copy(this);const a=1/i,h=1/s,u=1/o;return Ot.elements[0]*=a,Ot.elements[1]*=a,Ot.elements[2]*=a,Ot.elements[4]*=h,Ot.elements[5]*=h,Ot.elements[6]*=h,Ot.elements[8]*=u,Ot.elements[9]*=u,Ot.elements[10]*=u,e.setFromRotationMatrix(Ot),r.x=i,r.y=s,r.z=o,this}makePerspective(t,e,r,n,i,s){const o=this.elements,a=2*i/(e-t),h=2*i/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-(s+i)/(s-i),f=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=h,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=l,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(t,e,r,n,i,s){const o=this.elements,a=1/(e-t),h=1/(r-n),u=1/(s-i),c=(e+t)*a,l=(r+n)*h,f=(s+i)*u;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*h,o[9]=0,o[13]=-l,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(t){const e=this.elements,r=t.elements;for(let t=0;t<16;t++)if(e[t]!==r[t])return!1;return!0}fromArray(t,e=0){for(let r=0;r<16;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}const kt=new K,Ot=new Tt,Et=new K(0,0,0),Bt=new K(1,1,1),Rt=new K,Pt=new K,Lt=new K,It=new Tt,Nt=new Q;class Ft{constructor(t=0,e=0,r=0,n=Ft.DefaultOrder){this.isEuler=!0,this._x=t,this._y=e,this._z=r,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,r,n=this._order){return this._x=t,this._y=e,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,r=!0){const n=t.elements,i=n[0],s=n[4],o=n[8],a=n[1],h=n[5],u=n[9],c=n[2],l=n[6],f=n[10];switch(e){case"XYZ":this._y=Math.asin(z(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(l,h),this._z=0);break;case"YXZ":this._x=Math.asin(-z(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(a,h)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(z(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-s,h)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-z(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(l,f),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,h));break;case"YZX":this._z=Math.asin(z(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-z(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(l,h),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,e,r){return It.makeRotationFromQuaternion(t),this.setFromRotationMatrix(It,e,r)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Nt.setFromEuler(this),this.setFromQuaternion(Nt,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Ft.DefaultOrder="XYZ",Ft.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Vt{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let jt=0;const Ut=new K,Wt=new Q,Dt=new Tt,qt=new K,Jt=new K,Gt=new K,Zt=new Q,Ht=new K(1,0,0),Xt=new K(0,1,0),Yt=new K(0,0,1),$t={type:"added"},Qt={type:"removed"};class Kt extends A{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jt++}),this.uuid=C(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kt.DefaultUp.clone();const t=new K,e=new Ft,r=new Q,n=new K(1,1,1);e._onChange((function(){r.setFromEuler(e,!1)})),r._onChange((function(){e.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Tt},normalMatrix:{value:new B}}),this.matrix=new Tt,this.matrixWorld=new Tt,this.matrixAutoUpdate=Kt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Kt.DefaultMatrixWorldAutoUpdate,this.layers=new Vt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Wt.setFromAxisAngle(t,e),this.quaternion.multiply(Wt),this}rotateOnWorldAxis(t,e){return Wt.setFromAxisAngle(t,e),this.quaternion.premultiply(Wt),this}rotateX(t){return this.rotateOnAxis(Ht,t)}rotateY(t){return this.rotateOnAxis(Xt,t)}rotateZ(t){return this.rotateOnAxis(Yt,t)}translateOnAxis(t,e){return Ut.copy(t).applyQuaternion(this.quaternion),this.position.add(Ut.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ht,t)}translateY(t){return this.translateOnAxis(Xt,t)}translateZ(t){return this.translateOnAxis(Yt,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Dt.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?qt.copy(t):qt.set(t,e,r);const n=this.parent;this.updateWorldMatrix(!0,!1),Jt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dt.lookAt(Jt,qt,this.up):Dt.lookAt(qt,Jt,this.up),this.quaternion.setFromRotationMatrix(Dt),n&&(Dt.extractRotation(n.matrixWorld),Wt.setFromRotationMatrix(Dt),this.quaternion.premultiply(Wt.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent($t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Qt)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Qt)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Dt.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Dt.multiply(t.parent.matrixWorld)),t.applyMatrix4(Dt),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,n=this.children.length;r<n;r++){const n=this.children[r].getObjectByProperty(t,e);if(void 0!==n)return n}}getObjectsByProperty(t,e){let r=[];this[t]===e&&r.push(this);for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectsByProperty(t,e);i.length>0&&(r=r.concat(i))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jt,t,Gt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jt,Zt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,n=e.length;r<n;r++)e[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let r=0,n=e.length;r<n;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,n=e.length;r<n;r++){const n=e[r];!0!==n.matrixWorldAutoUpdate&&!0!==t||n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,r=t.length;e<r;e++){const r=t[e];!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function i(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=i(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const r=e.shapes;if(Array.isArray(r))for(let e=0,n=r.length;e<n;e++){const n=r[e];i(t.shapes,n)}else i(t.shapes,r)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let r=0,n=this.material.length;r<n;r++)e.push(i(t.materials,this.material[r]));n.material=e}else n.material=i(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){const r=this.animations[e];n.animations.push(i(t.animations,r))}}if(e){const e=s(t.geometries),n=s(t.materials),i=s(t.textures),o=s(t.images),a=s(t.shapes),h=s(t.skeletons),u=s(t.animations),c=s(t.nodes);e.length>0&&(r.geometries=e),n.length>0&&(r.materials=n),i.length>0&&(r.textures=i),o.length>0&&(r.images=o),a.length>0&&(r.shapes=a),h.length>0&&(r.skeletons=h),u.length>0&&(r.animations=u),c.length>0&&(r.nodes=c)}return r.object=n,r;function s(t){const e=[];for(const r in t){const n=t[r];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const r=t.children[e];this.add(r.clone())}return this}}Kt.DefaultUp=new K(0,1,0),Kt.DefaultMatrixAutoUpdate=!0,Kt.DefaultMatrixWorldAutoUpdate=!0;const te=new K,ee=new K,re=new K,ne=new K,ie=new K,se=new K,oe=new K,ae=new K,he=new K,ue=new K;class ce{constructor(t=new K,e=new K,r=new K){this.a=t,this.b=e,this.c=r}static getNormal(t,e,r,n){n.subVectors(r,e),te.subVectors(t,e),n.cross(te);const i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)}static getBarycoord(t,e,r,n,i){te.subVectors(n,e),ee.subVectors(r,e),re.subVectors(t,e);const s=te.dot(te),o=te.dot(ee),a=te.dot(re),h=ee.dot(ee),u=ee.dot(re),c=s*h-o*o;if(0===c)return i.set(-2,-1,-1);const l=1/c,f=(h*a-o*u)*l,p=(s*u-o*a)*l;return i.set(1-f-p,p,f)}static containsPoint(t,e,r,n){return this.getBarycoord(t,e,r,n,ne),ne.x>=0&&ne.y>=0&&ne.x+ne.y<=1}static getUV(t,e,r,n,i,s,o,a){return this.getBarycoord(t,e,r,n,ne),a.set(0,0),a.addScaledVector(i,ne.x),a.addScaledVector(s,ne.y),a.addScaledVector(o,ne.z),a}static isFrontFacing(t,e,r,n){return te.subVectors(r,e),ee.subVectors(t,e),te.cross(ee).dot(n)<0}set(t,e,r){return this.a.copy(t),this.b.copy(e),this.c.copy(r),this}setFromPointsAndIndices(t,e,r,n){return this.a.copy(t[e]),this.b.copy(t[r]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,r,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return te.subVectors(this.c,this.b),ee.subVectors(this.a,this.b),.5*te.cross(ee).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ce.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ce.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,r,n,i){return ce.getUV(t,this.a,this.b,this.c,e,r,n,i)}containsPoint(t){return ce.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ce.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const r=this.a,n=this.b,i=this.c;let s,o;ie.subVectors(n,r),se.subVectors(i,r),ae.subVectors(t,r);const a=ie.dot(ae),h=se.dot(ae);if(a<=0&&h<=0)return e.copy(r);he.subVectors(t,n);const u=ie.dot(he),c=se.dot(he);if(u>=0&&c<=u)return e.copy(n);const l=a*c-u*h;if(l<=0&&a>=0&&u<=0)return s=a/(a-u),e.copy(r).addScaledVector(ie,s);ue.subVectors(t,i);const f=ie.dot(ue),p=se.dot(ue);if(p>=0&&f<=p)return e.copy(i);const d=f*h-a*p;if(d<=0&&h>=0&&p<=0)return o=h/(h-p),e.copy(r).addScaledVector(se,o);const m=u*p-f*c;if(m<=0&&c-u>=0&&f-p>=0)return oe.subVectors(i,n),o=(c-u)/(c-u+(f-p)),e.copy(n).addScaledVector(oe,o);const g=1/(m+d+l);return s=d*g,o=l*g,e.copy(r).addScaledVector(ie,s).addScaledVector(se,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let le=0;class fe extends A{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:le++}),this.uuid=C(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=M,this.stencilZFail=M,this.stencilZPass=M,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const r=t[e];if(void 0===r){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=r:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const r in t){const n=t[r];delete n.metadata,e.push(n)}return e}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),e){const e=n(t.textures),i=n(t.images);e.length>0&&(r.textures=e),i.length>0&&(r.images=i)}return r}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let r=null;if(null!==e){const t=e.length;r=new Array(t);for(let n=0;n!==t;++n)r[n]=e[n].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class pe extends fe{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new J(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const de=new K,me=new E;class ge{constructor(t,e,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=r,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let n=0,i=this.itemSize;n<i;n++)this.array[t+n]=e.array[r+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,r=this.count;e<r;e++)me.fromBufferAttribute(this,e),me.applyMatrix3(t),this.setXY(e,me.x,me.y);else if(3===this.itemSize)for(let e=0,r=this.count;e<r;e++)de.fromBufferAttribute(this,e),de.applyMatrix3(t),this.setXYZ(e,de.x,de.y,de.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)de.fromBufferAttribute(this,e),de.applyMatrix4(t),this.setXYZ(e,de.x,de.y,de.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)de.fromBufferAttribute(this,e),de.applyNormalMatrix(t),this.setXYZ(e,de.x,de.y,de.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)de.fromBufferAttribute(this,e),de.transformDirection(t),this.setXYZ(e,de.x,de.y,de.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=k(e,this.array)),e}setX(t,e){return this.normalized&&(e=O(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=k(e,this.array)),e}setY(t,e){return this.normalized&&(e=O(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=k(e,this.array)),e}setZ(t,e){return this.normalized&&(e=O(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=k(e,this.array)),e}setW(t,e){return this.normalized&&(e=O(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.normalized&&(e=O(e,this.array),r=O(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,n){return t*=this.itemSize,this.normalized&&(e=O(e,this.array),r=O(r,this.array),n=O(n,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this}setXYZW(t,e,r,n,i){return t*=this.itemSize,this.normalized&&(e=O(e,this.array),r=O(r,this.array),n=O(n,this.array),i=O(i,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=n,this.array[t+3]=i,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class ye extends ge{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class ve extends ge{constructor(t,e,r){super(new Uint32Array(t),e,r)}}class xe extends ge{constructor(t,e,r){super(new Float32Array(t),e,r)}}let be=0;const _e=new Tt,we=new Kt,Me=new K,Ae=new rt,Se=new rt,Ce=new K;class ze extends A{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:be++}),this.uuid=C(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(function(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}(t)?ve:ye)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const e=(new B).getNormalMatrix(t);r.applyNormalMatrix(e),r.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return _e.makeRotationFromQuaternion(t),this.applyMatrix4(_e),this}rotateX(t){return _e.makeRotationX(t),this.applyMatrix4(_e),this}rotateY(t){return _e.makeRotationY(t),this.applyMatrix4(_e),this}rotateZ(t){return _e.makeRotationZ(t),this.applyMatrix4(_e),this}translate(t,e,r){return _e.makeTranslation(t,e,r),this.applyMatrix4(_e),this}scale(t,e,r){return _e.makeScale(t,e,r),this.applyMatrix4(_e),this}lookAt(t){return we.lookAt(t),we.updateMatrix(),this.applyMatrix4(we.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Me).negate(),this.translate(Me.x,Me.y,Me.z),this}setFromPoints(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=t[r];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new xe(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new rt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];Ae.setFromBufferAttribute(r),this.morphTargetsRelative?(Ce.addVectors(this.boundingBox.min,Ae.min),this.boundingBox.expandByPoint(Ce),Ce.addVectors(this.boundingBox.max,Ae.max),this.boundingBox.expandByPoint(Ce)):(this.boundingBox.expandByPoint(Ae.min),this.boundingBox.expandByPoint(Ae.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new bt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new K,1/0);if(t){const r=this.boundingSphere.center;if(Ae.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];Se.setFromBufferAttribute(r),this.morphTargetsRelative?(Ce.addVectors(Ae.min,Se.min),Ae.expandByPoint(Ce),Ce.addVectors(Ae.max,Se.max),Ae.expandByPoint(Ce)):(Ae.expandByPoint(Se.min),Ae.expandByPoint(Se.max))}Ae.getCenter(r);let n=0;for(let e=0,i=t.count;e<i;e++)Ce.fromBufferAttribute(t,e),n=Math.max(n,r.distanceToSquared(Ce));if(e)for(let i=0,s=e.length;i<s;i++){const s=e[i],o=this.morphTargetsRelative;for(let e=0,i=s.count;e<i;e++)Ce.fromBufferAttribute(s,e),o&&(Me.fromBufferAttribute(t,e),Ce.add(Me)),n=Math.max(n,r.distanceToSquared(Ce))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=t.array,n=e.position.array,i=e.normal.array,s=e.uv.array,o=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ge(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,h=[],u=[];for(let t=0;t<o;t++)h[t]=new K,u[t]=new K;const c=new K,l=new K,f=new K,p=new E,d=new E,m=new E,g=new K,y=new K;function v(t,e,r){c.fromArray(n,3*t),l.fromArray(n,3*e),f.fromArray(n,3*r),p.fromArray(s,2*t),d.fromArray(s,2*e),m.fromArray(s,2*r),l.sub(c),f.sub(c),d.sub(p),m.sub(p);const i=1/(d.x*m.y-m.x*d.y);isFinite(i)&&(g.copy(l).multiplyScalar(m.y).addScaledVector(f,-d.y).multiplyScalar(i),y.copy(f).multiplyScalar(d.x).addScaledVector(l,-m.x).multiplyScalar(i),h[t].add(g),h[e].add(g),h[r].add(g),u[t].add(y),u[e].add(y),u[r].add(y))}let x=this.groups;0===x.length&&(x=[{start:0,count:r.length}]);for(let t=0,e=x.length;t<e;++t){const e=x[t],n=e.start;for(let t=n,i=n+e.count;t<i;t+=3)v(r[t+0],r[t+1],r[t+2])}const b=new K,_=new K,w=new K,M=new K;function A(t){w.fromArray(i,3*t),M.copy(w);const e=h[t];b.copy(e),b.sub(w.multiplyScalar(w.dot(e))).normalize(),_.crossVectors(M,e);const r=_.dot(u[t])<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=r}for(let t=0,e=x.length;t<e;++t){const e=x[t],n=e.start;for(let t=n,i=n+e.count;t<i;t+=3)A(r[t+0]),A(r[t+1]),A(r[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let r=this.getAttribute("normal");if(void 0===r)r=new ge(new Float32Array(3*e.count),3),this.setAttribute("normal",r);else for(let t=0,e=r.count;t<e;t++)r.setXYZ(t,0,0,0);const n=new K,i=new K,s=new K,o=new K,a=new K,h=new K,u=new K,c=new K;if(t)for(let l=0,f=t.count;l<f;l+=3){const f=t.getX(l+0),p=t.getX(l+1),d=t.getX(l+2);n.fromBufferAttribute(e,f),i.fromBufferAttribute(e,p),s.fromBufferAttribute(e,d),u.subVectors(s,i),c.subVectors(n,i),u.cross(c),o.fromBufferAttribute(r,f),a.fromBufferAttribute(r,p),h.fromBufferAttribute(r,d),o.add(u),a.add(u),h.add(u),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(d,h.x,h.y,h.z)}else for(let t=0,o=e.count;t<o;t+=3)n.fromBufferAttribute(e,t+0),i.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),u.subVectors(s,i),c.subVectors(n,i),u.cross(c),r.setXYZ(t+0,u.x,u.y,u.z),r.setXYZ(t+1,u.x,u.y,u.z),r.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)Ce.fromBufferAttribute(t,e),Ce.normalize(),t.setXYZ(e,Ce.x,Ce.y,Ce.z)}toNonIndexed(){function t(t,e){const r=t.array,n=t.itemSize,i=t.normalized,s=new r.constructor(e.length*n);let o=0,a=0;for(let i=0,h=e.length;i<h;i++){o=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*n;for(let t=0;t<n;t++)s[a++]=r[o++]}return new ge(s,n,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ze,r=this.index.array,n=this.attributes;for(const i in n){const s=t(n[i],r);e.setAttribute(i,s)}const i=this.morphAttributes;for(const n in i){const s=[],o=i[n];for(let e=0,n=o.length;e<n;e++){const n=t(o[e],r);s.push(n)}e.morphAttributes[n]=s}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let t=0,r=s.length;t<r;t++){const r=s[t];e.addGroup(r.start,r.count,r.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const e in r){const n=r[e];t.data.attributes[e]=n.toJSON(t.data)}const n={};let i=!1;for(const e in this.morphAttributes){const r=this.morphAttributes[e],s=[];for(let e=0,n=r.length;e<n;e++){const n=r[e];s.push(n.toJSON(t.data))}s.length>0&&(n[e]=s,i=!0)}i&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;null!==r&&this.setIndex(r.clone(e));const n=t.attributes;for(const t in n){const r=n[t];this.setAttribute(t,r.clone(e))}const i=t.morphAttributes;for(const t in i){const r=[],n=i[t];for(let t=0,i=n.length;t<i;t++)r.push(n[t].clone(e));this.morphAttributes[t]=r}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Te=new Tt,ke=new class{constructor(t=new K,e=new K(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_t)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const r=e.dot(this.direction);return r<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=_t.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(_t.copy(this.direction).multiplyScalar(e).add(this.origin),_t.distanceToSquared(t))}distanceSqToSegment(t,e,r,n){wt.copy(t).add(e).multiplyScalar(.5),Mt.copy(e).sub(t).normalize(),At.copy(this.origin).sub(wt);const i=.5*t.distanceTo(e),s=-this.direction.dot(Mt),o=At.dot(this.direction),a=-At.dot(Mt),h=At.lengthSq(),u=Math.abs(1-s*s);let c,l,f,p;if(u>0)if(c=s*a-o,l=s*o-a,p=i*u,c>=0)if(l>=-p)if(l<=p){const t=1/u;c*=t,l*=t,f=c*(c+s*l+2*o)+l*(s*c+l+2*a)+h}else l=i,c=Math.max(0,-(s*l+o)),f=-c*c+l*(l+2*a)+h;else l=-i,c=Math.max(0,-(s*l+o)),f=-c*c+l*(l+2*a)+h;else l<=-p?(c=Math.max(0,-(-s*i+o)),l=c>0?-i:Math.min(Math.max(-i,-a),i),f=-c*c+l*(l+2*a)+h):l<=p?(c=0,l=Math.min(Math.max(-i,-a),i),f=l*(l+2*a)+h):(c=Math.max(0,-(s*i+o)),l=c>0?i:Math.min(Math.max(-i,-a),i),f=-c*c+l*(l+2*a)+h);else l=s>0?-i:i,c=Math.max(0,-(s*l+o)),f=-c*c+l*(l+2*a)+h;return r&&r.copy(this.direction).multiplyScalar(c).add(this.origin),n&&n.copy(Mt).multiplyScalar(l).add(wt),f}intersectSphere(t,e){_t.subVectors(t.center,this.origin);const r=_t.dot(this.direction),n=_t.dot(_t)-r*r,i=t.radius*t.radius;if(n>i)return null;const s=Math.sqrt(i-n),o=r-s,a=r+s;return o<0&&a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/e;return r>=0?r:null}intersectPlane(t,e){const r=this.distanceToPlane(t);return null===r?null:this.at(r,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let r,n,i,s,o,a;const h=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,l=this.origin;return h>=0?(r=(t.min.x-l.x)*h,n=(t.max.x-l.x)*h):(r=(t.max.x-l.x)*h,n=(t.min.x-l.x)*h),u>=0?(i=(t.min.y-l.y)*u,s=(t.max.y-l.y)*u):(i=(t.max.y-l.y)*u,s=(t.min.y-l.y)*u),r>s||i>n?null:((i>r||isNaN(r))&&(r=i),(s<n||isNaN(n))&&(n=s),c>=0?(o=(t.min.z-l.z)*c,a=(t.max.z-l.z)*c):(o=(t.max.z-l.z)*c,a=(t.min.z-l.z)*c),r>a||o>n?null:((o>r||r!=r)&&(r=o),(a<n||n!=n)&&(n=a),n<0?null:this.at(r>=0?r:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,_t)}intersectTriangle(t,e,r,n,i){St.subVectors(e,t),Ct.subVectors(r,t),zt.crossVectors(St,Ct);let s,o=this.direction.dot(zt);if(o>0){if(n)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}At.subVectors(this.origin,t);const a=s*this.direction.dot(Ct.crossVectors(At,Ct));if(a<0)return null;const h=s*this.direction.dot(St.cross(At));if(h<0)return null;if(a+h>o)return null;const u=-s*At.dot(zt);return u<0?null:this.at(u/o,i)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},Oe=new bt,Ee=new K,Be=new K,Re=new K,Pe=new K,Le=new K,Ie=new E,Ne=new E,Fe=new E,Ve=new K,je=new K;class Ue extends Kt{constructor(t=new ze,e=new pe){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const r=t[e[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=r.length;t<e;t++){const e=r[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const r=this.geometry,n=r.attributes.position,i=r.morphAttributes.position,s=r.morphTargetsRelative;e.fromBufferAttribute(n,t);const o=this.morphTargetInfluences;if(i&&o){Le.set(0,0,0);for(let r=0,n=i.length;r<n;r++){const n=o[r],a=i[r];0!==n&&(Pe.fromBufferAttribute(a,t),s?Le.addScaledVector(Pe,n):Le.addScaledVector(Pe.sub(e),n))}e.add(Le)}return this.isSkinnedMesh&&this.boneTransform(t,e),e}raycast(t,e){const r=this.geometry,n=this.material,i=this.matrixWorld;if(void 0===n)return;if(null===r.boundingSphere&&r.computeBoundingSphere(),Oe.copy(r.boundingSphere),Oe.applyMatrix4(i),!1===t.ray.intersectsSphere(Oe))return;if(Te.copy(i).invert(),ke.copy(t.ray).applyMatrix4(Te),null!==r.boundingBox&&!1===ke.intersectsBox(r.boundingBox))return;let s;const o=r.index,a=r.attributes.position,h=r.attributes.uv,u=r.attributes.uv2,c=r.groups,l=r.drawRange;if(null!==o)if(Array.isArray(n))for(let r=0,i=c.length;r<i;r++){const i=c[r],a=n[i.materialIndex];for(let r=Math.max(i.start,l.start),n=Math.min(o.count,Math.min(i.start+i.count,l.start+l.count));r<n;r+=3){const n=o.getX(r),c=o.getX(r+1),l=o.getX(r+2);s=We(this,a,t,ke,h,u,n,c,l),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=i.materialIndex,e.push(s))}}else for(let r=Math.max(0,l.start),i=Math.min(o.count,l.start+l.count);r<i;r+=3){const i=o.getX(r),a=o.getX(r+1),c=o.getX(r+2);s=We(this,n,t,ke,h,u,i,a,c),s&&(s.faceIndex=Math.floor(r/3),e.push(s))}else if(void 0!==a)if(Array.isArray(n))for(let r=0,i=c.length;r<i;r++){const i=c[r],o=n[i.materialIndex];for(let r=Math.max(i.start,l.start),n=Math.min(a.count,Math.min(i.start+i.count,l.start+l.count));r<n;r+=3)s=We(this,o,t,ke,h,u,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),s.face.materialIndex=i.materialIndex,e.push(s))}else for(let r=Math.max(0,l.start),i=Math.min(a.count,l.start+l.count);r<i;r+=3)s=We(this,n,t,ke,h,u,r,r+1,r+2),s&&(s.faceIndex=Math.floor(r/3),e.push(s))}}function We(t,e,r,n,i,s,o,a,h){t.getVertexPosition(o,Ee),t.getVertexPosition(a,Be),t.getVertexPosition(h,Re);const u=function(t,e,r,n,i,s,o,a){let h;if(h=1===e.side?n.intersectTriangle(o,s,i,!0,a):n.intersectTriangle(i,s,o,0===e.side,a),null===h)return null;je.copy(a),je.applyMatrix4(t.matrixWorld);const u=r.ray.origin.distanceTo(je);return u<r.near||u>r.far?null:{distance:u,point:je.clone(),object:t}}(t,e,r,n,Ee,Be,Re,Ve);if(u){i&&(Ie.fromBufferAttribute(i,o),Ne.fromBufferAttribute(i,a),Fe.fromBufferAttribute(i,h),u.uv=ce.getUV(Ve,Ee,Be,Re,Ie,Ne,Fe,new E)),s&&(Ie.fromBufferAttribute(s,o),Ne.fromBufferAttribute(s,a),Fe.fromBufferAttribute(s,h),u.uv2=ce.getUV(Ve,Ee,Be,Re,Ie,Ne,Fe,new E));const t={a:o,b:a,c:h,normal:new K,materialIndex:0};ce.getNormal(Ee,Be,Re,t.normal),u.face=t}return u}class De extends ze{constructor(t=1,e=1,r=1,n=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:n,heightSegments:i,depthSegments:s};const o=this;n=Math.floor(n),i=Math.floor(i),s=Math.floor(s);const a=[],h=[],u=[],c=[];let l=0,f=0;function p(t,e,r,n,i,s,p,d,m,g,y){const v=s/m,x=p/g,b=s/2,_=p/2,w=d/2,M=m+1,A=g+1;let S=0,C=0;const z=new K;for(let s=0;s<A;s++){const o=s*x-_;for(let a=0;a<M;a++){const l=a*v-b;z[t]=l*n,z[e]=o*i,z[r]=w,h.push(z.x,z.y,z.z),z[t]=0,z[e]=0,z[r]=d>0?1:-1,u.push(z.x,z.y,z.z),c.push(a/m),c.push(1-s/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const r=l+e+M*t,n=l+e+M*(t+1),i=l+(e+1)+M*(t+1),s=l+(e+1)+M*t;a.push(r,n,s),a.push(n,i,s),C+=6}o.addGroup(f,C,y),f+=C,l+=S}p("z","y","x",-1,-1,r,e,t,s,i,0),p("z","y","x",1,-1,r,e,-t,s,i,1),p("x","z","y",1,1,t,r,e,n,s,2),p("x","z","y",1,-1,t,r,-e,n,s,3),p("x","y","z",1,-1,t,e,r,n,i,4),p("x","y","z",-1,-1,t,e,-r,n,i,5),this.setIndex(a),this.setAttribute("position",new xe(h,3)),this.setAttribute("normal",new xe(u,3)),this.setAttribute("uv",new xe(c,2))}static fromJSON(t){return new De(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}class qe extends fe{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=function(t){const e={};for(const r in t){e[r]={};for(const n in t[r]){const i=t[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[r][n]=i.clone():Array.isArray(i)?e[r][n]=i.slice():e[r][n]=i}}return e}(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?e.uniforms[r]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[r]={type:"m4",value:n.toArray()}:e.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const r={};for(const t in this.extensions)!0===this.extensions[t]&&(r[t]=!0);return Object.keys(r).length>0&&(e.extensions=r),e}}class Je extends Kt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Ge{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const r=this.getUtoTmapping(t);return this.getPoint(r,e)}getPoints(t=5){const e=[];for(let r=0;r<=t;r++)e.push(this.getPoint(r/t));return e}getSpacedPoints(t=5){const e=[];for(let r=0;r<=t;r++)e.push(this.getPointAt(r/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let r,n=this.getPoint(0),i=0;e.push(0);for(let s=1;s<=t;s++)r=this.getPoint(s/t),i+=r.distanceTo(n),e.push(i),n=r;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const r=this.getLengths();let n=0;const i=r.length;let s;s=e||t*r[i-1];let o,a=0,h=i-1;for(;a<=h;)if(n=Math.floor(a+(h-a)/2),o=r[n]-s,o<0)a=n+1;else{if(!(o>0)){h=n;break}h=n-1}if(n=h,r[n]===s)return n/(i-1);const u=r[n];return(n+(s-u)/(r[n+1]-u))/(i-1)}getTangent(t,e){const r=1e-4;let n=t-r,i=t+r;n<0&&(n=0),i>1&&(i=1);const s=this.getPoint(n),o=this.getPoint(i),a=e||(s.isVector2?new E:new K);return a.copy(o).sub(s).normalize(),a}getTangentAt(t,e){const r=this.getUtoTmapping(t);return this.getTangent(r,e)}computeFrenetFrames(t,e){const r=new K,n=[],i=[],s=[],o=new K,a=new Tt;for(let e=0;e<=t;e++){const r=e/t;n[e]=this.getTangentAt(r,new K)}i[0]=new K,s[0]=new K;let h=Number.MAX_VALUE;const u=Math.abs(n[0].x),c=Math.abs(n[0].y),l=Math.abs(n[0].z);u<=h&&(h=u,r.set(1,0,0)),c<=h&&(h=c,r.set(0,1,0)),l<=h&&r.set(0,0,1),o.crossVectors(n[0],r).normalize(),i[0].crossVectors(n[0],o),s[0].crossVectors(n[0],i[0]);for(let e=1;e<=t;e++){if(i[e]=i[e-1].clone(),s[e]=s[e-1].clone(),o.crossVectors(n[e-1],n[e]),o.length()>Number.EPSILON){o.normalize();const t=Math.acos(z(n[e-1].dot(n[e]),-1,1));i[e].applyMatrix4(a.makeRotationAxis(o,t))}s[e].crossVectors(n[e],i[e])}if(!0===e){let e=Math.acos(z(i[0].dot(i[t]),-1,1));e/=t,n[0].dot(o.crossVectors(i[0],i[t]))>0&&(e=-e);for(let r=1;r<=t;r++)i[r].applyMatrix4(a.makeRotationAxis(n[r],e*r)),s[r].crossVectors(n[r],i[r])}return{tangents:n,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Ze extends Ge{constructor(t=0,e=0,r=1,n=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(t,e){const r=e||new E,n=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=s?0:n),!0!==this.aClockwise||s||(i===n?i=-n:i-=n);const o=this.aStartAngle+t*i;let a=this.aX+this.xRadius*Math.cos(o),h=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),r=a-this.aX,n=h-this.aY;a=r*t-n*e+this.aX,h=r*e+n*t+this.aY}return r.set(a,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function He(){let t=0,e=0,r=0,n=0;function i(i,s,o,a){t=i,e=o,r=-3*i+3*s-2*o-a,n=2*i-2*s+o+a}return{initCatmullRom:function(t,e,r,n,s){i(e,r,s*(r-t),s*(n-e))},initNonuniformCatmullRom:function(t,e,r,n,s,o,a){let h=(e-t)/s-(r-t)/(s+o)+(r-e)/o,u=(r-e)/o-(n-e)/(o+a)+(n-r)/a;h*=o,u*=o,i(e,r,h,u)},calc:function(i){const s=i*i;return t+e*i+r*s+n*(s*i)}}}const Xe=new K,Ye=new He,$e=new He,Qe=new He;function Ke(t,e,r,n,i){const s=.5*(n-e),o=.5*(i-r),a=t*t;return(2*r-2*n+s+o)*(t*a)+(-3*r+3*n-2*s-o)*a+s*t+r}function tr(t,e,r,n){return function(t,e){const r=1-t;return r*r*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,r)+function(t,e){return t*t*e}(t,n)}function er(t,e,r,n,i){return function(t,e){const r=1-t;return r*r*r*e}(t,e)+function(t,e){const r=1-t;return 3*r*r*t*e}(t,r)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,i)}class rr extends Ge{constructor(t=new E,e=new E,r=new E,n=new E){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=r,this.v3=n}getPoint(t,e=new E){const r=e,n=this.v0,i=this.v1,s=this.v2,o=this.v3;return r.set(er(t,n.x,i.x,s.x,o.x),er(t,n.y,i.y,s.y,o.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class nr extends Ge{constructor(t=new E,e=new E){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new E){const r=e;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const r=e||new E;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class ir extends Ge{constructor(t=new E,e=new E,r=new E){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new E){const r=e,n=this.v0,i=this.v1,s=this.v2;return r.set(tr(t,n.x,i.x,s.x),tr(t,n.y,i.y,s.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class sr extends Ge{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new E){const r=e,n=this.points,i=(n.length-1)*t,s=Math.floor(i),o=i-s,a=n[0===s?s:s-1],h=n[s],u=n[s>n.length-2?n.length-1:s+1],c=n[s>n.length-3?n.length-1:s+2];return r.set(Ke(o,a.x,h.x,u.x,c.x),Ke(o,a.y,h.y,u.y,c.y)),r}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const r=this.points[e];t.points.push(r.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push((new E).fromArray(r))}return this}}var or=Object.freeze({__proto__:null,ArcCurve:class extends Ze{constructor(t,e,r,n,i,s){super(t,e,r,r,n,i,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends Ge{constructor(t=[],e=!1,r="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=r,this.tension=n}getPoint(t,e=new K){const r=e,n=this.points,i=n.length,s=(i-(this.closed?0:1))*t;let o,a,h=Math.floor(s),u=s-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/i)+1)*i:0===u&&h===i-1&&(h=i-2,u=1),this.closed||h>0?o=n[(h-1)%i]:(Xe.subVectors(n[0],n[1]).add(n[0]),o=Xe);const c=n[h%i],l=n[(h+1)%i];if(this.closed||h+2<i?a=n[(h+2)%i]:(Xe.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=Xe),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(o.distanceToSquared(c),t),r=Math.pow(c.distanceToSquared(l),t),n=Math.pow(l.distanceToSquared(a),t);r<1e-4&&(r=1),e<1e-4&&(e=r),n<1e-4&&(n=r),Ye.initNonuniformCatmullRom(o.x,c.x,l.x,a.x,e,r,n),$e.initNonuniformCatmullRom(o.y,c.y,l.y,a.y,e,r,n),Qe.initNonuniformCatmullRom(o.z,c.z,l.z,a.z,e,r,n)}else"catmullrom"===this.curveType&&(Ye.initCatmullRom(o.x,c.x,l.x,a.x,this.tension),$e.initCatmullRom(o.y,c.y,l.y,a.y,this.tension),Qe.initCatmullRom(o.z,c.z,l.z,a.z,this.tension));return r.set(Ye.calc(u),$e.calc(u),Qe.calc(u)),r}copy(t){super.copy(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,r=this.points.length;e<r;e++){const r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,r=t.points.length;e<r;e++){const r=t.points[e];this.points.push((new K).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:rr,CubicBezierCurve3:class extends Ge{constructor(t=new K,e=new K,r=new K,n=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=r,this.v3=n}getPoint(t,e=new K){const r=e,n=this.v0,i=this.v1,s=this.v2,o=this.v3;return r.set(er(t,n.x,i.x,s.x,o.x),er(t,n.y,i.y,s.y,o.y),er(t,n.z,i.z,s.z,o.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:Ze,LineCurve:nr,LineCurve3:class extends Ge{constructor(t=new K,e=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new K){const r=e;return 1===t?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:ir,QuadraticBezierCurve3:class extends Ge{constructor(t=new K,e=new K,r=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new K){const r=e,n=this.v0,i=this.v1,s=this.v2;return r.set(tr(t,n.x,i.x,s.x),tr(t,n.y,i.y,s.y),tr(t,n.z,i.z,s.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:sr});class ar extends Ge{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new nr(e,t))}getPoint(t,e){const r=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=r){const t=n[i]-r,s=this.curves[i],o=s.getLength(),a=0===o?0:1-t/o;return s.getPointAt(a,e)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let r=0,n=this.curves.length;r<n;r++)e+=this.curves[r].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let r=0;r<=t;r++)e.push(this.getPoint(r/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let r;for(let n=0,i=this.curves;n<i.length;n++){const s=i[n],o=s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t,a=s.getPoints(o);for(let t=0;t<a.length;t++){const n=a[t];r&&r.equals(n)||(e.push(n),r=n)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,r=t.curves.length;e<r;e++){const r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,r=this.curves.length;e<r;e++){const r=this.curves[e];t.curves.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,r=t.curves.length;e<r;e++){const r=t.curves[e];this.curves.push((new or[r.type]).fromJSON(r))}return this}}class hr extends ar{constructor(t){super(),this.type="Path",this.currentPoint=new E,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,r=t.length;e<r;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const r=new nr(this.currentPoint.clone(),new E(t,e));return this.curves.push(r),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,r,n){const i=new ir(this.currentPoint.clone(),new E(t,e),new E(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this}bezierCurveTo(t,e,r,n,i,s){const o=new rr(this.currentPoint.clone(),new E(t,e),new E(r,n),new E(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),r=new sr(e);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,r,n,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,r,n,i,s),this}absarc(t,e,r,n,i,s){return this.absellipse(t,e,r,r,n,i,s),this}ellipse(t,e,r,n,i,s,o,a){const h=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+h,e+u,r,n,i,s,o,a),this}absellipse(t,e,r,n,i,s,o,a){const h=new Ze(t,e,r,n,i,s,o,a);if(this.curves.length>0){const t=h.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(h);const u=h.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ur extends hr{constructor(t){super(t),this.uuid=C(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let r=0,n=this.holes.length;r<n;r++)e[r]=this.holes[r].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,r=t.holes.length;e<r;e++){const r=t.holes[e];this.holes.push(r.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,r=this.holes.length;e<r;e++){const r=this.holes[e];t.holes.push(r.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,r=t.holes.length;e<r;e++){const r=t.holes[e];this.holes.push((new hr).fromJSON(r))}return this}}function cr(t,e,r,n,i){let s,o;if(i===function(t,e,r,n){let i=0;for(let s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}(t,e,r,n)>0)for(s=e;s<r;s+=n)o=Er(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=Er(s,t[s],t[s+1],o);return o&&Sr(o,o.next)&&(Br(o),o=o.next),o}function lr(t,e){if(!t)return t;e||(e=t);let r,n=t;do{if(r=!1,n.steiner||!Sr(n,n.next)&&0!==Ar(n.prev,n,n.next))n=n.next;else{if(Br(n),n=e=n.prev,n===n.next)break;r=!0}}while(r||n!==e);return e}function fr(t,e,r,n,i,s,o){if(!t)return;!o&&s&&function(t,e,r,n){let i=t;do{0===i.z&&(i.z=br(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,r,n,i,s,o,a,h,u=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ,n);e++);for(h=u;a>0||h>0&&n;)0!==a&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1)}(i)}(t,n,i,s);let a,h,u=t;for(;t.prev!==t.next;)if(a=t.prev,h=t.next,s?dr(t,n,i,s):pr(t))e.push(a.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),Br(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?fr(t=mr(lr(t),e,r),e,r,n,i,s,2):2===o&&gr(t,e,r,n,i,s):fr(lr(t),e,r,n,i,s,1);break}}function pr(t){const e=t.prev,r=t,n=t.next;if(Ar(e,r,n)>=0)return!1;const i=e.x,s=r.x,o=n.x,a=e.y,h=r.y,u=n.y,c=i<s?i<o?i:o:s<o?s:o,l=a<h?a<u?a:u:h<u?h:u,f=i>s?i>o?i:o:s>o?s:o,p=a>h?a>u?a:u:h>u?h:u;let d=n.next;for(;d!==e;){if(d.x>=c&&d.x<=f&&d.y>=l&&d.y<=p&&wr(i,a,s,h,o,u,d.x,d.y)&&Ar(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function dr(t,e,r,n){const i=t.prev,s=t,o=t.next;if(Ar(i,s,o)>=0)return!1;const a=i.x,h=s.x,u=o.x,c=i.y,l=s.y,f=o.y,p=a<h?a<u?a:u:h<u?h:u,d=c<l?c<f?c:f:l<f?l:f,m=a>h?a>u?a:u:h>u?h:u,g=c>l?c>f?c:f:l>f?l:f,y=br(p,d,e,r,n),v=br(m,g,e,r,n);let x=t.prevZ,b=t.nextZ;for(;x&&x.z>=y&&b&&b.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=d&&x.y<=g&&x!==i&&x!==o&&wr(a,c,h,l,u,f,x.x,x.y)&&Ar(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==o&&wr(a,c,h,l,u,f,b.x,b.y)&&Ar(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=y;){if(x.x>=p&&x.x<=m&&x.y>=d&&x.y<=g&&x!==i&&x!==o&&wr(a,c,h,l,u,f,x.x,x.y)&&Ar(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=m&&b.y>=d&&b.y<=g&&b!==i&&b!==o&&wr(a,c,h,l,u,f,b.x,b.y)&&Ar(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function mr(t,e,r){let n=t;do{const i=n.prev,s=n.next.next;!Sr(i,s)&&Cr(i,n,n.next,s)&&kr(i,s)&&kr(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),Br(n),Br(n.next),n=t=s),n=n.next}while(n!==t);return lr(n)}function gr(t,e,r,n,i,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){if(o.i!==t.i&&Mr(o,t)){let a=Or(o,t);return o=lr(o,o.next),a=lr(a,a.next),fr(o,e,r,n,i,s,0),void fr(a,e,r,n,i,s,0)}t=t.next}o=o.next}while(o!==t)}function yr(t,e){return t.x-e.x}function vr(t,e){const r=function(t,e){let r,n=e,i=-1/0;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const t=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=s&&t>i&&(i=t,r=n.x<n.next.x?n:n.next,t===s))return r}n=n.next}while(n!==e);if(!r)return null;const a=r,h=r.x,u=r.y;let c,l=1/0;n=r;do{s>=n.x&&n.x>=h&&s!==n.x&&wr(o<u?s:i,o,h,u,o<u?i:s,o,n.x,n.y)&&(c=Math.abs(o-n.y)/(s-n.x),kr(n,t)&&(c<l||c===l&&(n.x>r.x||n.x===r.x&&xr(r,n)))&&(r=n,l=c)),n=n.next}while(n!==a);return r}(t,e);if(!r)return e;const n=Or(r,t);return lr(n,n.next),lr(r,r.next)}function xr(t,e){return Ar(t.prev,t,e.prev)<0&&Ar(e.next,t,t.next)<0}function br(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _r(t){let e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function wr(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function Mr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Cr(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(kr(t,e)&&kr(e,t)&&function(t,e){let r=t,n=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(Ar(t.prev,t,e.prev)||Ar(t,e.prev,e))||Sr(t,e)&&Ar(t.prev,t,t.next)>0&&Ar(e.prev,e,e.next)>0)}function Ar(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Sr(t,e){return t.x===e.x&&t.y===e.y}function Cr(t,e,r,n){const i=Tr(Ar(t,e,r)),s=Tr(Ar(t,e,n)),o=Tr(Ar(r,n,t)),a=Tr(Ar(r,n,e));return i!==s&&o!==a||!(0!==i||!zr(t,r,e))||!(0!==s||!zr(t,n,e))||!(0!==o||!zr(r,t,n))||!(0!==a||!zr(r,e,n))}function zr(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Tr(t){return t>0?1:t<0?-1:0}function kr(t,e){return Ar(t.prev,t,t.next)<0?Ar(t,e,t.next)>=0&&Ar(t,t.prev,e)>=0:Ar(t,e,t.prev)<0||Ar(t,t.next,e)<0}function Or(t,e){const r=new Rr(t.i,t.x,t.y),n=new Rr(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function Er(t,e,r,n){const i=new Rr(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Br(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rr(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Pr{static area(t){const e=t.length;let r=0;for(let n=e-1,i=0;i<e;n=i++)r+=t[n].x*t[i].y-t[i].x*t[n].y;return.5*r}static isClockWise(t){return Pr.area(t)<0}static triangulateShape(t,e){const r=[],n=[],i=[];Lr(t),Ir(r,t);let s=t.length;e.forEach(Lr);for(let t=0;t<e.length;t++)n.push(s),s+=e[t].length,Ir(r,e[t]);const o=function(t,e,r=2){const n=e&&e.length,i=n?e[0]*r:t.length;let s=cr(t,0,i,r,!0);const o=[];if(!s||s.next===s.prev)return o;let a,h,u,c,l,f,p;if(n&&(s=function(t,e,r,n){const i=[];let s,o,a,h,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,h=s<o-1?e[s+1]*n:t.length,u=cr(t,a,h,n,!1),u===u.next&&(u.steiner=!0),i.push(_r(u));for(i.sort(yr),s=0;s<i.length;s++)r=vr(i[s],r);return r}(t,e,s,r)),t.length>80*r){a=u=t[0],h=c=t[1];for(let e=r;e<i;e+=r)l=t[e],f=t[e+1],l<a&&(a=l),f<h&&(h=f),l>u&&(u=l),f>c&&(c=f);p=Math.max(u-a,c-h),p=0!==p?32767/p:0}return fr(s,o,r,a,h,p,0),o}(r,n);for(let t=0;t<o.length;t+=3)i.push(o.slice(t,t+3));return i}}function Lr(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ir(t,e){for(let r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}class Nr extends ze{constructor(t=new ur([new E(0,.5),new E(-.5,-.5),new E(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const r=[],n=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(t))h(t);else for(let e=0;e<t.length;e++)h(t[e]),this.addGroup(o,a,e),o+=a,a=0;function h(t){const o=n.length/3,h=t.extractPoints(e);let u=h.shape;const c=h.holes;!1===Pr.isClockWise(u)&&(u=u.reverse());for(let t=0,e=c.length;t<e;t++){const e=c[t];!0===Pr.isClockWise(e)&&(c[t]=e.reverse())}const l=Pr.triangulateShape(u,c);for(let t=0,e=c.length;t<e;t++){const e=c[t];u=u.concat(e)}for(let t=0,e=u.length;t<e;t++){const e=u[t];n.push(e.x,e.y,0),i.push(0,0,1),s.push(e.x,e.y)}for(let t=0,e=l.length;t<e;t++){const e=l[t],n=e[0]+o,i=e[1]+o,s=e[2]+o;r.push(n,i,s),a+=3}}this.setIndex(r),this.setAttribute("position",new xe(n,3)),this.setAttribute("normal",new xe(i,3)),this.setAttribute("uv",new xe(s,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let r=0,n=t.length;r<n;r++){const n=t[r];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const r=[];for(let n=0,i=t.shapes.length;n<i;n++){const i=e[t.shapes[n]];r.push(i)}return new Nr(r,t.curveSegments)}}class Fr extends ze{constructor(t=1,e=32,r=16,n=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:n,phiLength:i,thetaStart:s,thetaLength:o},e=Math.max(3,Math.floor(e)),r=Math.max(2,Math.floor(r));const a=Math.min(s+o,Math.PI);let h=0;const u=[],c=new K,l=new K,f=[],p=[],d=[],m=[];for(let f=0;f<=r;f++){const g=[],y=f/r;let v=0;0==f&&0==s?v=.5/e:f==r&&a==Math.PI&&(v=-.5/e);for(let r=0;r<=e;r++){const a=r/e;c.x=-t*Math.cos(n+a*i)*Math.sin(s+y*o),c.y=t*Math.cos(s+y*o),c.z=t*Math.sin(n+a*i)*Math.sin(s+y*o),p.push(c.x,c.y,c.z),l.copy(c).normalize(),d.push(l.x,l.y,l.z),m.push(a+v,1-y),g.push(h++)}u.push(g)}for(let t=0;t<r;t++)for(let n=0;n<e;n++){const e=u[t][n+1],i=u[t][n],o=u[t+1][n],h=u[t+1][n+1];(0!==t||s>0)&&f.push(e,i,h),(t!==r-1||a<Math.PI)&&f.push(i,o,h)}this.setIndex(f),this.setAttribute("position",new xe(p,3)),this.setAttribute("normal",new xe(d,3)),this.setAttribute("uv",new xe(m,2))}static fromJSON(t){return new Fr(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Vr extends fe{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new J(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new J(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new E(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function jr(t,e,r){return Math.floor(t()*(Math.floor(r)-Math.ceil(e)))+Math.ceil(e)}function Ur(t,e,r){return t()*(r-e)+e}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"148"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="148");const Wr={short:{name:"short_sword",bladeLength:.4,baseBladeWidth:.1,minBladeLength:.5,maxBladeLength:.5,minHandleLength:.12,maxHandleLength:.18,handleLength:.15,bladeThickness:.05,extrusionCurve:new sr([new E(0,0),new E(0,1)])},long:{name:"long_sword",bladeLength:1.11,baseBladeWidth:.1,minBladeLength:.85,maxBladeLength:1.1,minHandleLength:.16,maxHandleLength:.28,handleLength:.22,bladeThickness:.05,extrusionCurve:new sr([new E(0,0),new E(0,1)])},great:{name:"great_sword",bladeLength:1.55,baseBladeWidth:.064,minBladeLength:1.27,maxBladeLength:1.83,minHandleLength:.457,maxHandleLength:.533,handleLength:.3,bladeThickness:.05,extrusionCurve:new sr([new E(0,0),new E(0,1)])},katana:{name:"katana",bladeLength:1.05,baseBladeWidth:.1,minBladeLength:1,maxBladeLength:1.1,handleLength:.3,minHandleLength:.3,maxHandleLength:.3,bladeThickness:.05,extrusionCurve:new ir(new E(0,0),new E(0,.7),new E(-.1,1))}},Dr={diamond:{name:"Diamond",vertices:[0,.5,.15,0,0,-.5,-.15,0],edgeVertices:[0,2],normEdgeVertices:[1,3],width:1,thickness:.3},hallow_ground:{name:"HallowGround",vertices:[0,.5,.03,.25,.06,.1,.15,0,.06,-.1,.03,-.25,0,-.5,-.03,-.25,-.06,-.1,-.15,0,-.06,.1,-.03,.25],edgeVertices:[0,6],normEdgeVertices:[3,9],width:1,thickness:.3},hexagonal:{name:"Hexagonal",vertices:[0,.5,.1,.3,.1,-.3,0,-.5,-.1,-.3,-.1,.3],edgeVertices:[0,3],normEdgeVertices:[1,2,4,5],width:1,thickness:.2},thickened_diamond:{name:"ThickenedDiamond",vertices:[0,.5,.5,0,0,-.5,-.5,0],edgeVertices:[0,2],normEdgeVertices:[1,3],width:1,thickness:1.3},lenticular:{name:"Lenticular",vertices:[0,.5,.04,.4,.1,.1,.15,.03,.15,-.03,.1,-.1,.04,-.4,0,-.5,-.04,-.4,-.1,-.1,-.15,-.03,-.15,.03,-.1,.1,-.04,.4],edgeVertices:[0,7],width:1,thickness:.3},fuller:{name:"Fuller",vertices:[0,.5,.04,.4,.1,.1,.15,.04,.1,0,.15,-.04,.1,-.1,.04,-.4,0,-.5,-.04,-.4,-.1,-.1,-.15,-.03,-.1,0,-.15,.03,-.1,.1,-.04,.4],edgeVertices:[0,8],normEdgeVertices:[3,4,5,11,12,13],width:1,thickness:.3},double_fuller:{name:"DoubleFuller",vertices:[0,.5,.04,.4,.1,.1,.05,.07,.15,.03,.15,-.03,.05,-.07,.1,-.1,.04,-.4,0,-.5,-.04,-.4,-.1,-.1,-.05,-.07,-.15,-.03,-.15,.03,-.05,.07,-.1,.1,-.04,.4],edgeVertices:[0,9],normEdgeVertices:[2,3,4,5,6,7,11,12,13,15,16,17],width:1,thickness:.3},broad_fuller:{name:"BroadFuller",vertices:[0,.5,.02,.4,.01,0,.02,-.4,0,-.5,-.02,-.4,-.01,0,-.02,.4],edgeVertices:[0,4],normEdgeVertices:[1,2,3,5,6,7],width:1,thickness:.04},single_edge:{name:"katana",vertices:[0,.5,.01,.1,.01,-.5,-.01,-.5,-.01,.1],edgeVertices:[0],normEdgeVertices:[2,3],width:1,thickness:.02}};var qr={};!function(t,e){(function(){var r,i="Expected a function",s="__lodash_hash_undefined__",o="__lodash_placeholder__",a=32,h=128,u=1/0,c=9007199254740991,l=NaN,f=4294967295,p=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",256]],d="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",v="[object Error]",x="[object Function]",b="[object GeneratorFunction]",_="[object Map]",w="[object Number]",M="[object Object]",A="[object Promise]",S="[object RegExp]",C="[object Set]",z="[object String]",T="[object Symbol]",k="[object WeakMap]",O="[object ArrayBuffer]",E="[object DataView]",B="[object Float32Array]",R="[object Float64Array]",P="[object Int8Array]",L="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",F="[object Uint8ClampedArray]",V="[object Uint16Array]",j="[object Uint32Array]",U=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,D=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,G=RegExp(q.source),Z=RegExp(J.source),H=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,K=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tt=/[\\^$.*+?()[\]{}|]/g,et=RegExp(tt.source),rt=/^\s+/,nt=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,ot=/,? & /,at=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\ufe0e\\ufe0f",Ct="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="["+bt+"]",Tt="["+Ct+"]",kt="["+_t+"]",Ot="\\d+",Et="["+wt+"]",Bt="["+Mt+"]",Rt="[^"+bt+Ct+Ot+wt+Mt+At+"]",Pt="\\ud83c[\\udffb-\\udfff]",Lt="[^"+bt+"]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+At+"]",Vt="(?:"+Bt+"|"+Rt+")",jt="(?:"+Ft+"|"+Rt+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",Wt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Dt="(?:"+kt+"|"+Pt+")?",qt="["+St+"]?",Jt=qt+Dt+"(?:\\u200d(?:"+[Lt,It,Nt].join("|")+")"+qt+Dt+")*",Gt="(?:"+[Et,It,Nt].join("|")+")"+Jt,Zt="(?:"+[Lt+kt+"?",kt,It,Nt,zt].join("|")+")",Ht=RegExp("['’]","g"),Xt=RegExp(kt,"g"),Yt=RegExp(Pt+"(?="+Pt+")|"+Zt+Jt,"g"),$t=RegExp([Ft+"?"+Bt+"+"+Ut+"(?="+[Tt,Ft,"$"].join("|")+")",jt+"+"+Wt+"(?="+[Tt,Ft+Vt,"$"].join("|")+")",Ft+"?"+Vt+"+"+Ut,Ft+"+"+Wt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ot,Gt].join("|"),"g"),Qt=RegExp("[\\u200d"+bt+_t+St+"]"),Kt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,te=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ee=-1,re={};re[B]=re[R]=re[P]=re[L]=re[I]=re[N]=re[F]=re[V]=re[j]=!0,re[d]=re[m]=re[O]=re[g]=re[E]=re[y]=re[v]=re[x]=re[_]=re[w]=re[M]=re[S]=re[C]=re[z]=re[k]=!1;var ne={};ne[d]=ne[m]=ne[O]=ne[E]=ne[g]=ne[y]=ne[B]=ne[R]=ne[P]=ne[L]=ne[I]=ne[_]=ne[w]=ne[M]=ne[S]=ne[C]=ne[z]=ne[T]=ne[N]=ne[F]=ne[V]=ne[j]=!0,ne[v]=ne[x]=ne[k]=!1;var ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,oe=parseInt,ae="object"==typeof n&&n&&n.Object===Object&&n,he="object"==typeof self&&self&&self.Object===Object&&self,ue=ae||he||Function("return this")(),ce=e&&!e.nodeType&&e,le=ce&&t&&!t.nodeType&&t,fe=le&&le.exports===ce,pe=fe&&ae.process,de=function(){try{return le&&le.require&&le.require("util").types||pe&&pe.binding&&pe.binding("util")}catch(t){}}(),me=de&&de.isArrayBuffer,ge=de&&de.isDate,ye=de&&de.isMap,ve=de&&de.isRegExp,xe=de&&de.isSet,be=de&&de.isTypedArray;function _e(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function we(t,e,r,n){for(var i=-1,s=null==t?0:t.length;++i<s;){var o=t[i];e(n,o,r(o),t)}return n}function Me(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function Ae(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function Se(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function Ce(t,e){for(var r=-1,n=null==t?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}function ze(t,e){return!(null==t||!t.length)&&Ne(t,e,0)>-1}function Te(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function ke(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function Oe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function Ee(t,e,r,n){var i=-1,s=null==t?0:t.length;for(n&&s&&(r=t[++i]);++i<s;)r=e(r,t[i],i,t);return r}function Be(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function Re(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Pe=Ue("length");function Le(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function Ie(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}function Ne(t,e,r){return e==e?function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):Ie(t,Ve,r)}function Fe(t,e,r,n){for(var i=r-1,s=t.length;++i<s;)if(n(t[i],e))return i;return-1}function Ve(t){return t!=t}function je(t,e){var r=null==t?0:t.length;return r?qe(t,e)/r:l}function Ue(t){return function(e){return null==e?r:e[t]}}function We(t){return function(e){return null==t?r:t[e]}}function De(t,e,r,n,i){return i(t,(function(t,i,s){r=n?(n=!1,t):e(r,t,i,s)})),r}function qe(t,e){for(var n,i=-1,s=t.length;++i<s;){var o=e(t[i]);o!==r&&(n=n===r?o:n+o)}return n}function Je(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Ge(t){return t?t.slice(0,ur(t)+1).replace(rt,""):t}function Ze(t){return function(e){return t(e)}}function He(t,e){return ke(e,(function(e){return t[e]}))}function Xe(t,e){return t.has(e)}function Ye(t,e){for(var r=-1,n=t.length;++r<n&&Ne(e,t[r],0)>-1;);return r}function $e(t,e){for(var r=t.length;r--&&Ne(e,t[r],0)>-1;);return r}function Qe(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var Ke=We({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tr=We({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function er(t){return"\\"+ie[t]}function rr(t){return Qt.test(t)}function nr(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function ir(t,e){return function(r){return t(e(r))}}function sr(t,e){for(var r=-1,n=t.length,i=0,s=[];++r<n;){var a=t[r];a!==e&&a!==o||(t[r]=o,s[i++]=r)}return s}function or(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function ar(t){return rr(t)?function(t){for(var e=Yt.lastIndex=0;Yt.test(t);)++e;return e}(t):Pe(t)}function hr(t){return rr(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.split("")}(t)}function ur(t){for(var e=t.length;e--&&nt.test(t.charAt(e)););return e}var cr=We({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),lr=function t(e){var n,nt=(e=null==e?ue:lr.defaults(ue.Object(),e,lr.pick(ue,te))).Array,bt=e.Date,_t=e.Error,wt=e.Function,Mt=e.Math,At=e.Object,St=e.RegExp,Ct=e.String,zt=e.TypeError,Tt=nt.prototype,kt=wt.prototype,Ot=At.prototype,Et=e["__core-js_shared__"],Bt=kt.toString,Rt=Ot.hasOwnProperty,Pt=0,Lt=(n=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",It=Ot.toString,Nt=Bt.call(At),Ft=ue._,Vt=St("^"+Bt.call(Rt).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=fe?e.Buffer:r,Ut=e.Symbol,Wt=e.Uint8Array,Dt=jt?jt.allocUnsafe:r,qt=ir(At.getPrototypeOf,At),Jt=At.create,Gt=Ot.propertyIsEnumerable,Zt=Tt.splice,Yt=Ut?Ut.isConcatSpreadable:r,Qt=Ut?Ut.iterator:r,ie=Ut?Ut.toStringTag:r,ae=function(){try{var t=hs(At,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==ue.clearTimeout&&e.clearTimeout,ce=bt&&bt.now!==ue.Date.now&&bt.now,le=e.setTimeout!==ue.setTimeout&&e.setTimeout,pe=Mt.ceil,de=Mt.floor,Pe=At.getOwnPropertySymbols,We=jt?jt.isBuffer:r,fr=e.isFinite,pr=Tt.join,dr=ir(At.keys,At),mr=Mt.max,gr=Mt.min,yr=bt.now,vr=e.parseInt,xr=Mt.random,br=Tt.reverse,_r=hs(e,"DataView"),wr=hs(e,"Map"),Mr=hs(e,"Promise"),Ar=hs(e,"Set"),Sr=hs(e,"WeakMap"),Cr=hs(At,"create"),zr=Sr&&new Sr,Tr={},kr=Ls(_r),Or=Ls(wr),Er=Ls(Mr),Br=Ls(Ar),Rr=Ls(Sr),Pr=Ut?Ut.prototype:r,Lr=Pr?Pr.valueOf:r,Ir=Pr?Pr.toString:r;function Nr(t){if(Ko(t)&&!Wo(t)&&!(t instanceof Ur)){if(t instanceof jr)return t;if(Rt.call(t,"__wrapped__"))return Is(t)}return new jr(t)}var Fr=function(){function t(){}return function(e){if(!Qo(e))return{};if(Jt)return Jt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Vr(){}function jr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Ur(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Dr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qr(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Jr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new qr;++e<r;)this.add(t[e])}function Gr(t){var e=this.__data__=new Dr(t);this.size=e.size}function Zr(t,e){var r=Wo(t),n=!r&&Uo(t),i=!r&&!n&&Go(t),s=!r&&!n&&!i&&aa(t),o=r||n||i||s,a=o?Je(t.length,Ct):[],h=a.length;for(var u in t)!e&&!Rt.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||s&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ms(u,h))||a.push(u);return a}function Hr(t){var e=t.length;return e?t[Jn(0,e-1)]:r}function Xr(t,e){return Bs(Ci(t),sn(e,0,t.length))}function Yr(t){return Bs(Ci(t))}function $r(t,e,n){(n!==r&&!Fo(t[e],n)||n===r&&!(e in t))&&rn(t,e,n)}function Qr(t,e,n){var i=t[e];Rt.call(t,e)&&Fo(i,n)&&(n!==r||e in t)||rn(t,e,n)}function Kr(t,e){for(var r=t.length;r--;)if(Fo(t[r][0],e))return r;return-1}function tn(t,e,r,n){return cn(t,(function(t,i,s){e(n,t,r(t),s)})),n}function en(t,e){return t&&zi(e,ka(e),t)}function rn(t,e,r){"__proto__"==e&&ae?ae(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function nn(t,e){for(var n=-1,i=e.length,s=nt(i),o=null==t;++n<i;)s[n]=o?r:Aa(t,e[n]);return s}function sn(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function on(t,e,n,i,s,o){var a,h=1&e,u=2&e,c=4&e;if(n&&(a=s?n(t,i,s,o):n(t)),a!==r)return a;if(!Qo(t))return t;var l=Wo(t);if(l){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Rt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!h)return Ci(t,a)}else{var f=ls(t),p=f==x||f==b;if(Go(t))return bi(t,h);if(f==M||f==d||p&&!s){if(a=u||p?{}:ps(t),!h)return u?function(t,e){return zi(t,cs(t),e)}(t,function(t,e){return t&&zi(e,Oa(e),t)}(a,t)):function(t,e){return zi(t,us(t),e)}(t,en(a,t))}else{if(!ne[f])return s?t:{};a=function(t,e,r){var n,i=t.constructor;switch(e){case O:return _i(t);case g:case y:return new i(+t);case E:return function(t,e){var r=e?_i(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case B:case R:case P:case L:case I:case N:case F:case V:case j:return wi(t,r);case _:return new i;case w:case z:return new i(t);case S:return function(t){var e=new t.constructor(t.source,lt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return new i;case T:return n=t,Lr?At(Lr.call(n)):{}}}(t,f,h)}}o||(o=new Gr);var m=o.get(t);if(m)return m;o.set(t,a),ia(t)?t.forEach((function(r){a.add(on(r,e,n,r,t,o))})):ta(t)&&t.forEach((function(r,i){a.set(i,on(r,e,n,i,t,o))}));var v=l?r:(c?u?es:ts:u?Oa:ka)(t);return Me(v||t,(function(r,i){v&&(r=t[i=r]),Qr(a,i,on(r,e,n,i,t,o))})),a}function an(t,e,n){var i=n.length;if(null==t)return!i;for(t=At(t);i--;){var s=n[i],o=e[s],a=t[s];if(a===r&&!(s in t)||!o(a))return!1}return!0}function hn(t,e,n){if("function"!=typeof t)throw new zt(i);return Ts((function(){t.apply(r,n)}),e)}function un(t,e,r,n){var i=-1,s=ze,o=!0,a=t.length,h=[],u=e.length;if(!a)return h;r&&(e=ke(e,Ze(r))),n?(s=Te,o=!1):e.length>=200&&(s=Xe,o=!1,e=new Jr(e));t:for(;++i<a;){var c=t[i],l=null==r?c:r(c);if(c=n||0!==c?c:0,o&&l==l){for(var f=u;f--;)if(e[f]===l)continue t;h.push(c)}else s(e,l,n)||h.push(c)}return h}Nr.templateSettings={escape:H,evaluate:X,interpolate:Y,variable:"",imports:{_:Nr}},Nr.prototype=Vr.prototype,Nr.prototype.constructor=Nr,jr.prototype=Fr(Vr.prototype),jr.prototype.constructor=jr,Ur.prototype=Fr(Vr.prototype),Ur.prototype.constructor=Ur,Wr.prototype.clear=function(){this.__data__=Cr?Cr(null):{},this.size=0},Wr.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wr.prototype.get=function(t){var e=this.__data__;if(Cr){var n=e[t];return n===s?r:n}return Rt.call(e,t)?e[t]:r},Wr.prototype.has=function(t){var e=this.__data__;return Cr?e[t]!==r:Rt.call(e,t)},Wr.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cr&&e===r?s:e,this},Dr.prototype.clear=function(){this.__data__=[],this.size=0},Dr.prototype.delete=function(t){var e=this.__data__,r=Kr(e,t);return!(r<0||(r==e.length-1?e.pop():Zt.call(e,r,1),--this.size,0))},Dr.prototype.get=function(t){var e=this.__data__,n=Kr(e,t);return n<0?r:e[n][1]},Dr.prototype.has=function(t){return Kr(this.__data__,t)>-1},Dr.prototype.set=function(t,e){var r=this.__data__,n=Kr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new Wr,map:new(wr||Dr),string:new Wr}},qr.prototype.delete=function(t){var e=os(this,t).delete(t);return this.size-=e?1:0,e},qr.prototype.get=function(t){return os(this,t).get(t)},qr.prototype.has=function(t){return os(this,t).has(t)},qr.prototype.set=function(t,e){var r=os(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Jr.prototype.add=Jr.prototype.push=function(t){return this.__data__.set(t,s),this},Jr.prototype.has=function(t){return this.__data__.has(t)},Gr.prototype.clear=function(){this.__data__=new Dr,this.size=0},Gr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Gr.prototype.get=function(t){return this.__data__.get(t)},Gr.prototype.has=function(t){return this.__data__.has(t)},Gr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Dr){var n=r.__data__;if(!wr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(t,e),this.size=r.size,this};var cn=Oi(vn),ln=Oi(xn,!0);function fn(t,e){var r=!0;return cn(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function pn(t,e,n){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=e(o);if(null!=a&&(h===r?a==a&&!oa(a):n(a,h)))var h=a,u=o}return u}function dn(t,e){var r=[];return cn(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function mn(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=ds),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?mn(a,e-1,r,n,i):Oe(i,a):n||(i[i.length]=a)}return i}var gn=Ei(),yn=Ei(!0);function vn(t,e){return t&&gn(t,e,ka)}function xn(t,e){return t&&yn(t,e,ka)}function bn(t,e){return Ce(e,(function(e){return Xo(t[e])}))}function _n(t,e){for(var n=0,i=(e=gi(e,t)).length;null!=t&&n<i;)t=t[Ps(e[n++])];return n&&n==i?t:r}function wn(t,e,r){var n=e(t);return Wo(t)?n:Oe(n,r(t))}function Mn(t){return null==t?t===r?"[object Undefined]":"[object Null]":ie&&ie in At(t)?function(t){var e=Rt.call(t,ie),n=t[ie];try{t[ie]=r;var i=!0}catch(t){}var s=It.call(t);return i&&(e?t[ie]=n:delete t[ie]),s}(t):function(t){return It.call(t)}(t)}function An(t,e){return t>e}function Sn(t,e){return null!=t&&Rt.call(t,e)}function Cn(t,e){return null!=t&&e in At(t)}function zn(t,e,n){for(var i=n?Te:ze,s=t[0].length,o=t.length,a=o,h=nt(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=ke(l,Ze(e))),u=gr(l.length,u),h[a]=!n&&(e||s>=120&&l.length>=120)?new Jr(a&&l):r}l=t[0];var f=-1,p=h[0];t:for(;++f<s&&c.length<u;){var d=l[f],m=e?e(d):d;if(d=n||0!==d?d:0,!(p?Xe(p,m):i(c,m,n))){for(a=o;--a;){var g=h[a];if(!(g?Xe(g,m):i(t[a],m,n)))continue t}p&&p.push(m),c.push(d)}}return c}function Tn(t,e,n){var i=null==(t=As(t,e=gi(e,t)))?t:t[Ps(Zs(e))];return null==i?r:_e(i,t,n)}function kn(t){return Ko(t)&&Mn(t)==d}function On(t,e,n,i,s){return t===e||(null==t||null==e||!Ko(t)&&!Ko(e)?t!=t&&e!=e:function(t,e,n,i,s,o){var a=Wo(t),h=Wo(e),u=a?m:ls(t),c=h?m:ls(e),l=(u=u==d?M:u)==M,f=(c=c==d?M:c)==M,p=u==c;if(p&&Go(t)){if(!Go(e))return!1;a=!0,l=!1}if(p&&!l)return o||(o=new Gr),a||aa(t)?Qi(t,e,n,i,s,o):function(t,e,r,n,i,s,o){switch(r){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!s(new Wt(t),new Wt(e)));case g:case y:case w:return Fo(+t,+e);case v:return t.name==e.name&&t.message==e.message;case S:case z:return t==e+"";case _:var a=nr;case C:var h=1&n;if(a||(a=or),t.size!=e.size&&!h)return!1;var u=o.get(t);if(u)return u==e;n|=2,o.set(t,e);var c=Qi(a(t),a(e),n,i,s,o);return o.delete(t),c;case T:if(Lr)return Lr.call(t)==Lr.call(e)}return!1}(t,e,u,n,i,s,o);if(!(1&n)){var x=l&&Rt.call(t,"__wrapped__"),b=f&&Rt.call(e,"__wrapped__");if(x||b){var A=x?t.value():t,k=b?e.value():e;return o||(o=new Gr),s(A,k,n,i,o)}}return!!p&&(o||(o=new Gr),function(t,e,n,i,s,o){var a=1&n,h=ts(t),u=h.length;if(u!=ts(e).length&&!a)return!1;for(var c=u;c--;){var l=h[c];if(!(a?l in e:Rt.call(e,l)))return!1}var f=o.get(t),p=o.get(e);if(f&&p)return f==e&&p==t;var d=!0;o.set(t,e),o.set(e,t);for(var m=a;++c<u;){var g=t[l=h[c]],y=e[l];if(i)var v=a?i(y,g,l,e,t,o):i(g,y,l,t,e,o);if(!(v===r?g===y||s(g,y,n,i,o):v)){d=!1;break}m||(m="constructor"==l)}if(d&&!m){var x=t.constructor,b=e.constructor;x==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,i,s,o))}(t,e,n,i,On,s))}function En(t,e,n,i){var s=n.length,o=s,a=!i;if(null==t)return!o;for(t=At(t);s--;){var h=n[s];if(a&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<o;){var u=(h=n[s])[0],c=t[u],l=h[1];if(a&&h[2]){if(c===r&&!(u in t))return!1}else{var f=new Gr;if(i)var p=i(c,l,u,t,e,f);if(!(p===r?On(l,c,3,i,f):p))return!1}}return!0}function Bn(t){return!(!Qo(t)||(e=t,Lt&&Lt in e))&&(Xo(t)?Vt:dt).test(Ls(t));var e}function Rn(t){return"function"==typeof t?t:null==t?eh:"object"==typeof t?Wo(t)?Fn(t[0],t[1]):Nn(t):ch(t)}function Pn(t){if(!bs(t))return dr(t);var e=[];for(var r in At(t))Rt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Ln(t,e){return t<e}function In(t,e){var r=-1,n=qo(t)?nt(t.length):[];return cn(t,(function(t,i,s){n[++r]=e(t,i,s)})),n}function Nn(t){var e=as(t);return 1==e.length&&e[0][2]?ws(e[0][0],e[0][1]):function(r){return r===t||En(r,t,e)}}function Fn(t,e){return ys(t)&&_s(e)?ws(Ps(t),e):function(n){var i=Aa(n,t);return i===r&&i===e?Sa(n,t):On(e,i,3)}}function Vn(t,e,n,i,s){t!==e&&gn(e,(function(o,a){if(s||(s=new Gr),Qo(o))!function(t,e,n,i,s,o,a){var h=Cs(t,n),u=Cs(e,n),c=a.get(u);if(c)$r(t,n,c);else{var l=o?o(h,u,n+"",t,e,a):r,f=l===r;if(f){var p=Wo(u),d=!p&&Go(u),m=!p&&!d&&aa(u);l=u,p||d||m?Wo(h)?l=h:Jo(h)?l=Ci(h):d?(f=!1,l=bi(u,!0)):m?(f=!1,l=wi(u,!0)):l=[]:ra(u)||Uo(u)?(l=h,Uo(h)?l=ma(h):Qo(h)&&!Xo(h)||(l=ps(u))):f=!1}f&&(a.set(u,l),s(l,u,i,o,a),a.delete(u)),$r(t,n,l)}}(t,e,a,n,Vn,i,s);else{var h=i?i(Cs(t,a),o,a+"",t,e,s):r;h===r&&(h=o),$r(t,a,h)}}),Oa)}function jn(t,e){var n=t.length;if(n)return ms(e+=e<0?n:0,n)?t[e]:r}function Un(t,e,r){e=e.length?ke(e,(function(t){return Wo(t)?function(e){return _n(e,1===t.length?t[0]:t)}:t})):[eh];var n=-1;e=ke(e,Ze(ss()));var i=In(t,(function(t,r,i){var s=ke(e,(function(e){return e(t)}));return{criteria:s,index:++n,value:t}}));return function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(i,(function(t,e){return function(t,e,r){for(var n=-1,i=t.criteria,s=e.criteria,o=i.length,a=r.length;++n<o;){var h=Mi(i[n],s[n]);if(h)return n>=a?h:h*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}))}function Wn(t,e,r){for(var n=-1,i=e.length,s={};++n<i;){var o=e[n],a=_n(t,o);r(a,o)&&Yn(s,gi(o,t),a)}return s}function Dn(t,e,r,n){var i=n?Fe:Ne,s=-1,o=e.length,a=t;for(t===e&&(e=Ci(e)),r&&(a=ke(t,Ze(r)));++s<o;)for(var h=0,u=e[s],c=r?r(u):u;(h=i(a,c,h,n))>-1;)a!==t&&Zt.call(a,h,1),Zt.call(t,h,1);return t}function qn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==s){var s=i;ms(i)?Zt.call(t,i,1):hi(t,i)}}return t}function Jn(t,e){return t+de(xr()*(e-t+1))}function Gn(t,e){var r="";if(!t||e<1||e>c)return r;do{e%2&&(r+=t),(e=de(e/2))&&(t+=t)}while(e);return r}function Zn(t,e){return ks(Ms(t,e,eh),t+"")}function Hn(t){return Hr(Fa(t))}function Xn(t,e){var r=Fa(t);return Bs(r,sn(e,0,r.length))}function Yn(t,e,n,i){if(!Qo(t))return t;for(var s=-1,o=(e=gi(e,t)).length,a=o-1,h=t;null!=h&&++s<o;){var u=Ps(e[s]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(s!=a){var l=h[u];(c=i?i(l,u,h):r)===r&&(c=Qo(l)?l:ms(e[s+1])?[]:{})}Qr(h,u,c),h=h[u]}return t}var $n=zr?function(t,e){return zr.set(t,e),t}:eh,Qn=ae?function(t,e){return ae(t,"toString",{configurable:!0,enumerable:!1,value:Qa(e),writable:!0})}:eh;function Kn(t){return Bs(Fa(t))}function ti(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(r=r>i?i:r)<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var s=nt(i);++n<i;)s[n]=t[n+e];return s}function ei(t,e){var r;return cn(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function ri(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var s=n+i>>>1,o=t[s];null!==o&&!oa(o)&&(r?o<=e:o<e)?n=s+1:i=s}return i}return ni(t,e,eh,r)}function ni(t,e,n,i){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,h=null===e,u=oa(e),c=e===r;s<o;){var l=de((s+o)/2),f=n(t[l]),p=f!==r,d=null===f,m=f==f,g=oa(f);if(a)var y=i||m;else y=c?m&&(i||p):h?m&&p&&(i||!d):u?m&&p&&!d&&(i||!g):!d&&!g&&(i?f<=e:f<e);y?s=l+1:o=l}return gr(o,4294967294)}function ii(t,e){for(var r=-1,n=t.length,i=0,s=[];++r<n;){var o=t[r],a=e?e(o):o;if(!r||!Fo(a,h)){var h=a;s[i++]=0===o?0:o}}return s}function si(t){return"number"==typeof t?t:oa(t)?l:+t}function oi(t){if("string"==typeof t)return t;if(Wo(t))return ke(t,oi)+"";if(oa(t))return Ir?Ir.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,r){var n=-1,i=ze,s=t.length,o=!0,a=[],h=a;if(r)o=!1,i=Te;else if(s>=200){var u=e?null:Gi(t);if(u)return or(u);o=!1,i=Xe,h=new Jr}else h=e?[]:a;t:for(;++n<s;){var c=t[n],l=e?e(c):c;if(c=r||0!==c?c:0,o&&l==l){for(var f=h.length;f--;)if(h[f]===l)continue t;e&&h.push(l),a.push(c)}else i(h,l,r)||(h!==a&&h.push(l),a.push(c))}return a}function hi(t,e){return null==(t=As(t,e=gi(e,t)))||delete t[Ps(Zs(e))]}function ui(t,e,r,n){return Yn(t,e,r(_n(t,e)),n)}function ci(t,e,r,n){for(var i=t.length,s=n?i:-1;(n?s--:++s<i)&&e(t[s],s,t););return r?ti(t,n?0:s,n?s+1:i):ti(t,n?s+1:0,n?i:s)}function li(t,e){var r=t;return r instanceof Ur&&(r=r.value()),Ee(e,(function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))}),r)}function fi(t,e,r){var n=t.length;if(n<2)return n?ai(t[0]):[];for(var i=-1,s=nt(n);++i<n;)for(var o=t[i],a=-1;++a<n;)a!=i&&(s[i]=un(s[i]||o,t[a],e,r));return ai(mn(s,1),e,r)}function pi(t,e,n){for(var i=-1,s=t.length,o=e.length,a={};++i<s;){var h=i<o?e[i]:r;n(a,t[i],h)}return a}function di(t){return Jo(t)?t:[]}function mi(t){return"function"==typeof t?t:eh}function gi(t,e){return Wo(t)?t:ys(t,e)?[t]:Rs(ga(t))}var yi=Zn;function vi(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:ti(t,e,n)}var xi=he||function(t){return ue.clearTimeout(t)};function bi(t,e){if(e)return t.slice();var r=t.length,n=Dt?Dt(r):new t.constructor(r);return t.copy(n),n}function _i(t){var e=new t.constructor(t.byteLength);return new Wt(e).set(new Wt(t)),e}function wi(t,e){var r=e?_i(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==r,i=null===t,s=t==t,o=oa(t),a=e!==r,h=null===e,u=e==e,c=oa(e);if(!h&&!c&&!o&&t>e||o&&a&&u&&!h&&!c||i&&a&&u||!n&&u||!s)return 1;if(!i&&!o&&!c&&t<e||c&&n&&s&&!i&&!o||h&&n&&s||!a&&s||!u)return-1}return 0}function Ai(t,e,r,n){for(var i=-1,s=t.length,o=r.length,a=-1,h=e.length,u=mr(s-o,0),c=nt(h+u),l=!n;++a<h;)c[a]=e[a];for(;++i<o;)(l||i<s)&&(c[r[i]]=t[i]);for(;u--;)c[a++]=t[i++];return c}function Si(t,e,r,n){for(var i=-1,s=t.length,o=-1,a=r.length,h=-1,u=e.length,c=mr(s-a,0),l=nt(c+u),f=!n;++i<c;)l[i]=t[i];for(var p=i;++h<u;)l[p+h]=e[h];for(;++o<a;)(f||i<s)&&(l[p+r[o]]=t[i++]);return l}function Ci(t,e){var r=-1,n=t.length;for(e||(e=nt(n));++r<n;)e[r]=t[r];return e}function zi(t,e,n,i){var s=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var h=e[o],u=i?i(n[h],t[h],h,n,t):r;u===r&&(u=t[h]),s?rn(n,h,u):Qr(n,h,u)}return n}function Ti(t,e){return function(r,n){var i=Wo(r)?we:tn,s=e?e():{};return i(r,t,ss(n,2),s)}}function ki(t){return Zn((function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:r,a=s>2?n[2]:r;for(o=t.length>3&&"function"==typeof o?(s--,o):r,a&&gs(n[0],n[1],a)&&(o=s<3?r:o,s=1),e=At(e);++i<s;){var h=n[i];h&&t(e,h,i,o)}return e}))}function Oi(t,e){return function(r,n){if(null==r)return r;if(!qo(r))return t(r,n);for(var i=r.length,s=e?i:-1,o=At(r);(e?s--:++s<i)&&!1!==n(o[s],s,o););return r}}function Ei(t){return function(e,r,n){for(var i=-1,s=At(e),o=n(e),a=o.length;a--;){var h=o[t?a:++i];if(!1===r(s[h],h,s))break}return e}}function Bi(t){return function(e){var n=rr(e=ga(e))?hr(e):r,i=n?n[0]:e.charAt(0),s=n?vi(n,1).join(""):e.slice(1);return i[t]()+s}}function Ri(t){return function(e){return Ee(Xa(Ua(e).replace(Ht,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Fr(t.prototype),n=t.apply(r,e);return Qo(n)?n:r}}function Li(t){return function(e,n,i){var s=At(e);if(!qo(e)){var o=ss(n,3);e=ka(e),n=function(t){return o(s[t],t,s)}}var a=t(e,n,i);return a>-1?s[o?e[a]:a]:r}}function Ii(t){return Ki((function(e){var n=e.length,s=n,o=jr.prototype.thru;for(t&&e.reverse();s--;){var a=e[s];if("function"!=typeof a)throw new zt(i);if(o&&!h&&"wrapper"==ns(a))var h=new jr([],!0)}for(s=h?s:n;++s<n;){var u=ns(a=e[s]),c="wrapper"==u?rs(a):r;h=c&&vs(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?h[ns(c[0])].apply(h,c[3]):1==a.length&&vs(a)?h[u]():h.thru(a)}return function(){var t=arguments,r=t[0];if(h&&1==t.length&&Wo(r))return h.plant(r).value();for(var i=0,s=n?e[i].apply(this,t):r;++i<n;)s=e[i].call(this,s);return s}}))}function Ni(t,e,n,i,s,o,a,u,c,l){var f=e&h,p=1&e,d=2&e,m=24&e,g=512&e,y=d?r:Pi(t);return function r(){for(var h=arguments.length,v=nt(h),x=h;x--;)v[x]=arguments[x];if(m)var b=is(r),_=Qe(v,b);if(i&&(v=Ai(v,i,s,m)),o&&(v=Si(v,o,a,m)),h-=_,m&&h<l){var w=sr(v,b);return qi(t,e,Ni,r.placeholder,n,v,w,u,c,l-h)}var M=p?n:this,A=d?M[t]:t;return h=v.length,u?v=Ss(v,u):g&&h>1&&v.reverse(),f&&c<h&&(v.length=c),this&&this!==ue&&this instanceof r&&(A=y||Pi(A)),A.apply(M,v)}}function Fi(t,e){return function(r,n){return function(t,e,r,n){return vn(t,(function(t,i,s){e(n,r(t),i,s)})),n}(r,t,e(n),{})}}function Vi(t,e){return function(n,i){var s;if(n===r&&i===r)return e;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=oi(n),i=oi(i)):(n=si(n),i=si(i)),s=t(n,i)}return s}}function ji(t){return Ki((function(e){return e=ke(e,Ze(ss())),Zn((function(r){var n=this;return t(e,(function(t){return _e(t,n,r)}))}))}))}function Ui(t,e){var n=(e=e===r?" ":oi(e)).length;if(n<2)return n?Gn(e,t):e;var i=Gn(e,pe(t/ar(e)));return rr(e)?vi(hr(i),0,t).join(""):i.slice(0,t)}function Wi(t){return function(e,n,i){return i&&"number"!=typeof i&&gs(e,n,i)&&(n=i=r),e=la(e),n===r?(n=e,e=0):n=la(n),function(t,e,r,n){for(var i=-1,s=mr(pe((e-t)/(r||1)),0),o=nt(s);s--;)o[n?s:++i]=t,t+=r;return o}(e,n,i=i===r?e<n?1:-1:la(i),t)}}function Di(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=da(e),r=da(r)),t(e,r)}}function qi(t,e,n,i,s,o,h,u,c,l){var f=8&e;e|=f?a:64,4&(e&=~(f?64:a))||(e&=-4);var p=[t,e,s,f?o:r,f?h:r,f?r:o,f?r:h,u,c,l],d=n.apply(r,p);return vs(t)&&zs(d,p),d.placeholder=i,Os(d,t,e)}function Ji(t){var e=Mt[t];return function(t,r){if(t=da(t),(r=null==r?0:gr(fa(r),292))&&fr(t)){var n=(ga(t)+"e").split("e");return+((n=(ga(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Gi=Ar&&1/or(new Ar([,-0]))[1]==u?function(t){return new Ar(t)}:oh;function Zi(t){return function(e){var r=ls(e);return r==_?nr(e):r==C?function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Hi(t,e,n,s,u,c,l,f){var p=2&e;if(!p&&"function"!=typeof t)throw new zt(i);var d=s?s.length:0;if(d||(e&=-97,s=u=r),l=l===r?l:mr(fa(l),0),f=f===r?f:fa(f),d-=u?u.length:0,64&e){var m=s,g=u;s=u=r}var y=p?r:rs(t),v=[t,e,n,s,u,m,g,c,l,f];if(y&&function(t,e){var r=t[1],n=e[1],i=r|n,s=i<131,a=n==h&&8==r||n==h&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!s&&!a)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Ai(c,u,e[4]):u,t[4]=c?sr(t[3],o):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Si(c,u,e[6]):u,t[6]=c?sr(t[5],o):e[6]),(u=e[7])&&(t[7]=u),n&h&&(t[8]=null==t[8]?e[8]:gr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(v,y),t=v[0],e=v[1],n=v[2],s=v[3],u=v[4],!(f=v[9]=v[9]===r?p?0:t.length:mr(v[9]-d,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var i=Pi(t);return function s(){for(var o=arguments.length,a=nt(o),h=o,u=is(s);h--;)a[h]=arguments[h];var c=o<3&&a[0]!==u&&a[o-1]!==u?[]:sr(a,u);return(o-=c.length)<n?qi(t,e,Ni,s.placeholder,r,a,c,r,r,n-o):_e(this&&this!==ue&&this instanceof s?i:t,this,a)}}(t,e,f):e!=a&&33!=e||u.length?Ni.apply(r,v):function(t,e,r,n){var i=1&e,s=Pi(t);return function e(){for(var o=-1,a=arguments.length,h=-1,u=n.length,c=nt(u+a),l=this&&this!==ue&&this instanceof e?s:t;++h<u;)c[h]=n[h];for(;a--;)c[h++]=arguments[++o];return _e(l,i?r:this,c)}}(t,e,n,s);else var x=function(t,e,r){var n=1&e,i=Pi(t);return function e(){return(this&&this!==ue&&this instanceof e?i:t).apply(n?r:this,arguments)}}(t,e,n);return Os((y?$n:zs)(x,v),t,e)}function Xi(t,e,n,i){return t===r||Fo(t,Ot[n])&&!Rt.call(i,n)?e:t}function Yi(t,e,n,i,s,o){return Qo(t)&&Qo(e)&&(o.set(e,t),Vn(t,e,r,Yi,o),o.delete(e)),t}function $i(t){return ra(t)?r:t}function Qi(t,e,n,i,s,o){var a=1&n,h=t.length,u=e.length;if(h!=u&&!(a&&u>h))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var f=-1,p=!0,d=2&n?new Jr:r;for(o.set(t,e),o.set(e,t);++f<h;){var m=t[f],g=e[f];if(i)var y=a?i(g,m,f,e,t,o):i(m,g,f,t,e,o);if(y!==r){if(y)continue;p=!1;break}if(d){if(!Re(e,(function(t,e){if(!Xe(d,e)&&(m===t||s(m,t,n,i,o)))return d.push(e)}))){p=!1;break}}else if(m!==g&&!s(m,g,n,i,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function Ki(t){return ks(Ms(t,r,Ws),t+"")}function ts(t){return wn(t,ka,us)}function es(t){return wn(t,Oa,cs)}var rs=zr?function(t){return zr.get(t)}:oh;function ns(t){for(var e=t.name+"",r=Tr[e],n=Rt.call(Tr,e)?r.length:0;n--;){var i=r[n],s=i.func;if(null==s||s==t)return i.name}return e}function is(t){return(Rt.call(Nr,"placeholder")?Nr:t).placeholder}function ss(){var t=Nr.iteratee||rh;return t=t===rh?Rn:t,arguments.length?t(arguments[0],arguments[1]):t}function os(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function as(t){for(var e=ka(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,_s(i)]}return e}function hs(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Bn(n)?n:r}var us=Pe?function(t){return null==t?[]:(t=At(t),Ce(Pe(t),(function(e){return Gt.call(t,e)})))}:ph,cs=Pe?function(t){for(var e=[];t;)Oe(e,us(t)),t=qt(t);return e}:ph,ls=Mn;function fs(t,e,r){for(var n=-1,i=(e=gi(e,t)).length,s=!1;++n<i;){var o=Ps(e[n]);if(!(s=null!=t&&r(t,o)))break;t=t[o]}return s||++n!=i?s:!!(i=null==t?0:t.length)&&$o(i)&&ms(o,i)&&(Wo(t)||Uo(t))}function ps(t){return"function"!=typeof t.constructor||bs(t)?{}:Fr(qt(t))}function ds(t){return Wo(t)||Uo(t)||!!(Yt&&t&&t[Yt])}function ms(t,e){var r=typeof t;return!!(e=null==e?c:e)&&("number"==r||"symbol"!=r&&gt.test(t))&&t>-1&&t%1==0&&t<e}function gs(t,e,r){if(!Qo(r))return!1;var n=typeof e;return!!("number"==n?qo(r)&&ms(e,r.length):"string"==n&&e in r)&&Fo(r[e],t)}function ys(t,e){if(Wo(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!oa(t))||Q.test(t)||!$.test(t)||null!=e&&t in At(e)}function vs(t){var e=ns(t),r=Nr[e];if("function"!=typeof r||!(e in Ur.prototype))return!1;if(t===r)return!0;var n=rs(r);return!!n&&t===n[0]}(_r&&ls(new _r(new ArrayBuffer(1)))!=E||wr&&ls(new wr)!=_||Mr&&ls(Mr.resolve())!=A||Ar&&ls(new Ar)!=C||Sr&&ls(new Sr)!=k)&&(ls=function(t){var e=Mn(t),n=e==M?t.constructor:r,i=n?Ls(n):"";if(i)switch(i){case kr:return E;case Or:return _;case Er:return A;case Br:return C;case Rr:return k}return e});var xs=Et?Xo:dh;function bs(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ot)}function _s(t){return t==t&&!Qo(t)}function ws(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in At(n))}}function Ms(t,e,n){return e=mr(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=mr(r.length-e,0),o=nt(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=nt(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),_e(t,this,a)}}function As(t,e){return e.length<2?t:_n(t,ti(e,0,-1))}function Ss(t,e){for(var n=t.length,i=gr(e.length,n),s=Ci(t);i--;){var o=e[i];t[i]=ms(o,n)?s[o]:r}return t}function Cs(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var zs=Es($n),Ts=le||function(t,e){return ue.setTimeout(t,e)},ks=Es(Qn);function Os(t,e,r){var n=e+"";return ks(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(it,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Me(p,(function(r){var n="_."+r[0];e&r[1]&&!ze(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(ot):[]}(n),r)))}function Es(t){var e=0,n=0;return function(){var i=yr(),s=16-(i-n);if(n=i,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Bs(t,e){var n=-1,i=t.length,s=i-1;for(e=e===r?i:e;++n<e;){var o=Jn(n,s),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var Rs=function(t){var e=Bo((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(K,(function(t,r,n,i){e.push(n?i.replace(ut,"$1"):r||t)})),e}),(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}();function Ps(t){if("string"==typeof t||oa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ls(t){if(null!=t){try{return Bt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Is(t){if(t instanceof Ur)return t.clone();var e=new jr(t.__wrapped__,t.__chain__);return e.__actions__=Ci(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ns=Zn((function(t,e){return Jo(t)?un(t,mn(e,1,Jo,!0)):[]})),Fs=Zn((function(t,e){var n=Zs(e);return Jo(n)&&(n=r),Jo(t)?un(t,mn(e,1,Jo,!0),ss(n,2)):[]})),Vs=Zn((function(t,e){var n=Zs(e);return Jo(n)&&(n=r),Jo(t)?un(t,mn(e,1,Jo,!0),r,n):[]}));function js(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=mr(n+i,0)),Ie(t,ss(e,3),i)}function Us(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i-1;return n!==r&&(s=fa(n),s=n<0?mr(i+s,0):gr(s,i-1)),Ie(t,ss(e,3),s,!0)}function Ws(t){return null!=t&&t.length?mn(t,1):[]}function Ds(t){return t&&t.length?t[0]:r}var qs=Zn((function(t){var e=ke(t,di);return e.length&&e[0]===t[0]?zn(e):[]})),Js=Zn((function(t){var e=Zs(t),n=ke(t,di);return e===Zs(n)?e=r:n.pop(),n.length&&n[0]===t[0]?zn(n,ss(e,2)):[]})),Gs=Zn((function(t){var e=Zs(t),n=ke(t,di);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?zn(n,r,e):[]}));function Zs(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Hs=Zn(Xs);function Xs(t,e){return t&&t.length&&e&&e.length?Dn(t,e):t}var Ys=Ki((function(t,e){var r=null==t?0:t.length,n=nn(t,e);return qn(t,ke(e,(function(t){return ms(t,r)?+t:t})).sort(Mi)),n}));function $s(t){return null==t?t:br.call(t)}var Qs=Zn((function(t){return ai(mn(t,1,Jo,!0))})),Ks=Zn((function(t){var e=Zs(t);return Jo(e)&&(e=r),ai(mn(t,1,Jo,!0),ss(e,2))})),to=Zn((function(t){var e=Zs(t);return e="function"==typeof e?e:r,ai(mn(t,1,Jo,!0),r,e)}));function eo(t){if(!t||!t.length)return[];var e=0;return t=Ce(t,(function(t){if(Jo(t))return e=mr(t.length,e),!0})),Je(e,(function(e){return ke(t,Ue(e))}))}function ro(t,e){if(!t||!t.length)return[];var n=eo(t);return null==e?n:ke(n,(function(t){return _e(e,r,t)}))}var no=Zn((function(t,e){return Jo(t)?un(t,e):[]})),io=Zn((function(t){return fi(Ce(t,Jo))})),so=Zn((function(t){var e=Zs(t);return Jo(e)&&(e=r),fi(Ce(t,Jo),ss(e,2))})),oo=Zn((function(t){var e=Zs(t);return e="function"==typeof e?e:r,fi(Ce(t,Jo),r,e)})),ao=Zn(eo),ho=Zn((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,ro(t,n)}));function uo(t){var e=Nr(t);return e.__chain__=!0,e}function co(t,e){return e(t)}var lo=Ki((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,s=function(e){return nn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Ur&&ms(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:co,args:[s],thisArg:r}),new jr(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(s)})),fo=Ti((function(t,e,r){Rt.call(t,r)?++t[r]:rn(t,r,1)})),po=Li(js),mo=Li(Us);function go(t,e){return(Wo(t)?Me:cn)(t,ss(e,3))}function yo(t,e){return(Wo(t)?Ae:ln)(t,ss(e,3))}var vo=Ti((function(t,e,r){Rt.call(t,r)?t[r].push(e):rn(t,r,[e])})),xo=Zn((function(t,e,r){var n=-1,i="function"==typeof e,s=qo(t)?nt(t.length):[];return cn(t,(function(t){s[++n]=i?_e(e,t,r):Tn(t,e,r)})),s})),bo=Ti((function(t,e,r){rn(t,r,e)}));function _o(t,e){return(Wo(t)?ke:In)(t,ss(e,3))}var wo=Ti((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),Mo=Zn((function(t,e){if(null==t)return[];var r=e.length;return r>1&&gs(t,e[0],e[1])?e=[]:r>2&&gs(e[0],e[1],e[2])&&(e=[e[0]]),Un(t,mn(e,1),[])})),Ao=ce||function(){return ue.Date.now()};function So(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Hi(t,h,r,r,r,r,e)}function Co(t,e){var n;if("function"!=typeof e)throw new zt(i);return t=fa(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var zo=Zn((function(t,e,r){var n=1;if(r.length){var i=sr(r,is(zo));n|=a}return Hi(t,n,e,r,i)})),To=Zn((function(t,e,r){var n=3;if(r.length){var i=sr(r,is(To));n|=a}return Hi(e,n,t,r,i)}));function ko(t,e,n){var s,o,a,h,u,c,l=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new zt(i);function m(e){var n=s,i=o;return s=o=r,l=e,h=t.apply(i,n)}function g(t){return l=t,u=Ts(v,e),f?m(t):h}function y(t){var n=t-c;return c===r||n>=e||n<0||p&&t-l>=a}function v(){var t=Ao();if(y(t))return x(t);u=Ts(v,function(t){var r=e-(t-c);return p?gr(r,a-(t-l)):r}(t))}function x(t){return u=r,d&&s?m(t):(s=o=r,h)}function b(){var t=Ao(),n=y(t);if(s=arguments,o=this,c=t,n){if(u===r)return g(c);if(p)return xi(u),u=Ts(v,e),m(c)}return u===r&&(u=Ts(v,e)),h}return e=da(e)||0,Qo(n)&&(f=!!n.leading,a=(p="maxWait"in n)?mr(da(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),b.cancel=function(){u!==r&&xi(u),l=0,s=c=o=u=r},b.flush=function(){return u===r?h:x(Ao())},b}var Oo=Zn((function(t,e){return hn(t,1,e)})),Eo=Zn((function(t,e,r){return hn(t,da(e)||0,r)}));function Bo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new zt(i);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Bo.Cache||qr),r}function Ro(t){if("function"!=typeof t)throw new zt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Bo.Cache=qr;var Po=yi((function(t,e){var r=(e=1==e.length&&Wo(e[0])?ke(e[0],Ze(ss())):ke(mn(e,1),Ze(ss()))).length;return Zn((function(n){for(var i=-1,s=gr(n.length,r);++i<s;)n[i]=e[i].call(this,n[i]);return _e(t,this,n)}))})),Lo=Zn((function(t,e){var n=sr(e,is(Lo));return Hi(t,a,r,e,n)})),Io=Zn((function(t,e){var n=sr(e,is(Io));return Hi(t,64,r,e,n)})),No=Ki((function(t,e){return Hi(t,256,r,r,r,e)}));function Fo(t,e){return t===e||t!=t&&e!=e}var Vo=Di(An),jo=Di((function(t,e){return t>=e})),Uo=kn(function(){return arguments}())?kn:function(t){return Ko(t)&&Rt.call(t,"callee")&&!Gt.call(t,"callee")},Wo=nt.isArray,Do=me?Ze(me):function(t){return Ko(t)&&Mn(t)==O};function qo(t){return null!=t&&$o(t.length)&&!Xo(t)}function Jo(t){return Ko(t)&&qo(t)}var Go=We||dh,Zo=ge?Ze(ge):function(t){return Ko(t)&&Mn(t)==y};function Ho(t){if(!Ko(t))return!1;var e=Mn(t);return e==v||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function Xo(t){if(!Qo(t))return!1;var e=Mn(t);return e==x||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Yo(t){return"number"==typeof t&&t==fa(t)}function $o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function Qo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ko(t){return null!=t&&"object"==typeof t}var ta=ye?Ze(ye):function(t){return Ko(t)&&ls(t)==_};function ea(t){return"number"==typeof t||Ko(t)&&Mn(t)==w}function ra(t){if(!Ko(t)||Mn(t)!=M)return!1;var e=qt(t);if(null===e)return!0;var r=Rt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Bt.call(r)==Nt}var na=ve?Ze(ve):function(t){return Ko(t)&&Mn(t)==S},ia=xe?Ze(xe):function(t){return Ko(t)&&ls(t)==C};function sa(t){return"string"==typeof t||!Wo(t)&&Ko(t)&&Mn(t)==z}function oa(t){return"symbol"==typeof t||Ko(t)&&Mn(t)==T}var aa=be?Ze(be):function(t){return Ko(t)&&$o(t.length)&&!!re[Mn(t)]},ha=Di(Ln),ua=Di((function(t,e){return t<=e}));function ca(t){if(!t)return[];if(qo(t))return sa(t)?hr(t):Ci(t);if(Qt&&t[Qt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Qt]());var e=ls(t);return(e==_?nr:e==C?or:Fa)(t)}function la(t){return t?(t=da(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function fa(t){var e=la(t),r=e%1;return e==e?r?e-r:e:0}function pa(t){return t?sn(fa(t),0,f):0}function da(t){if("number"==typeof t)return t;if(oa(t))return l;if(Qo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Qo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ge(t);var r=pt.test(t);return r||mt.test(t)?oe(t.slice(2),r?2:8):ft.test(t)?l:+t}function ma(t){return zi(t,Oa(t))}function ga(t){return null==t?"":oi(t)}var ya=ki((function(t,e){if(bs(e)||qo(e))zi(e,ka(e),t);else for(var r in e)Rt.call(e,r)&&Qr(t,r,e[r])})),va=ki((function(t,e){zi(e,Oa(e),t)})),xa=ki((function(t,e,r,n){zi(e,Oa(e),t,n)})),ba=ki((function(t,e,r,n){zi(e,ka(e),t,n)})),_a=Ki(nn),wa=Zn((function(t,e){t=At(t);var n=-1,i=e.length,s=i>2?e[2]:r;for(s&&gs(e[0],e[1],s)&&(i=1);++n<i;)for(var o=e[n],a=Oa(o),h=-1,u=a.length;++h<u;){var c=a[h],l=t[c];(l===r||Fo(l,Ot[c])&&!Rt.call(t,c))&&(t[c]=o[c])}return t})),Ma=Zn((function(t){return t.push(r,Yi),_e(Ba,r,t)}));function Aa(t,e,n){var i=null==t?r:_n(t,e);return i===r?n:i}function Sa(t,e){return null!=t&&fs(t,e,Cn)}var Ca=Fi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),t[e]=r}),Qa(eh)),za=Fi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=It.call(e)),Rt.call(t,e)?t[e].push(r):t[e]=[r]}),ss),Ta=Zn(Tn);function ka(t){return qo(t)?Zr(t):Pn(t)}function Oa(t){return qo(t)?Zr(t,!0):function(t){if(!Qo(t))return function(t){var e=[];if(null!=t)for(var r in At(t))e.push(r);return e}(t);var e=bs(t),r=[];for(var n in t)("constructor"!=n||!e&&Rt.call(t,n))&&r.push(n);return r}(t)}var Ea=ki((function(t,e,r){Vn(t,e,r)})),Ba=ki((function(t,e,r,n){Vn(t,e,r,n)})),Ra=Ki((function(t,e){var r={};if(null==t)return r;var n=!1;e=ke(e,(function(e){return e=gi(e,t),n||(n=e.length>1),e})),zi(t,es(t),r),n&&(r=on(r,7,$i));for(var i=e.length;i--;)hi(r,e[i]);return r})),Pa=Ki((function(t,e){return null==t?{}:function(t,e){return Wn(t,e,(function(e,r){return Sa(t,r)}))}(t,e)}));function La(t,e){if(null==t)return{};var r=ke(es(t),(function(t){return[t]}));return e=ss(e),Wn(t,r,(function(t,r){return e(t,r[0])}))}var Ia=Zi(ka),Na=Zi(Oa);function Fa(t){return null==t?[]:He(t,ka(t))}var Va=Ri((function(t,e,r){return e=e.toLowerCase(),t+(r?ja(e):e)}));function ja(t){return Ha(ga(t).toLowerCase())}function Ua(t){return(t=ga(t))&&t.replace(yt,Ke).replace(Xt,"")}var Wa=Ri((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Da=Ri((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),qa=Bi("toLowerCase"),Ja=Ri((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),Ga=Ri((function(t,e,r){return t+(r?" ":"")+Ha(e)})),Za=Ri((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Ha=Bi("toUpperCase");function Xa(t,e,n){return t=ga(t),(e=n?r:e)===r?function(t){return Kt.test(t)}(t)?function(t){return t.match($t)||[]}(t):function(t){return t.match(at)||[]}(t):t.match(e)||[]}var Ya=Zn((function(t,e){try{return _e(t,r,e)}catch(t){return Ho(t)?t:new _t(t)}})),$a=Ki((function(t,e){return Me(e,(function(e){e=Ps(e),rn(t,e,zo(t[e],t))})),t}));function Qa(t){return function(){return t}}var Ka=Ii(),th=Ii(!0);function eh(t){return t}function rh(t){return Rn("function"==typeof t?t:on(t,1))}var nh=Zn((function(t,e){return function(r){return Tn(r,t,e)}})),ih=Zn((function(t,e){return function(r){return Tn(t,r,e)}}));function sh(t,e,r){var n=ka(e),i=bn(e,n);null!=r||Qo(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=bn(e,ka(e)));var s=!(Qo(r)&&"chain"in r&&!r.chain),o=Xo(t);return Me(i,(function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(s||e){var r=t(this.__wrapped__),i=r.__actions__=Ci(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Oe([this.value()],arguments))})})),t}function oh(){}var ah=ji(ke),hh=ji(Se),uh=ji(Re);function ch(t){return ys(t)?Ue(Ps(t)):function(t){return function(e){return _n(e,t)}}(t)}var lh=Wi(),fh=Wi(!0);function ph(){return[]}function dh(){return!1}var mh,gh=Vi((function(t,e){return t+e}),0),yh=Ji("ceil"),vh=Vi((function(t,e){return t/e}),1),xh=Ji("floor"),bh=Vi((function(t,e){return t*e}),1),_h=Ji("round"),wh=Vi((function(t,e){return t-e}),0);return Nr.after=function(t,e){if("function"!=typeof e)throw new zt(i);return t=fa(t),function(){if(--t<1)return e.apply(this,arguments)}},Nr.ary=So,Nr.assign=ya,Nr.assignIn=va,Nr.assignInWith=xa,Nr.assignWith=ba,Nr.at=_a,Nr.before=Co,Nr.bind=zo,Nr.bindAll=$a,Nr.bindKey=To,Nr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Wo(t)?t:[t]},Nr.chain=uo,Nr.chunk=function(t,e,n){e=(n?gs(t,e,n):e===r)?1:mr(fa(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var s=0,o=0,a=nt(pe(i/e));s<i;)a[o++]=ti(t,s,s+=e);return a},Nr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var s=t[e];s&&(i[n++]=s)}return i},Nr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=nt(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Oe(Wo(r)?Ci(r):[r],mn(e,1))},Nr.cond=function(t){var e=null==t?0:t.length,r=ss();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new zt(i);return[r(t[0]),t[1]]})):[],Zn((function(r){for(var n=-1;++n<e;){var i=t[n];if(_e(i[0],this,r))return _e(i[1],this,r)}}))},Nr.conforms=function(t){return function(t){var e=ka(t);return function(r){return an(r,t,e)}}(on(t,1))},Nr.constant=Qa,Nr.countBy=fo,Nr.create=function(t,e){var r=Fr(t);return null==e?r:en(r,e)},Nr.curry=function t(e,n,i){var s=Hi(e,8,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},Nr.curryRight=function t(e,n,i){var s=Hi(e,16,r,r,r,r,r,n=i?r:n);return s.placeholder=t.placeholder,s},Nr.debounce=ko,Nr.defaults=wa,Nr.defaultsDeep=Ma,Nr.defer=Oo,Nr.delay=Eo,Nr.difference=Ns,Nr.differenceBy=Fs,Nr.differenceWith=Vs,Nr.drop=function(t,e,n){var i=null==t?0:t.length;return i?ti(t,(e=n||e===r?1:fa(e))<0?0:e,i):[]},Nr.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?ti(t,0,(e=i-(e=n||e===r?1:fa(e)))<0?0:e):[]},Nr.dropRightWhile=function(t,e){return t&&t.length?ci(t,ss(e,3),!0,!0):[]},Nr.dropWhile=function(t,e){return t&&t.length?ci(t,ss(e,3),!0):[]},Nr.fill=function(t,e,n,i){var s=null==t?0:t.length;return s?(n&&"number"!=typeof n&&gs(t,e,n)&&(n=0,i=s),function(t,e,n,i){var s=t.length;for((n=fa(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:fa(i))<0&&(i+=s),i=n>i?0:pa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Nr.filter=function(t,e){return(Wo(t)?Ce:dn)(t,ss(e,3))},Nr.flatMap=function(t,e){return mn(_o(t,e),1)},Nr.flatMapDeep=function(t,e){return mn(_o(t,e),u)},Nr.flatMapDepth=function(t,e,n){return n=n===r?1:fa(n),mn(_o(t,e),n)},Nr.flatten=Ws,Nr.flattenDeep=function(t){return null!=t&&t.length?mn(t,u):[]},Nr.flattenDepth=function(t,e){return null!=t&&t.length?mn(t,e=e===r?1:fa(e)):[]},Nr.flip=function(t){return Hi(t,512)},Nr.flow=Ka,Nr.flowRight=th,Nr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Nr.functions=function(t){return null==t?[]:bn(t,ka(t))},Nr.functionsIn=function(t){return null==t?[]:bn(t,Oa(t))},Nr.groupBy=vo,Nr.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Nr.intersection=qs,Nr.intersectionBy=Js,Nr.intersectionWith=Gs,Nr.invert=Ca,Nr.invertBy=za,Nr.invokeMap=xo,Nr.iteratee=rh,Nr.keyBy=bo,Nr.keys=ka,Nr.keysIn=Oa,Nr.map=_o,Nr.mapKeys=function(t,e){var r={};return e=ss(e,3),vn(t,(function(t,n,i){rn(r,e(t,n,i),t)})),r},Nr.mapValues=function(t,e){var r={};return e=ss(e,3),vn(t,(function(t,n,i){rn(r,n,e(t,n,i))})),r},Nr.matches=function(t){return Nn(on(t,1))},Nr.matchesProperty=function(t,e){return Fn(t,on(e,1))},Nr.memoize=Bo,Nr.merge=Ea,Nr.mergeWith=Ba,Nr.method=nh,Nr.methodOf=ih,Nr.mixin=sh,Nr.negate=Ro,Nr.nthArg=function(t){return t=fa(t),Zn((function(e){return jn(e,t)}))},Nr.omit=Ra,Nr.omitBy=function(t,e){return La(t,Ro(ss(e)))},Nr.once=function(t){return Co(2,t)},Nr.orderBy=function(t,e,n,i){return null==t?[]:(Wo(e)||(e=null==e?[]:[e]),Wo(n=i?r:n)||(n=null==n?[]:[n]),Un(t,e,n))},Nr.over=ah,Nr.overArgs=Po,Nr.overEvery=hh,Nr.overSome=uh,Nr.partial=Lo,Nr.partialRight=Io,Nr.partition=wo,Nr.pick=Pa,Nr.pickBy=La,Nr.property=ch,Nr.propertyOf=function(t){return function(e){return null==t?r:_n(t,e)}},Nr.pull=Hs,Nr.pullAll=Xs,Nr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Dn(t,e,ss(r,2)):t},Nr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Dn(t,e,r,n):t},Nr.pullAt=Ys,Nr.range=lh,Nr.rangeRight=fh,Nr.rearg=No,Nr.reject=function(t,e){return(Wo(t)?Ce:dn)(t,Ro(ss(e,3)))},Nr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],s=t.length;for(e=ss(e,3);++n<s;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return qn(t,i),r},Nr.rest=function(t,e){if("function"!=typeof t)throw new zt(i);return Zn(t,e=e===r?e:fa(e))},Nr.reverse=$s,Nr.sampleSize=function(t,e,n){return e=(n?gs(t,e,n):e===r)?1:fa(e),(Wo(t)?Xr:Xn)(t,e)},Nr.set=function(t,e,r){return null==t?t:Yn(t,e,r)},Nr.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Yn(t,e,n,i)},Nr.shuffle=function(t){return(Wo(t)?Yr:Kn)(t)},Nr.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&gs(t,e,n)?(e=0,n=i):(e=null==e?0:fa(e),n=n===r?i:fa(n)),ti(t,e,n)):[]},Nr.sortBy=Mo,Nr.sortedUniq=function(t){return t&&t.length?ii(t):[]},Nr.sortedUniqBy=function(t,e){return t&&t.length?ii(t,ss(e,2)):[]},Nr.split=function(t,e,n){return n&&"number"!=typeof n&&gs(t,e,n)&&(e=n=r),(n=n===r?f:n>>>0)?(t=ga(t))&&("string"==typeof e||null!=e&&!na(e))&&!(e=oi(e))&&rr(t)?vi(hr(t),0,n):t.split(e,n):[]},Nr.spread=function(t,e){if("function"!=typeof t)throw new zt(i);return e=null==e?0:mr(fa(e),0),Zn((function(r){var n=r[e],i=vi(r,0,e);return n&&Oe(i,n),_e(t,this,i)}))},Nr.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Nr.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===r?1:fa(e))<0?0:e):[]},Nr.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?ti(t,(e=i-(e=n||e===r?1:fa(e)))<0?0:e,i):[]},Nr.takeRightWhile=function(t,e){return t&&t.length?ci(t,ss(e,3),!1,!0):[]},Nr.takeWhile=function(t,e){return t&&t.length?ci(t,ss(e,3)):[]},Nr.tap=function(t,e){return e(t),t},Nr.throttle=function(t,e,r){var n=!0,s=!0;if("function"!=typeof t)throw new zt(i);return Qo(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),ko(t,e,{leading:n,maxWait:e,trailing:s})},Nr.thru=co,Nr.toArray=ca,Nr.toPairs=Ia,Nr.toPairsIn=Na,Nr.toPath=function(t){return Wo(t)?ke(t,Ps):oa(t)?[t]:Ci(Rs(ga(t)))},Nr.toPlainObject=ma,Nr.transform=function(t,e,r){var n=Wo(t),i=n||Go(t)||aa(t);if(e=ss(e,4),null==r){var s=t&&t.constructor;r=i?n?new s:[]:Qo(t)&&Xo(s)?Fr(qt(t)):{}}return(i?Me:vn)(t,(function(t,n,i){return e(r,t,n,i)})),r},Nr.unary=function(t){return So(t,1)},Nr.union=Qs,Nr.unionBy=Ks,Nr.unionWith=to,Nr.uniq=function(t){return t&&t.length?ai(t):[]},Nr.uniqBy=function(t,e){return t&&t.length?ai(t,ss(e,2)):[]},Nr.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?ai(t,r,e):[]},Nr.unset=function(t,e){return null==t||hi(t,e)},Nr.unzip=eo,Nr.unzipWith=ro,Nr.update=function(t,e,r){return null==t?t:ui(t,e,mi(r))},Nr.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ui(t,e,mi(n),i)},Nr.values=Fa,Nr.valuesIn=function(t){return null==t?[]:He(t,Oa(t))},Nr.without=no,Nr.words=Xa,Nr.wrap=function(t,e){return Lo(mi(e),t)},Nr.xor=io,Nr.xorBy=so,Nr.xorWith=oo,Nr.zip=ao,Nr.zipObject=function(t,e){return pi(t||[],e||[],Qr)},Nr.zipObjectDeep=function(t,e){return pi(t||[],e||[],Yn)},Nr.zipWith=ho,Nr.entries=Ia,Nr.entriesIn=Na,Nr.extend=va,Nr.extendWith=xa,sh(Nr,Nr),Nr.add=gh,Nr.attempt=Ya,Nr.camelCase=Va,Nr.capitalize=ja,Nr.ceil=yh,Nr.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=da(n))==n?n:0),e!==r&&(e=(e=da(e))==e?e:0),sn(da(t),e,n)},Nr.clone=function(t){return on(t,4)},Nr.cloneDeep=function(t){return on(t,5)},Nr.cloneDeepWith=function(t,e){return on(t,5,e="function"==typeof e?e:r)},Nr.cloneWith=function(t,e){return on(t,4,e="function"==typeof e?e:r)},Nr.conformsTo=function(t,e){return null==e||an(t,e,ka(e))},Nr.deburr=Ua,Nr.defaultTo=function(t,e){return null==t||t!=t?e:t},Nr.divide=vh,Nr.endsWith=function(t,e,n){t=ga(t),e=oi(e);var i=t.length,s=n=n===r?i:sn(fa(n),0,i);return(n-=e.length)>=0&&t.slice(n,s)==e},Nr.eq=Fo,Nr.escape=function(t){return(t=ga(t))&&Z.test(t)?t.replace(J,tr):t},Nr.escapeRegExp=function(t){return(t=ga(t))&&et.test(t)?t.replace(tt,"\\$&"):t},Nr.every=function(t,e,n){var i=Wo(t)?Se:fn;return n&&gs(t,e,n)&&(e=r),i(t,ss(e,3))},Nr.find=po,Nr.findIndex=js,Nr.findKey=function(t,e){return Le(t,ss(e,3),vn)},Nr.findLast=mo,Nr.findLastIndex=Us,Nr.findLastKey=function(t,e){return Le(t,ss(e,3),xn)},Nr.floor=xh,Nr.forEach=go,Nr.forEachRight=yo,Nr.forIn=function(t,e){return null==t?t:gn(t,ss(e,3),Oa)},Nr.forInRight=function(t,e){return null==t?t:yn(t,ss(e,3),Oa)},Nr.forOwn=function(t,e){return t&&vn(t,ss(e,3))},Nr.forOwnRight=function(t,e){return t&&xn(t,ss(e,3))},Nr.get=Aa,Nr.gt=Vo,Nr.gte=jo,Nr.has=function(t,e){return null!=t&&fs(t,e,Sn)},Nr.hasIn=Sa,Nr.head=Ds,Nr.identity=eh,Nr.includes=function(t,e,r,n){t=qo(t)?t:Fa(t),r=r&&!n?fa(r):0;var i=t.length;return r<0&&(r=mr(i+r,0)),sa(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Ne(t,e,r)>-1},Nr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:fa(r);return i<0&&(i=mr(n+i,0)),Ne(t,e,i)},Nr.inRange=function(t,e,n){return e=la(e),n===r?(n=e,e=0):n=la(n),function(t,e,r){return t>=gr(e,r)&&t<mr(e,r)}(t=da(t),e,n)},Nr.invoke=Ta,Nr.isArguments=Uo,Nr.isArray=Wo,Nr.isArrayBuffer=Do,Nr.isArrayLike=qo,Nr.isArrayLikeObject=Jo,Nr.isBoolean=function(t){return!0===t||!1===t||Ko(t)&&Mn(t)==g},Nr.isBuffer=Go,Nr.isDate=Zo,Nr.isElement=function(t){return Ko(t)&&1===t.nodeType&&!ra(t)},Nr.isEmpty=function(t){if(null==t)return!0;if(qo(t)&&(Wo(t)||"string"==typeof t||"function"==typeof t.splice||Go(t)||aa(t)||Uo(t)))return!t.length;var e=ls(t);if(e==_||e==C)return!t.size;if(bs(t))return!Pn(t).length;for(var r in t)if(Rt.call(t,r))return!1;return!0},Nr.isEqual=function(t,e){return On(t,e)},Nr.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?On(t,e,r,n):!!i},Nr.isError=Ho,Nr.isFinite=function(t){return"number"==typeof t&&fr(t)},Nr.isFunction=Xo,Nr.isInteger=Yo,Nr.isLength=$o,Nr.isMap=ta,Nr.isMatch=function(t,e){return t===e||En(t,e,as(e))},Nr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,En(t,e,as(e),n)},Nr.isNaN=function(t){return ea(t)&&t!=+t},Nr.isNative=function(t){if(xs(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Bn(t)},Nr.isNil=function(t){return null==t},Nr.isNull=function(t){return null===t},Nr.isNumber=ea,Nr.isObject=Qo,Nr.isObjectLike=Ko,Nr.isPlainObject=ra,Nr.isRegExp=na,Nr.isSafeInteger=function(t){return Yo(t)&&t>=-9007199254740991&&t<=c},Nr.isSet=ia,Nr.isString=sa,Nr.isSymbol=oa,Nr.isTypedArray=aa,Nr.isUndefined=function(t){return t===r},Nr.isWeakMap=function(t){return Ko(t)&&ls(t)==k},Nr.isWeakSet=function(t){return Ko(t)&&"[object WeakSet]"==Mn(t)},Nr.join=function(t,e){return null==t?"":pr.call(t,e)},Nr.kebabCase=Wa,Nr.last=Zs,Nr.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var s=i;return n!==r&&(s=(s=fa(n))<0?mr(i+s,0):gr(s,i-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,s):Ie(t,Ve,s,!0)},Nr.lowerCase=Da,Nr.lowerFirst=qa,Nr.lt=ha,Nr.lte=ua,Nr.max=function(t){return t&&t.length?pn(t,eh,An):r},Nr.maxBy=function(t,e){return t&&t.length?pn(t,ss(e,2),An):r},Nr.mean=function(t){return je(t,eh)},Nr.meanBy=function(t,e){return je(t,ss(e,2))},Nr.min=function(t){return t&&t.length?pn(t,eh,Ln):r},Nr.minBy=function(t,e){return t&&t.length?pn(t,ss(e,2),Ln):r},Nr.stubArray=ph,Nr.stubFalse=dh,Nr.stubObject=function(){return{}},Nr.stubString=function(){return""},Nr.stubTrue=function(){return!0},Nr.multiply=bh,Nr.nth=function(t,e){return t&&t.length?jn(t,fa(e)):r},Nr.noConflict=function(){return ue._===this&&(ue._=Ft),this},Nr.noop=oh,Nr.now=Ao,Nr.pad=function(t,e,r){t=ga(t);var n=(e=fa(e))?ar(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Ui(de(i),r)+t+Ui(pe(i),r)},Nr.padEnd=function(t,e,r){t=ga(t);var n=(e=fa(e))?ar(t):0;return e&&n<e?t+Ui(e-n,r):t},Nr.padStart=function(t,e,r){t=ga(t);var n=(e=fa(e))?ar(t):0;return e&&n<e?Ui(e-n,r)+t:t},Nr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),vr(ga(t).replace(rt,""),e||0)},Nr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&gs(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=la(t),e===r?(e=t,t=0):e=la(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var s=xr();return gr(t+s*(e-t+se("1e-"+((s+"").length-1))),e)}return Jn(t,e)},Nr.reduce=function(t,e,r){var n=Wo(t)?Ee:De,i=arguments.length<3;return n(t,ss(e,4),r,i,cn)},Nr.reduceRight=function(t,e,r){var n=Wo(t)?Be:De,i=arguments.length<3;return n(t,ss(e,4),r,i,ln)},Nr.repeat=function(t,e,n){return e=(n?gs(t,e,n):e===r)?1:fa(e),Gn(ga(t),e)},Nr.replace=function(){var t=arguments,e=ga(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Nr.result=function(t,e,n){var i=-1,s=(e=gi(e,t)).length;for(s||(s=1,t=r);++i<s;){var o=null==t?r:t[Ps(e[i])];o===r&&(i=s,o=n),t=Xo(o)?o.call(t):o}return t},Nr.round=_h,Nr.runInContext=t,Nr.sample=function(t){return(Wo(t)?Hr:Hn)(t)},Nr.size=function(t){if(null==t)return 0;if(qo(t))return sa(t)?ar(t):t.length;var e=ls(t);return e==_||e==C?t.size:Pn(t).length},Nr.snakeCase=Ja,Nr.some=function(t,e,n){var i=Wo(t)?Re:ei;return n&&gs(t,e,n)&&(e=r),i(t,ss(e,3))},Nr.sortedIndex=function(t,e){return ri(t,e)},Nr.sortedIndexBy=function(t,e,r){return ni(t,e,ss(r,2))},Nr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=ri(t,e);if(n<r&&Fo(t[n],e))return n}return-1},Nr.sortedLastIndex=function(t,e){return ri(t,e,!0)},Nr.sortedLastIndexBy=function(t,e,r){return ni(t,e,ss(r,2),!0)},Nr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=ri(t,e,!0)-1;if(Fo(t[r],e))return r}return-1},Nr.startCase=Ga,Nr.startsWith=function(t,e,r){return t=ga(t),r=null==r?0:sn(fa(r),0,t.length),e=oi(e),t.slice(r,r+e.length)==e},Nr.subtract=wh,Nr.sum=function(t){return t&&t.length?qe(t,eh):0},Nr.sumBy=function(t,e){return t&&t.length?qe(t,ss(e,2)):0},Nr.template=function(t,e,n){var i=Nr.templateSettings;n&&gs(t,e,n)&&(e=r),t=ga(t),e=xa({},e,i,Xi);var s,o,a=xa({},e.imports,i.imports,Xi),h=ka(a),u=He(a,h),c=0,l=e.interpolate||vt,f="__p += '",p=St((e.escape||vt).source+"|"+l.source+"|"+(l===Y?ct:vt).source+"|"+(e.evaluate||vt).source+"|$","g"),d="//# sourceURL="+(Rt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ee+"]")+"\n";t.replace(p,(function(e,r,n,i,a,h){return n||(n=i),f+=t.slice(c,h).replace(xt,er),r&&(s=!0,f+="' +\n__e("+r+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=h+e.length,e})),f+="';\n";var m=Rt.call(e,"variable")&&e.variable;if(m){if(ht.test(m))throw new _t("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(o?f.replace(U,""):f).replace(W,"$1").replace(D,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Ya((function(){return wt(h,d+"return "+f).apply(r,u)}));if(g.source=f,Ho(g))throw g;return g},Nr.times=function(t,e){if((t=fa(t))<1||t>c)return[];var r=f,n=gr(t,f);e=ss(e),t-=f;for(var i=Je(n,e);++r<t;)e(r);return i},Nr.toFinite=la,Nr.toInteger=fa,Nr.toLength=pa,Nr.toLower=function(t){return ga(t).toLowerCase()},Nr.toNumber=da,Nr.toSafeInteger=function(t){return t?sn(fa(t),-9007199254740991,c):0===t?t:0},Nr.toString=ga,Nr.toUpper=function(t){return ga(t).toUpperCase()},Nr.trim=function(t,e,n){if((t=ga(t))&&(n||e===r))return Ge(t);if(!t||!(e=oi(e)))return t;var i=hr(t),s=hr(e);return vi(i,Ye(i,s),$e(i,s)+1).join("")},Nr.trimEnd=function(t,e,n){if((t=ga(t))&&(n||e===r))return t.slice(0,ur(t)+1);if(!t||!(e=oi(e)))return t;var i=hr(t);return vi(i,0,$e(i,hr(e))+1).join("")},Nr.trimStart=function(t,e,n){if((t=ga(t))&&(n||e===r))return t.replace(rt,"");if(!t||!(e=oi(e)))return t;var i=hr(t);return vi(i,Ye(i,hr(e))).join("")},Nr.truncate=function(t,e){var n=30,i="...";if(Qo(e)){var s="separator"in e?e.separator:s;n="length"in e?fa(e.length):n,i="omission"in e?oi(e.omission):i}var o=(t=ga(t)).length;if(rr(t)){var a=hr(t);o=a.length}if(n>=o)return t;var h=n-ar(i);if(h<1)return i;var u=a?vi(a,0,h).join(""):t.slice(0,h);if(s===r)return u+i;if(a&&(h+=u.length-h),na(s)){if(t.slice(h).search(s)){var c,l=u;for(s.global||(s=St(s.source,ga(lt.exec(s))+"g")),s.lastIndex=0;c=s.exec(l);)var f=c.index;u=u.slice(0,f===r?h:f)}}else if(t.indexOf(oi(s),h)!=h){var p=u.lastIndexOf(s);p>-1&&(u=u.slice(0,p))}return u+i},Nr.unescape=function(t){return(t=ga(t))&&G.test(t)?t.replace(q,cr):t},Nr.uniqueId=function(t){var e=++Pt;return ga(t)+e},Nr.upperCase=Za,Nr.upperFirst=Ha,Nr.each=go,Nr.eachRight=yo,Nr.first=Ds,sh(Nr,(mh={},vn(Nr,(function(t,e){Rt.call(Nr.prototype,e)||(mh[e]=t)})),mh),{chain:!1}),Nr.VERSION="4.17.21",Me(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Nr[t].placeholder=Nr})),Me(["drop","take"],(function(t,e){Ur.prototype[t]=function(n){n=n===r?1:mr(fa(n),0);var i=this.__filtered__&&!e?new Ur(this):this.clone();return i.__filtered__?i.__takeCount__=gr(n,i.__takeCount__):i.__views__.push({size:gr(n,f),type:t+(i.__dir__<0?"Right":"")}),i},Ur.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Me(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Ur.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ss(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),Me(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Ur.prototype[t]=function(){return this[r](1).value()[0]}})),Me(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Ur.prototype[t]=function(){return this.__filtered__?new Ur(this):this[r](1)}})),Ur.prototype.compact=function(){return this.filter(eh)},Ur.prototype.find=function(t){return this.filter(t).head()},Ur.prototype.findLast=function(t){return this.reverse().find(t)},Ur.prototype.invokeMap=Zn((function(t,e){return"function"==typeof t?new Ur(this):this.map((function(r){return Tn(r,t,e)}))})),Ur.prototype.reject=function(t){return this.filter(Ro(ss(t)))},Ur.prototype.slice=function(t,e){t=fa(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Ur(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=fa(e))<0?n.dropRight(-e):n.take(e-t)),n)},Ur.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ur.prototype.toArray=function(){return this.take(f)},vn(Ur.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),s=Nr[i?"take"+("last"==e?"Right":""):e],o=i||/^find/.test(e);s&&(Nr.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,h=e instanceof Ur,u=a[0],c=h||Wo(e),l=function(t){var e=s.apply(Nr,Oe([t],a));return i&&f?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(h=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=o&&!f,m=h&&!p;if(!o&&c){e=m?e:new Ur(this);var g=t.apply(e,a);return g.__actions__.push({func:co,args:[l],thisArg:r}),new jr(g,f)}return d&&m?t.apply(this,a):(g=this.thru(l),d?i?g.value()[0]:g.value():g)})})),Me(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Tt[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Nr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Wo(i)?i:[],t)}return this[r]((function(r){return e.apply(Wo(r)?r:[],t)}))}})),vn(Ur.prototype,(function(t,e){var r=Nr[e];if(r){var n=r.name+"";Rt.call(Tr,n)||(Tr[n]=[]),Tr[n].push({name:e,func:r})}})),Tr[Ni(r,2).name]=[{name:"wrapper",func:r}],Ur.prototype.clone=function(){var t=new Ur(this.__wrapped__);return t.__actions__=Ci(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ci(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ci(this.__views__),t},Ur.prototype.reverse=function(){if(this.__filtered__){var t=new Ur(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ur.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Wo(t),n=e<0,i=r?t.length:0,s=function(t,e,r){for(var n=-1,i=r.length;++n<i;){var s=r[n],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=gr(e,t+o);break;case"takeRight":t=mr(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=s.start,a=s.end,h=a-o,u=n?a:o-1,c=this.__iteratees__,l=c.length,f=0,p=gr(h,this.__takeCount__);if(!r||!n&&i==h&&p==h)return li(t,this.__actions__);var d=[];t:for(;h--&&f<p;){for(var m=-1,g=t[u+=e];++m<l;){var y=c[m],v=y.iteratee,x=y.type,b=v(g);if(2==x)g=b;else if(!b){if(1==x)continue t;break t}}d[f++]=g}return d},Nr.prototype.at=lo,Nr.prototype.chain=function(){return uo(this)},Nr.prototype.commit=function(){return new jr(this.value(),this.__chain__)},Nr.prototype.next=function(){this.__values__===r&&(this.__values__=ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Nr.prototype.plant=function(t){for(var e,n=this;n instanceof Vr;){var i=Is(n);i.__index__=0,i.__values__=r,e?s.__wrapped__=i:e=i;var s=i;n=n.__wrapped__}return s.__wrapped__=t,e},Nr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Ur){var e=t;return this.__actions__.length&&(e=new Ur(this)),(e=e.reverse()).__actions__.push({func:co,args:[$s],thisArg:r}),new jr(e,this.__chain__)}return this.thru($s)},Nr.prototype.toJSON=Nr.prototype.valueOf=Nr.prototype.value=function(){return li(this.__wrapped__,this.__actions__)},Nr.prototype.first=Nr.prototype.head,Qt&&(Nr.prototype[Qt]=function(){return this}),Nr}();le?((le.exports=lr)._=lr,ce._=lr):ue._=lr}).call(n)}({get exports(){return qr},set exports(t){qr=t}},qr);const Jr=new K(0,1,0);class Gr{constructor(t){if(this._vertices=[],this._norm=Jr.clone(),this._rotation=new Q,this._scale=new K(1,1,1),this._translation=new K(0,0,0),this._transform=(new Tt).compose(this._translation,this._rotation,this._scale),void 0!==t){if(t.vertices.length%2!=0)throw new Error("Invalid number of vertex components in cross section");for(let e=0;e<t.vertices.length-1;e+=2)this.addVertex(new K(t.vertices[e],0,t.vertices[e+1]))}}getVertices(){return this._vertices}getNorm(){return this._norm}getTranslation(){return this._translation}getVerticesLocal(){const t=(new Tt).compose(this._translation,this._rotation,this._scale).invert(),e=[];for(let r=0;r<this._vertices.length;r++){const n=this._vertices[r].clone().applyMatrix4(t);e.push(new E(n.x,n.z))}return e}setVertexLocal(t,e){if(t<0||t>this._vertices.length)throw new Error("Vertex index out of range");const r=(new Tt).compose(this._translation,this._rotation,this._scale),n=this._vertices[t],i=e;i.applyMatrix4(r),n.copy(i)}scaleVertex(t,e){if(t<0||t>this._vertices.length)throw new Error("Vertex index out of range");const r=(new Tt).compose(this._translation,this._rotation,this._scale),n=(new Tt).copy(r).invert(),i=this._vertices[t],s=i.clone().applyMatrix4(n);s.multiplyScalar(e),s.applyMatrix4(r),i.copy(s)}copyTransform(t){this._norm=t._norm.clone(),this._rotation=t._rotation.clone(),this._scale=t._scale.clone(),this._translation=t._translation.clone()}setTranslation(t){this._translation=t}setNorm(t){this._norm=t}addVertex(t){this._vertices.push(t)}static createFromShape(t){const e=new Gr,r=new Nr(t).getAttribute("position");for(let t=0;t<r.count;t++)e._vertices.push(new K(r.getX(t),0,r.getY(t)));return e}rotate(t){let e=(new Tt).compose(this._translation,this._rotation,this._scale);const r=(new Tt).copy(e).invert();this._rotation.multiply(t),e=(new Tt).compose(this._translation,this._rotation,this._scale);for(let t=0;t<this._vertices.length;t++){const n=this._vertices[t],i=n.clone().applyMatrix4(r);i.applyMatrix4(e),n.copy(i)}this._norm.applyQuaternion(t)}scale(t){"number"==typeof t&&(t=new E(t,t));const e=(new Tt).compose(this._translation,this._rotation,this._scale),r=(new Tt).copy(e).invert();for(let n=0;n<this._vertices.length;n++){const i=this._vertices[n],s=(new K).copy(i).applyMatrix4(r);s.x*=t.x,s.z*=t.y,s.applyMatrix4(e),i.copy(s)}this._scale.multiply(new K(t.x,1,t.y))}translate(t){for(let e=0;e<this._vertices.length;e++)this._vertices[e].add(t);this._translation.add(t)}}const Zr=5121,Hr=5123;class Xr{constructor(){}parse(t,e,r){(r=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],forcePowerOfTwoTextures:!1,includeCustomExtensions:!1,verbose:!1},r)).animations&&r.animations.length>0&&(r.trs=!0);const n={asset:{version:"2.0",generator:"GLTFExporter"}};let i=0;const s=[],o=new Map,a={},h={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},u=new Map;let c=0;function l(t){return u.has(t)||u.set(t,c++),u.get(t)}function f(t,e){return t.length===e.length&&t.every((function(t,r){return t===e[r]}))}function p(t){return 4*Math.ceil(t/4)}function d(t,e){e=e||0;const r=p(t.byteLength);if(r!==t.byteLength){const n=new Uint8Array(r);if(n.set(new Uint8Array(t)),0!==e)for(let i=t.byteLength;i<r;i++)n[i]=e;return n.buffer}return t}function m(t,e){if(0!==Object.keys(t.userData).length)try{const n=JSON.parse(JSON.stringify(t.userData));if(r.includeCustomExtensions&&n.gltfExtensions){void 0===e.extensions&&(e.extensions={});for(const t in n.gltfExtensions)e.extensions[t]=n.gltfExtensions[t],a[t]=!0;delete n.gltfExtensions}Object.keys(n).length>0&&(e.extras=n)}catch(e){r.verbose&&console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error")}}function g(t,e,o,a){let h;if(t.array.constructor===Float32Array)h=5126;else if(t.array.constructor===Uint32Array)h=5125;else if(t.array.constructor===Uint16Array)h=Hr;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");h=Zr}if(void 0===o&&(o=0),void 0===a&&(a=t.count),r.truncateDrawRange&&void 0!==e&&null===e.index){const r=o+a,n=e.drawRange.count===1/0?t.count:e.drawRange.start+e.drawRange.count;o=Math.max(o,e.drawRange.start),(a=Math.min(r,n)-o)<0&&(a=0)}if(0===a)return null;const u=function(t,e,r){const n={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+r;i++)for(let e=0;e<t.itemSize;e++){const r=t.array[i*t.itemSize+e];n.min[e]=Math.min(n.min[e],r),n.max[e]=Math.max(n.max[e],r)}return n}(t,o,a);let c=0;void 0!==e&&(c=t===e.index?34963:34962);const l=function(t,e,r,o,a){let h;n.bufferViews||(n.bufferViews=[]),h=e===Zr?1:e===Hr?2:4;const u=p(o*t.itemSize*h),c=new DataView(new ArrayBuffer(u));let l=0;for(let n=r;n<r+o;n++)for(let r=0;r<t.itemSize;r++){let i=0;t.itemSize>4?i=t.array[n*t.itemSize+r]:0===r?i=t.getX(n):1===r?i=t.getY(n):2===r?i=t.getZ(n):3===r&&(i=t.getW(n)),5126===e?c.setFloat32(l,i,!0):5125===e?c.setUint32(l,i,!0):e===Hr?c.setUint16(l,i,!0):e===Zr&&c.setUint8(l,i),l+=h}const f={buffer:(d=c.buffer,n.buffers||(n.buffers=[{byteLength:0,uri:""}]),s.push(Buffer.from(d)),0),byteOffset:i,byteLength:u};var d;return void 0!==a&&(f.target=a),34962===a&&(f.byteStride=t.itemSize*h),i+=u,n.bufferViews.push(f),{id:n.bufferViews.length-1,byteLength:0}}(t,h,o,a,c),f={bufferView:l.id,byteOffset:l.byteOffset,componentType:h,count:a,max:u.max,min:u.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(f.normalized=!0),n.accessors||(n.accessors=[]),n.accessors.push(f),n.accessors.length-1}function y(t){if(h.materials.has(t))return h.materials.get(t);if(t instanceof qe)return r.verbose&&console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const e={pbrMetallicRoughness:{}};t instanceof pe?(e.extensions={KHR_materials_unlit:{}},a.KHR_materials_unlit=!0):t instanceof Vr||r.verbose&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let i=[];t instanceof Vr&&(i=t.color.toArray().concat([t.opacity])),f(i,[1,1,1,1])||(e.pbrMetallicRoughness.baseColorFactor=i),t instanceof Vr?(e.pbrMetallicRoughness.metallicFactor=t.metalness,e.pbrMetallicRoughness.roughnessFactor=t.roughness):t instanceof pe?(e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9):(e.pbrMetallicRoughness.metallicFactor=.5,e.pbrMetallicRoughness.roughnessFactor=.5),2===t.side&&(e.doubleSided=!0),""!==t.name&&(e.name=t.name),m(t,e),n.materials.push(e);const s=n.materials.length-1;return h.materials.set(t,s),s}function v(t){var e;const i=[t.geometry.uuid];if(Array.isArray(t.material))for(var s=0,o=t.material.length;s<o;s++)i.push(t.material[s].uuid);else i.push(t.material.uuid);const a=i.join(":");if(h.meshes.has(a))return h.meshes.get(a);const u=t.geometry,c={},f={},p=[],d=[],v={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},x=u.getAttribute("normal");let b;for(var _ in void 0===x||function(t){if(h.attributesNormalized.has(t))return!1;const e=new K;for(let r=0,n=t.count;r<n;r++)if(Math.abs(e.fromArray(t.array,3*r).length()-1)>5e-4)return!1;return!0}(x)||(r.verbose&&console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",function(t){if(h.attributesNormalized.has(t))return h.attributesNormalized.get(t);const e=t.clone(),r=new K;for(let t=0,n=e.count;t<n;t++)r.fromArray(e.array,3*t),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),r.toArray(e.array,3*t);return h.attributesNormalized.set(t,e),e}(x))),u.attributes){if("morph"===_.substr(0,5))continue;var w=u.attributes[_];if(_=v[_]||_.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(_)||(_="_"+_),h.attributes.has(l(w))){f[_]=h.attributes.get(l(w));continue}b=null;const t=w.array;"JOINTS_0"!==_||t instanceof Uint16Array||t instanceof Uint8Array||(r.verbose&&console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),b=new ge(new Uint16Array(t),w.itemSize,w.normalized));const e=g(b||w,u);null!==e&&(f[_]=e,h.attributes.set(l(w),e))}if(void 0!==x&&u.setAttribute("normal",x),0===Object.keys(f).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){const e=[],n=[],i={};if(void 0!==t.morphTargetDictionary)for(const e in t.morphTargetDictionary)i[t.morphTargetDictionary[e]]=e;for(s=0;s<t.morphTargetInfluences.length;++s){const o={};let a=!1;for(var _ in u.morphAttributes){if("position"!==_&&"normal"!==_){a||(r.verbose&&console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),a=!0);continue}w=u.morphAttributes[_][s];const t=_.toUpperCase(),e=u.attributes[_];if(h.attributes.has(l(w))){o[t]=h.attributes.get(l(w));continue}const n=w.clone();if(!u.morphTargetsRelative)for(let t=0,r=w.count;t<r;t++)n.setXYZ(t,w.getX(t)-e.getX(t),w.getY(t)-e.getY(t),w.getZ(t)-e.getZ(t));o[t]=g(n,u),h.attributes.set(l(e),o[t])}d.push(o),e.push(t.morphTargetInfluences[s]),void 0!==t.morphTargetDictionary&&n.push(i[s])}c.weights=e,n.length>0&&(c.extras={},c.extras.targetNames=n)}const M=Array.isArray(t.material);if(M&&0===u.groups.length)return null;const A=M?t.material:[t.material],S=M?u.groups:[{materialIndex:0,start:void 0,count:void 0}];s=0;for(var C=S.length;s<C;s++){const t={mode:4,attributes:f};if(m(u,t),d.length>0&&(t.targets=d),null!==u.index){const e=l(u.index);let r="";e&&(r=e.toString()),void 0===S[s].start&&void 0===S[s].count||(r+=":"+S[s].start+":"+S[s].count),h.attributes.has(e)?t.indices=h.attributes.get(e):(t.indices=g(u.index,u,S[s].start,S[s].count),h.attributes.set(e,t.indices)),null===t.indices&&delete t.indices}if(void 0!==S[s].materialIndex){if(Array.isArray(A))var z=y(A[null!==(e=S[s].materialIndex)&&void 0!==e?e:0])}else z=y(A[0]);null!==z&&(t.material=z),p.push(t)}c.primitives=p,n.meshes||(n.meshes=[]),n.meshes.push(c);const T=n.meshes.length-1;return h.meshes.set(a,T),T}function x(t){n.nodes||(n.nodes=[]);const e={};if(r.trs){const r=t.quaternion.toArray(),n=t.position.toArray(),i=t.scale.toArray();f(r,[0,0,0,1])||(e.rotation=r),f(n,[0,0,0])||(e.translation=n),f(i,[1,1,1])||(e.scale=i)}else t.matrixAutoUpdate&&t.updateMatrix(),f(t.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(e.matrix=t.matrix.elements);if(""!==t.name&&(e.name=String(t.name)),m(t,e),t instanceof Ue){const r=v(t);null!==r&&(e.mesh=r)}if(t.children.length>0){const n=[];for(let e=0,i=t.children.length;e<i;e++){const i=t.children[e];if(i.visible||!1===r.onlyVisible){const t=x(i);null!==t&&n.push(t)}}n.length>0&&(e.children=n)}n.nodes.push(e);const i=n.nodes.length-1;return o.set(t,i),i}!function(t){!function(t){const e=new Je;e.name="AuxScene",e.children.push(t),function(t){n.scenes||(n.scenes=[],n.scene=0);const e={};""!==t.name&&(e.name=t.name),n.scenes.push(e);const i=[];for(let e=0,n=t.children.length;e<n;e++){const n=t.children[e];if(n.visible||!1===r.onlyVisible){const t=x(n);null!==t&&i.push(t)}}i.length>0&&(e.nodes=i),m(t,e)}(e)}(t)}(t),Promise.all([]).then((function(){const t=Buffer.concat(s),i=Object.keys(a);if(i.length>0&&(n.extensionsUsed=i),n.buffers&&n.buffers.length>0&&(n.buffers[0].byteLength=t.length),!0===r.binary){const r=12,i=1179937895,s=2,a=8,h=1313821514,u=5130562,c=d(t),l=new DataView(new ArrayBuffer(a));l.setUint32(0,c.byteLength,!0),l.setUint32(4,u,!0);const f=d((o=JSON.stringify(n),Buffer.from(o)),32),p=new DataView(new ArrayBuffer(a));p.setUint32(0,f.byteLength,!0),p.setUint32(4,h,!0);const m=new ArrayBuffer(r),g=new DataView(m);g.setUint32(0,i,!0),g.setUint32(4,s,!0);const y=r+p.byteLength+f.byteLength+l.byteLength+c.byteLength;g.setUint32(8,y,!0);const v=Buffer.concat([Buffer.from(m),Buffer.from(p.buffer),Buffer.from(f),Buffer.from(l.buffer),Buffer.from(c)]);e(v)}else if(n.buffers&&n.buffers.length>0){const r=t.toString("base64");n.buffers[0].uri="data:application/octet-stream;base64,"+r,e(n)}else e(n);var o}))}}class Yr{constructor(){this._vertices=[],this._triangles=[],this._colors=[],this._activeColor=new J}getColors(){return this._colors}getVertices(){return this._vertices}getTriangles(){return this._triangles}add(t){const e=this._vertices.length;this._vertices.push(...t._vertices),this._colors.push(...t._colors);for(let r=0;r<t._triangles.length;r++)this._triangles.push(new K(t._triangles[r].x+e,t._triangles[r].y+e,t._triangles[r].z+e));return this}clearActiveCrossSection(){return this._activeCrossSection=void 0,this}setCrossSection(t,e){e&&this.setColor(e),this._activeCrossSection=t,this._vertices.push(...t.getVertices());for(let e=0;e<t.getVertices().length;e++)this._colors[e]=this._activeColor.clone();return this}setColor(t){return this._activeColor=t,this}fromGeometry(t,e){this._vertices=[],this._colors=[],this._triangles=[];const r=t.getAttribute("position");t.getAttribute("colors");const n=t.getIndex();for(let t=0;t<r.count;t++)this._vertices.push(new K(r.getX(t),r.getY(t),r.getZ(t))),e?this._colors.push(e.clone()):this._colors.push(new J);if(n)for(let t=0;t<n.count;t++)this._triangles.push(new K(n.getX(t),n.getY(t),n.getZ(t)));return this._activeCrossSection=void 0,this}fill(){if(!this._activeCrossSection)throw new Error("GeometryData does not have an active cross section to translate.");const t=new ur(this._activeCrossSection.getVerticesLocal()),e=new Nr(t),r=this._activeCrossSection.getVertices(),n=qr.range(this._vertices.length-r.length,this._vertices.length),i=new Gr;for(let t=0;t<r.length;t++){const e=r[t].clone();i.addVertex(e),this._vertices.push(e),this._colors.push(this._colors[n[t]].clone())}i.copyTransform(this._activeCrossSection),this._activeCrossSection=i;const s=e.getIndex();if(s)for(let t=0;t<s.count;t++)this._triangles.push(new K(s.getX(t),s.getY(t),s.getZ(t)));return this}translate(t){if(!this._activeCrossSection)throw new Error("GeometryData does not have an active cross section to translate.");const e=new K;return"number"==typeof t?(e.copy(this._activeCrossSection.getNorm().normalize()),e.multiplyScalar(t)):e.copy(t),this._activeCrossSection.translate(e),this}scale(t){if(!this._activeCrossSection)throw new Error("GeometryData does not have an active cross section to scale");return this._activeCrossSection.scale(t),this}rotate(t){if(!this._activeCrossSection)throw new Error("GeometryData does not have an active cross section to rotate");return this._activeCrossSection.rotate(t),this}extrude(t){if(!this._activeCrossSection)throw new Error("GeometryData does not have an active cross section to extrude");const e=new Gr;let r=new K;"object"==typeof t?t instanceof K&&(r=t):"number"==typeof t&&(r.copy(this._activeCrossSection.getNorm()),r.multiplyScalar(t));const n=qr.range(this._vertices.length-this._activeCrossSection.getVertices().length,this._vertices.length),i=qr.range(this._vertices.length,this._vertices.length+this._activeCrossSection.getVertices().length);for(let t=0;t<n.length;t++){const i=new K;i.copy(this._vertices[n[t]]),i.add(r),this._vertices.push(i),e.addVertex(i),this._colors.push(this._colors[n[t]].clone())}e.copyTransform(this._activeCrossSection),e.setTranslation(e.getTranslation().add(r)),this._activeCrossSection=e;for(let t=0;t<n.length;t++)t===n.length-1?(this._triangles.push(new K(n[t],n[0],i[t])),this._triangles.push(new K(i[t],n[0],i[0]))):(this._triangles.push(new K(n[t],n[t+1],i[t])),this._triangles.push(new K(i[t],n[t+1],i[t+1])));return this}toGlTF(t=!1){const e=new Xr;return new Promise((r=>{e.parse(this.toMesh(),(t=>{r(t)}),{verbose:t})}))}toMesh(){if(0===this._vertices.length)throw new Error("Geometry data has no vertices");const t=new ze,e=[];for(let t=0;t<this._vertices.length;t++)e.push(...this._vertices[t].toArray());const r=[];for(let t=0;t<this._triangles.length;t++)r.push(...this._triangles[t].toArray());const n=[];for(let t=0;t<this._colors.length;t++)n.push(...this._colors[t].toArray());t.setIndex(r),t.setAttribute("position",new ge(new Float32Array(e),3)),t.setAttribute("color",new ge(new Float32Array(n),3)),t.computeVertexNormals();const i=new Vr({vertexColors:!0,side:2});return new Ue(t,i)}}class $r extends Yr{constructor(t,e){super(),this._totalLength=t,this._currentLength=0,this._bladeEdgeVertices=[],this._extrusionCurve=e}setEdgeCurve(t){return this._activeEdgeCurve=t,this}extrude(t){if(!this._activeCrossSection)throw new Error("BladeGeometry does not have an active cross section");if(!this._extrusionCurve)return super.extrude(t),this;this._currentLength+=t;const e=this._currentLength/this._totalLength;super.extrude(t);const r=this._extrusionCurve.getPoint(e).multiplyScalar(this._totalLength),n=new K(0,r.y,r.x),i=this._activeCrossSection.getTranslation(),s=(new K).subVectors(n,i);this.translate(s);const o=this._extrusionCurve.getTangent(e),a=new K(0,o.y,o.x),h=this._activeCrossSection.getNorm().normalize(),u=(new Q).setFromUnitVectors(h,a);return this.rotate(u),this}extrudeSection(t,e,r,n){this.setEdgeCurve(t);const i=r/e;let s=1;"number"==typeof n?s=1-n/e:n instanceof E&&(s=new E(1,1).sub(null==n?void 0:n.divideScalar(e)));for(let t=1;t<=e;t++)this.extrude(i),this.modifyEdgeVerts(i*t/r),n&&this.scale(s);return this}createTip(t,e,r=5){if(void 0===this._activeCrossSection)throw new Error("BladeGeometry does not have an active cross section");if("standard"===t)return this.extrude(e),this.scale(0),this;if("rounded"===t){const t=new ir(new E(1,0),new E(.7,.2),new E(0,1));let n=0;for(let i=0;i<r;i++)this.extrude(e/r),n+=e/r,i!==r-1?this.scale(t.getPoint(n/e).x):this.scale(0);return this}return"square"===t?(this.extrude(e),this.scale(new E(0,1)),this):"clip"===t?(this.extrude(e),this.rotate((new Q).setFromAxisAngle(new K(1,0,0),Math.PI/3)),this.scale(new E(0,1)),this):(this.extrude(e),this.scale(0),this)}modifyEdgeVerts(t){if(void 0===this._activeCrossSection)throw new Error("BladeGeometry does not have an active cross section");if(void 0===this._activeEdgeCurve)throw new Error("BladeGeometry does not have an active edge curve");const e=this._activeEdgeCurve.getPoint(t).x+1;return this._activeCrossSection.scale(new E(1,e)),this}setBladeCrossSection(t,e,r,n,i=!1){if(!i)return super.setCrossSection(t,r),this._bladeEdgeVertices=e,this;const s=[],o=[];for(let r=0;r<t.getVertices().length;r++)e.includes(r)?(o.push(s.length),o.push(s.length+1),s.push(t.getVertices()[r].clone())):(null==n?void 0:n.includes(r))&&s.push(t.getVertices()[r].clone()),s.push(t.getVertices()[r].clone());const a=[];for(let t=0;t<s.length;t++)a.push(s[t].x),a.push(s[t].z);const h=new Gr({vertices:a});return super.setCrossSection(h,r),this._bladeEdgeVertices=o,this}}$r.TIP_GEOMETRIES=["standard","rounded","square","clip"],e.BLADE_CROSS_SECTIONS=Dr,e.BladeGeometry=$r,e.CrossSection=Gr,e.Generator=b,e.GeometryData=Yr,e.SWORD_TEMPLATES=Wr,e.SwordGenerator=class extends b{constructor(t=!1){super(t)}async generate(t){t.seed&&this.setSeed(t.seed);const e=this.getSwordTemplate(t.template),r=new Yr;return this.buildBlade(r,e,t.bladeParams),this.buildGuard(r,e,t.guardParams),this.buildHandle(r,e,t.handleParams),this.buildPommel(r,e,t.pommelParams),"mesh"===t.output?r.toMesh():r.toGlTF(this.verbose)}getSwordTemplate(t){if(t){if("random"===t)return this.getRandomTemplate();const e=Wr[t];if(e)return e;throw new Error(`Invalid sword template '${t}'`)}return this.getRandomTemplate()}getBladeCrossSection(t){if(t){if("random"===t)return this.getRandomBladeCrossSection();const e=Dr[t];if(e)return e;throw new Error(`Invalid blade cross-section '${t}'`)}return this.getRandomBladeCrossSection()}getRandomTemplate(){const t=jr(this.prng,0,Object.keys(Wr).length-1),e=Object.keys(Wr)[t];return Wr[e]}getRandomBladeCrossSection(){const t=jr(this.prng,0,Object.keys(Dr).length-1),e=Object.keys(Dr)[t];return Dr[e]}randomTip(){const t=jr(this.prng,0,Object.keys($r.TIP_GEOMETRIES).length-1);return $r.TIP_GEOMETRIES[t]}buildBlade(t,e,r){var n,i,s,o,a,h,u,c,l,f,p,d;const m=null!==(n=null==r?void 0:r.color)&&void 0!==n?n:"rgb(128, 128, 128)";let g=(t=>t?"random"===t?this.randomTip():t:"standard")(null==r?void 0:r.tip),y=null!==(i=null==r?void 0:r.edgeScaleTolerance)&&void 0!==i?i:.1;const v=null!==(s=null==r?void 0:r.randomNumControlPoints)&&void 0!==s&&s,x=null!==(o=null==r?void 0:r.minSplineControlPoints)&&void 0!==o?o:2,b=null!==(a=null==r?void 0:r.maxSplineControlPoints)&&void 0!==a?a:7,_=null!==(h=null==r?void 0:r.evenSpacedBaseCPs)&&void 0!==h&&h;null==r||r.evenSpacedMidCPs,null==r||r.evenSpacedTipCPs;const w=null!==(u=null==r?void 0:r.baseSplineSamples)&&void 0!==u?u:8,M=null!==(c=null==r?void 0:r.baseSplineSamples)&&void 0!==c?c:4;null==r||r.baseSplineSamples;const A=null!==(l=null==r?void 0:r.baseSplineControlPoints)&&void 0!==l?l:7;null==r||r.baseSplineControlPoints,null==r||r.baseSplineControlPoints;const S=null!==(f=null==r?void 0:r.bladeBaseProportion)&&void 0!==f?f:.4,C=null!==(p=null==r?void 0:r.bladeMidProportion)&&void 0!==p?p:.45;let z=this.getBladeCrossSection(null==r?void 0:r.crossSection);if(S+C>1)throw new Error("Blade middle and base section proportions larger than 1.0");const T=Ur(this.prng,e.minBladeLength,e.maxBladeLength),k=T*S,O=T*C,B=T-(k+O);let R;if("katana"===e.name)z=this.getBladeCrossSection("single_edge"),g="clip",y=0,R=new sr([new E(0,0),new E(0,1)]);else{let t=A;v&&(t=jr(this.prng,x,b)),R=this.CreateEdgeSpline(t,y,_)}const P=new $r(T,e.extrusionCurve).setBladeCrossSection(new Gr(z),z.edgeVertices,new J(m),null!==(d=z.normEdgeVertices)&&void 0!==d?d:[],!0).scale(new E(e.bladeThickness/z.thickness,e.baseBladeWidth/z.width)).extrudeSection(R,w,k,.2).extrudeSection(new sr([new E(0,0),new E(0,1)]),M,O,.3).createTip(g,B);t.add(P)}buildGuard(t,e,r){r=Object.assign({color:"#7f5100",thickness:.01,guardBladeRatio:1.5},r);const n=new De(e.bladeThickness+.04,r.thickness,.06+e.baseBladeWidth),i=(new Yr).fromGeometry(n,new J(r.color));t.add(i)}buildHandle(t,e,r){var n,i;const s=null!==(n=null==r?void 0:r.color)&&void 0!==n?n:"#cc5100",o=null!==(i=null==r?void 0:r.radius)&&void 0!==i?i:.015,a=(new ur).setFromPoints(new Ze(0,0,o,2*o,0,2*Math.PI,!1,0).getPoints(8)),h=(new Yr).setCrossSection(Gr.createFromShape(a),new J(s)).translate(-e.handleLength);"katana"!==e.name&&h.scale(.5),h.extrude(new K(0,e.handleLength,0)),"katana"!==e.name&&h.scale(2),t.add(h)}buildPommel(t,e,r){var n;const i=null!==(n=null==r?void 0:r.color)&&void 0!==n?n:"#e5cc59";null==r||r.pommelBladeWidthRatio;const s=new Fr(.03,5,5);s.translate(0,-e.handleLength,0);let o=(new Yr).fromGeometry(s,new J(i));if("katana"===e.name){const t=(new ur).setFromPoints(new Ze(0,0,.016,.032,0,2*Math.PI,!1,0).getPoints(8));o=(new Yr).setCrossSection(Gr.createFromShape(t),new J(i)).translate(-e.handleLength).fill().extrude(new K(0,.03,0))}t.add(o)}CreateEdgeSpline(t,e,r=!0){if(t<0)throw new Error("Invalid number of points to create spline curve");const n=[new E(0,0)],i=function(t,e,r,n){const i=[],s=!r&&n?n:Math.random,o=1/e;if(r)for(let t=0;t<e;t++)i.push(o);else{let t=1;for(let r=0;r<e;r++)if(r===e-1)i.push(t);else{const n=.25*o,a=Ur(s,n,1.25*o),h=t-n*(e-r),u=Math.min(a,h);i.push(u),t-=u}}return i}(0,t+1,r,this.prng);let s=0;for(let t=0;t<i.length;t++){const r=new E;t===i.length-1?(r.y=1,r.x=0):(s+=i[t],r.y=s,r.x=Ur(this.prng,-e,e)),n.push(r)}return new sr(n)}}},124:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var n=r(537),i=r.n(n),s=r(645),o=r.n(s)()(i());o.push([t.id,".canvas-container{width:100%;height:600px;position:relative}canvas{width:100%;height:100%}@media only screen and (max-width: 500px){#gui{width:100%}.canvas-container{width:100%;height:65vh;position:relative}#download-button{position:block;width:100%}}#gui{position:absolute;top:0px;left:0px}#download-button{position:absolute;bottom:10px;right:10px;height:60px;width:175px}#download-button button{background-color:gray;width:100%;height:100%;font-weight:bold;color:#fff;box-shadow:#000}#download-button button:hover{background-color:#d4d4d4}#download-button button:active{background-color:#caa2a2}","",{version:3,sources:["webpack://./src/styles/infiniforge.scss"],names:[],mappings:"AAEA,kBACI,UAAA,CACA,YAAA,CACA,iBAAA,CAGF,OACE,UAAA,CACA,WAAA,CAGF,0CACE,KACE,UAAA,CAGF,kBACE,UAAA,CACA,WAAA,CACA,iBAAA,CAGF,iBACE,cAAA,CACA,UAAA,CAAA,CAIJ,KACE,iBAAA,CACA,OAAA,CACA,QAAA,CAGF,iBACE,iBAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CACA,WAAA,CAGF,wBACE,qBAAA,CACA,UAAA,CACA,WAAA,CACA,gBAAA,CACA,UAAA,CACA,eAAA,CAGF,8BACE,wBAAA,CAGF,+BACE,wBAAA",sourcesContent:["/* Infiniforge Stuff */\r\n\r\n.canvas-container {\r\n    width: 100%;\r\n    height: 600px;\r\n    position: relative;\r\n  }\r\n  \r\n  canvas {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n  @media only screen and (max-width: 500px) {\r\n    #gui {\r\n      width: 100%;\r\n    }\r\n  \r\n    .canvas-container {\r\n      width: 100%;\r\n      height: 65vh;\r\n      position: relative;\r\n    }\r\n  \r\n    #download-button {\r\n      position: block;\r\n      width: 100%;\r\n    }\r\n  }\r\n  \r\n  #gui {\r\n    position: absolute;\r\n    top: 0px;\r\n    left: 0px;\r\n  }\r\n  \r\n  #download-button {\r\n    position: absolute;\r\n    bottom: 10px;\r\n    right: 10px;\r\n    height: 60px;\r\n    width: 175px;\r\n  }\r\n  \r\n  #download-button button {\r\n    background-color: grey;\r\n    width: 100%;\r\n    height: 100%;\r\n    font-weight: bold;\r\n    color: white;\r\n    box-shadow: black;\r\n  }\r\n  \r\n  #download-button button:hover {\r\n    background-color: rgb(212, 212, 212);\r\n  }\r\n  \r\n  #download-button button:active {\r\n    background-color: rgb(202, 162, 162);\r\n  }"],sourceRoot:""}]);const a=o},297:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>y});var n=r(379),i=r.n(n),s=r(795),o=r.n(s),a=r(569),h=r.n(a),u=r(565),c=r.n(u),l=r(216),f=r.n(l),p=r(589),d=r.n(p),m=r(124),g={};g.styleTagTransform=d(),g.setAttributes=c(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=f(),i()(m.Z,g);const y=m.Z&&m.Z.locals?m.Z.locals:void 0},836:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.randomSeed=e.randomInt=void 0;const o=s(r(232)),a=s(r(376)),h=r(878),u=r(365),c=r(327),l=s(r(685));function f(t){return Math.floor(Math.random()*Math.floor(t))}function p(t=7){let e="";for(let r=0;r<t;r++){const t=Math.random();e+=t<=.33?String.fromCharCode(48+f(10)):t>.33&&t<=.66?String.fromCharCode(97+f(25)):String.fromCharCode(65+f(25))}return e}r(297),e.randomInt=f,e.randomSeed=p;const d=new o.MeshBasicMaterial({color:328965,wireframe:!0});(new class{constructor(){this.canvas=null,this.forgeParams={},this.swordModel=null,this.enableWireframe=!1,this.gui=null,this.renderer=null,this.scene=null,this.camera=null,this.orbitControl=null,this.transformControl=null,this.raycaster=new o.Raycaster,this.pointer=new o.Vector2,this.onUpPosition=new o.Vector2,this.onDownPosition=new o.Vector2,this.init()}init(){this.initThree(),this.initForgeParams(),this.onWindowResize.bind(this),this.animate.bind(this)}initThree(){this.canvas=document.getElementById("threejs-canvas"),this.renderer=new o.WebGLRenderer({canvas:this.canvas,antialias:!0});const t=this.renderer.domElement.getBoundingClientRect();this.renderer.setSize(t.width,t.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,this.scene=new o.Scene,this.scene.background=new o.Color(15790320);const e=t.width/t.height;this.camera=new o.PerspectiveCamera(75,e,.1,1e3),this.camera.position.z=2,this.camera.position.y=1,this.camera.updateProjectionMatrix(),this.scene.add(this.camera);const r=new o.PlaneGeometry(200,200);r.rotateX(-Math.PI/2);const n=new o.ShadowMaterial({opacity:.2}),i=new o.Mesh(r,n);i.position.y=-10,i.receiveShadow=!0,this.scene.add(i);const s=new o.GridHelper(200,100);s.position.y=-9.9,this.scene.add(s),this.orbitControl=new u.OrbitControls(this.camera,this.canvas),this.orbitControl.enableDamping=!0,this.orbitControl.dampingFactor=.05,this.orbitControl.minDistance=.5,this.orbitControl.enableZoom=!0,this.orbitControl.enableRotate=!0,this.orbitControl.addEventListener("change",this.render.bind(this)),this.transformControl=new c.TransformControls(this.camera,this.canvas),this.transformControl.addEventListener("change",this.render.bind(this)),this.transformControl.addEventListener("dragging-changed",(t=>{this.orbitControl.enabled=!t.value})),this.scene.add(this.transformControl);const a=new o.DirectionalLight(16777215);a.position.set(1,1,1),this.scene.add(a);const h=new o.DirectionalLight(13421772);h.position.set(-1,-1,-1),this.scene.add(h);const l=new o.AmbientLight(2236962);this.scene.add(l),window.addEventListener("resize",this.onWindowResize.bind(this),!1),document.addEventListener("pointerdown",this.onPointerDown.bind(this),!1),document.addEventListener("pointerup",this.onPointerUp.bind(this),!1)}initForgeParams(){this.forgeParams={output:"mesh",seed:"Enter a seed value",template:"random",bladeParams:{color:"#7f7f7f",crossSection:"random",tip:"random",edgeScaleTolerance:.1},guardParams:{color:"#7f5100"},handleParams:{color:"#cc5100"},pommelParams:{color:"#e5cc59"}};const t={"Random Seed":()=>{},Forge:this.forge.bind(this),"Random Forge":()=>{this.seedController.setValue(p()),this.forge()},"Toggle Wireframe":()=>{this.enableWireframe=!this.enableWireframe,this.swordModel&&(this.enableWireframe?this.swordModel.material=d:this.swordModel.material=this.importedMaterial)}};this.gui=new a.GUI({name:"Infiniforge Playground",closeOnTop:!0}),this.gui.domElement.id="gui",this.gui.add(t,"Random Forge"),this.gui.add(t,"Forge"),this.gui.add(t,"Random Seed").setValue((()=>{this.seedController.setValue(p())})),this.seedController=this.gui.add(this.forgeParams,"seed"),this.gui.add(this.forgeParams,"template",{Random:"random",Short:"short",Long:"long",Great:"great",Katana:"katana"});const e=this.gui.addFolder("Blade Options");e.add(this.forgeParams.bladeParams,"crossSection",{Random:"random",Diamond:"diamond","Hallow Ground":"hallow_ground",Hexagonal:"hexagonal","Thickened Diamond":"thickened_diamond",Lenticular:"lenticular",Fuller:"fuller","Double Fuller":"double_fuller","Broad Fuller":"broad_fuller","Single edge":"single_edge"}),e.add(this.forgeParams.bladeParams,"tip",{Random:"random",Standard:"standard",Square:"square",Rounded:"rounded",Clip:"clip"}),e.add(this.forgeParams.bladeParams,"edgeScaleTolerance",0,1),e.addColor(this.forgeParams.bladeParams,"color"),this.gui.addFolder("Guard Options").addColor(this.forgeParams.guardParams,"color"),this.gui.addFolder("Handle Options").addColor(this.forgeParams.handleParams,"color"),this.gui.addFolder("Pommel Options").addColor(this.forgeParams.pommelParams,"color"),this.gui.add(t,"Toggle Wireframe"),document.getElementById("canvas-container").appendChild(this.gui.domElement)}render(){this.renderer.render(this.scene,this.camera)}animate(){requestAnimationFrame(this.animate.bind(this)),this.orbitControl.update(),this.render()}async forge(){const t=new l.SwordGenerator;this.setGlTFDownload(!1);try{this.scene.remove(this.swordModel),this.swordModel=await t.generate({...this.forgeParams,output:"mesh"}),this.setGlTFDownload(!1),this.swordModel.rotation.y+=Math.PI/2,this.importedMaterial=this.swordModel.material,this.scene.add(this.swordModel),(new h.GLTFExporter).parse(this.swordModel,(t=>{this.swordGlTF=JSON.stringify(t),this.setGlTFDownload(!0)}),(t=>{console.error(t)}))}catch(t){console.error(t)}}run(){this.animate()}onWindowResize(){this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.camera.aspect=this.canvas.width/this.canvas.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.canvas.width,this.canvas.height)}onPointerDown(t){this.onDownPosition.x=t.offsetX,this.onDownPosition.y=t.offsetY}onPointerUp(t){if(this.onUpPosition.x=t.offsetX,this.onUpPosition.y=t.offsetY,0===this.onDownPosition.distanceTo(this.onUpPosition)&&this.transformControl.detach(),!this.swordModel)return;this.pointer.x=t.offsetX/this.canvas.offsetWidth*2-1,this.pointer.y=-t.offsetY/this.canvas.offsetHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);const e=this.raycaster.intersectObjects([this.swordModel]);if(e.length>0){const t=e[0].object;t!==this.transformControl.object&&this.transformControl.attach(t)}}setGlTFDownload(t){const e=document.getElementById("download-button");t&&void 0!==this.swordGlTF?(e.disabled=!1,e.parentElement.href=URL.createObjectURL(new Blob([this.swordGlTF],{type:"application/gltf;charset=utf-8"}))):e.disabled=!0}}).run()},616:()=>{}},r={};function n(t){var i=r[t];if(void 0!==i)return i.exports;var s=r[t]={id:t,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.exports}n.m=e,t=[],n.O=(e,r,i,s)=>{if(!r){var o=1/0;for(c=0;c<t.length;c++){for(var[r,i,s]=t[c],a=!0,h=0;h<r.length;h++)(!1&s||o>=s)&&Object.keys(n.O).every((t=>n.O[t](r[h])))?r.splice(h--,1):(a=!1,s<o&&(o=s));if(a){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,i,s]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={305:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var i,s,[o,a,h]=r,u=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(h)var c=h(n)}for(e&&e(r);u<o.length;u++)s=o[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},r=self.webpackChunkshijbey_github_io=self.webpackChunkshijbey_github_io||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.nc=void 0;var i=n.O(void 0,[765],(()=>n(836)));i=n.O(i)})();
//# sourceMappingURL=infiniforge.bundle.js.map